<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://zy84338719.github.io/blog">
  <title>Murphy Yi site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学习总结">
<meta property="og:type" content="website">
<meta property="og:title" content="Murphy Yi site">
<meta property="og:url" content="http://zy84338719.github.io/blog/page/6/index.html">
<meta property="og:site_name" content="Murphy Yi site">
<meta property="og:description" content="学习总结">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Murphy Yi">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Murphy Yi site" type="application/atom+xml">
  
  
    <link rel="icon" href="img/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?910a5dff7e42c4e5203432203dc26436";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="img/head.png" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/"></a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/archives/">归档</a></li>
	        
				<li><a target="_blank" rel="noopener" href="https://cv.murphyyi.com">个人主页</a></li>
	        
				<li><a target="_blank" rel="noopener" href="https://www.yuque.com/murphyyi/blog/">语雀</a></li>
	        
				<li><a target="_blank" rel="noopener" href="https://ework.murphyyi.com">导航</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/zy84338719" title="github"><i class="icon-github"></i></a>
		        
					<a class="jianshu" target="_blank" href="https://www.jianshu.com/u/872f0bfc7a2b" title="jianshu"><i class="icon-jianshu"></i></a>
		        
					<a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=SzEyc394eHN8enILPSI7ZTo6ZSgkJg" title="mail"><i class="icon-mail"></i></a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="img/head.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author"></h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zy84338719" title="github"><i class="icon-github"></i></a>
			        
						<a class="jianshu" target="_blank" href="https://www.jianshu.com/u/872f0bfc7a2b" title="jianshu"><i class="icon-jianshu"></i></a>
			        
						<a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=SzEyc394eHN8enILPSI7ZTo6ZSgkJg" title="mail"><i class="icon-mail"></i></a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 20%"><a href="/">主页</a></li>
		        
					<li style="width: 20%"><a href="/archives/">归档</a></li>
		        
					<li style="width: 20%"><a target="_blank" rel="noopener" href="https://cv.murphyyi.com">个人主页</a></li>
		        
					<li style="width: 20%"><a target="_blank" rel="noopener" href="https://www.yuque.com/murphyyi/blog/">语雀</a></li>
		        
					<li style="width: 20%"><a target="_blank" rel="noopener" href="https://ework.murphyyi.com">导航</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-yuque/go build 编译时的附加参数" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/22/yuque/go%20build%20%E7%BC%96%E8%AF%91%E6%97%B6%E7%9A%84%E9%99%84%E5%8A%A0%E5%8F%82%E6%95%B0/">go build 编译时的附加参数</a>
    </h1>
  

        
        <a href="/2020/05/22/yuque/go%20build%20%E7%BC%96%E8%AF%91%E6%97%B6%E7%9A%84%E9%99%84%E5%8A%A0%E5%8F%82%E6%95%B0/" class="archive-article-date">
  	<time datetime="2020-05-22T05:22:45.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="go-build-编译时的附加参数"><a href="#go-build-编译时的附加参数" class="headerlink" title="go build 编译时的附加参数"></a>go build 编译时的附加参数</h2><p>go build 还有一些附加参数，可以显示更多的编译信息和更多的操作，详见下表所示。</p>
<p>go build 编译时的附加参数</p>
<table>
<thead>
<tr>
<th>附加参数</th>
<th>备   注</th>
</tr>
</thead>
<tbody><tr>
<td>-v</td>
<td>编译时显示包名</td>
</tr>
<tr>
<td>-p n</td>
<td>开启并发编译，默认情况下该值为 CPU 逻辑核数</td>
</tr>
<tr>
<td>-a</td>
<td>强制重新构建</td>
</tr>
<tr>
<td>-n</td>
<td>打印编译时会用到的所有命令，但不真正执行</td>
</tr>
<tr>
<td>-x</td>
<td>打印编译时会用到的所有命令</td>
</tr>
<tr>
<td>-race</td>
<td>开启竞态检测</td>
</tr>
</tbody></table>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/22/yuque/go%20build%20%E7%BC%96%E8%AF%91%E6%97%B6%E7%9A%84%E9%99%84%E5%8A%A0%E5%8F%82%E6%95%B0/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/go 面试题" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/18/yuque/go%20%E9%9D%A2%E8%AF%95%E9%A2%98/">go 面试题</a>
    </h1>
  

        
        <a href="/2020/05/18/yuque/go%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="archive-article-date">
  	<time datetime="2020-05-18T12:32:26.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.   【初级】下面属于关键字的是（）<br>A. func<br>B. def<br>C. struct<br>D. class</p>
<p>参考答案：AC</p>
<p>2.   【初级】定义一个包内全局字符串变量，下面语法正确的是（）<br>A. var str string<br>B. str := “”<br>C. str = “”<br>D. var str = “”</p>
<p>参考答案：AD</p>
<p>3.   【初级】通过指针变量 p 访问其成员变量 name，下面语法正确的是（）<br>A. p.name<br>B. (*p).name<br>C. (&amp;p).name<br>D. p-&gt;name</p>
<p>参考答案：AB</p>
<p>4.   【初级】关于接口和类的说法，下面说法正确的是（）<br>A. 一个类只需要实现了接口要求的所有函数，我们就说这个类实现了该接口<br>B. 实现类的时候，只需要关心自己应该提供哪些方法，不用再纠结接口需要拆得多细才合理<br>C. 类实现接口时，需要导入接口所在的包<br>D. 接口由使用方按自身需求来定义，使用方无需关心是否有其他模块定义过类似的接口</p>
<p>参考答案：ABD</p>
<p>5.   【初级】关于字符串连接，下面语法正确的是（）<br>A. str := ‘abc’ + ‘123’<br>B. str := “abc” + “123”<br>C. str ：= ‘123’ + “abc”<br>D. fmt.Sprintf(“abc%d”, 123)</p>
<p>参考答案：BD</p>
<p>6.   【初级】关于协程，下面说法正确是（）<br>A. 协程和线程都可以实现程序的并发执行<br>B. 线程比协程更轻量级<br>C. 协程不存在死锁问题<br>D. 通过 channel 来进行协程间的通信</p>
<p>参考答案：AD</p>
<p>7.   【中级】关于 init 函数，下面说法正确的是（）<br>A. 一个包中，可以包含多个 init 函数<br>B. 程序编译时，先执行导入包的 init 函数，再执行本包内的 init 函数<br>C. main 包中，不能有 init 函数<br>D. init 函数可以被其他函数调用</p>
<p>参考答案：AB</p>
<p>8.   【初级】关于循环语句，下面说法正确的有（）<br>A. 循环语句既支持 for 关键字，也支持 while 和 do-while<br>B. 关键字 for 的基本使用方法与 C/C++中没有任何差异<br>C. for 循环支持 continue 和 break 来控制循环，但是它提供了一个更高级的 break，可以选择中断哪一个循环<br>D. for 循环不支持以逗号为间隔的多个赋值语句，必须使用平行赋值的方式来初始化多个变量  <br>参考答案：CD</p>
<p>9.   【中级】对于函数定义：</p>
<ol start="10">
<li>func add(args …int) int {</li>
<li>sum :=0</li>
<li>for _,arg := range args {</li>
<li>sum += arg</li>
<li>}</li>
<li>returnsum</li>
</ol>
<p>}</p>
<p>下面对 add 函数调用正确的是（）<br>A. add(1, 2)<br>B. add(1, 3, 7)<br>C. add([]int{1, 2})<br>D. add([]int{1, 3, 7}…)</p>
<p>参考答案：ABD</p>
<ol start="16">
<li>【初级】关于类型转化，下面语法正确的是（）</li>
</ol>
<p>A. 16. type MyInt int 16. var i int = 1</p>
<p>var jMyInt = i</p>
<p>B.</p>
<p>type MyIntint</p>
<p>var i int= 1</p>
<p>var jMyInt = (MyInt)i</p>
<p>C.</p>
<p>type MyIntint</p>
<p>var i int= 1</p>
<p>var jMyInt = MyInt(i)</p>
<p>D.</p>
<p>type MyIntint</p>
<p>var i int= 1</p>
<p>var jMyInt = i.(MyInt)</p>
<p>参考答案：C</p>
<ol start="19">
<li>【初级】关于局部变量的初始化，下面正确的使用方式是（）</li>
</ol>
<p>A. var i int = 10</p>
<p>B. var i = 10</p>
<p>C. i := 10</p>
<p>D. i = 10</p>
<p>参考答案：ABC</p>
<ol start="20">
<li>【初级】关于 const 常量定义，下面正确的使用方式是（）</li>
</ol>
<p>A. 20. const Pi float64 = 3.14159265358979323846</p>
<p>const zero= 0.0</p>
<p>B.</p>
<p>const (</p>
<p>size int64= 1024</p>
<p>eof = -1</p>
<p>)</p>
<p>C.</p>
<p>const (</p>
<p>ERR_ELEM_EXISTerror = errors.New(“element already exists”)</p>
<p>ERR_ELEM_NT_EXISTerror = errors.New(“element not exists”)</p>
<p>)</p>
<p>D.</p>
<p>const u, vfloat32 = 0, 3</p>
<p>const a,b, c = 3, 4, “foo”</p>
<p>参考答案：ABD</p>
<ol start="22">
<li>【初级】关于布尔变量 b 的赋值，下面错误的用法是（）</li>
</ol>
<p>A. b = true</p>
<p>B. b = 1</p>
<p>C. b = bool(1)</p>
<p>D. b = (1 == 2)</p>
<p>参考答案：BC</p>
<ol start="23">
<li>【中级】下面的程序的运行结果是（）</li>
<li>func main() {</li>
<li>if (true) {</li>
<li>defer fmt.Printf(“1”)</li>
<li>} else {</li>
<li>defer fmt.Printf(“2”)</li>
<li>}</li>
<li>fmt.Printf(“3”)</li>
</ol>
<p>}</p>
<p>A. 321<br>B. 32<br>C. 31<br>D. 13</p>
<p>参考答案：C</p>
<ol start="31">
<li>【初级】关于 switch 语句，下面说法正确的有（）</li>
</ol>
<p>A. 条件表达式必须为常量或者整数</p>
<p>B. 单个 case 中，可以出现多个结果选项</p>
<p>C. 需要用 break 来明确退出一个 case</p>
<p>D. 只有在 case 中明确添加 fallthrough 关键字，才会继续执行紧跟的下一个 case</p>
<p>参考答案：BD</p>
<ol start="32">
<li>【中级】 golang 中没有隐藏的 this 指针，这句话的含义是（）</li>
</ol>
<p>A. 方法施加的对象显式传递，没有被隐藏起来</p>
<p>B. golang 沿袭了传统面向对象编程中的诸多概念，比如继承、虚函数和构造函数</p>
<p>C. golang 的面向对象表达更直观，对于面向过程只是换了一种语法形式来表达</p>
<p>D. 方法施加的对象不需要非得是指针，也不用非得叫 this</p>
<p>参考答案：ACD</p>
<ol start="33">
<li>【中级】 golang 中的引用类型包括（）</li>
</ol>
<p>A. 数组切片</p>
<p>B. map</p>
<p>C. channel</p>
<p>D. interface</p>
<p>参考答案：ABCD</p>
<ol start="34">
<li>【中级】 golang 中的指针运算包括（）</li>
</ol>
<p>A. 可以对指针进行自增或自减运算</p>
<p>B. 可以通过“&amp;”取指针的地址</p>
<p>C. 可以通过“*”取指针指向的数据</p>
<p>D. 可以对指针进行下标运算</p>
<p>参考答案：BC</p>
<ol start="35">
<li>【初级】关于 main 函数（可执行程序的执行起点），下面说法正确的是（）</li>
</ol>
<p>A. main 函数不能带参数</p>
<p>B. main 函数不能定义返回值</p>
<p>C. main 函数所在的包必须为 main 包</p>
<p>D. main 函数中可以使用 flag 包来获取和解析命令行参数</p>
<p>参考答案：ABCD</p>
<ol start="36">
<li>【中级】下面赋值正确的是（）</li>
</ol>
<p>A. var x = nil</p>
<p>B. var x interface{} = nil</p>
<p>C. var x string = nil</p>
<p>D. var x error = nil</p>
<p>参考答案：BD</p>
<ol start="37">
<li>【中级】关于整型切片的初始化，下面正确的是（）</li>
</ol>
<p>A. s := make([]int)</p>
<p>B. s := make([]int, 0)</p>
<p>C. s := make([]int, 5, 10)</p>
<p>D. s := []int{1, 2, 3, 4, 5}</p>
<p>参考答案：BCD</p>
<ol start="38">
<li>【中级】从切片中删除一个元素，下面的算法实现正确的是（）</li>
</ol>
<p>A. 38. func (s *Slice)Remove(value interface{})error { 38. for i, v := range *s { 38. if isEqual(value, v) { 38. if i== len(*s) - 1 { 38. _s = (_s)[:i] 38. }else { 38. _s = append((_s)[:i],(*s)[i + 2:]…) 38. } 38. return nil 38. } 38. } 38. return ERR_ELEM_NT_EXIST</p>
<p>}</p>
<p>B.</p>
<p>func (s*Slice)Remove(value interface{}) error {</p>
<p>for i, v:= range *s {</p>
<p>if isEqual(value, v) {</p>
<p>_s =append((_s)[:i],(*s)[i + 1:])</p>
<p>return nil</p>
<p>}</p>
<p>}</p>
<p>returnERR_ELEM_NT_EXIST</p>
<p>}</p>
<p>C.</p>
<p>func (s*Slice)Remove(value interface{}) error {</p>
<p>for i, v:= range *s {</p>
<p>if isEqual(value, v) {</p>
<p>delete(*s, v)</p>
<p>return nil</p>
<p>}</p>
<p>}</p>
<p>returnERR_ELEM_NT_EXIST</p>
<p>}</p>
<p>D.</p>
<p>func (s*Slice)Remove(value interface{}) error {</p>
<p>for i, v:= range *s {</p>
<p>if isEqual(value, v) {</p>
<p>_s =append((_s)[:i],(*s)[i + 1:]…)</p>
<p>return nil</p>
<p>}</p>
<p>}</p>
<p>returnERR_ELEM_NT_EXIST</p>
<p>}</p>
<p>参考答案：D</p>
<ol start="51">
<li>【初级】对于局部变量整型切片 x 的赋值，下面定义正确的是（）</li>
</ol>
<p>A. 51. x := []int{ 51. 1, 2, 3, 51. 4, 5, 6,</p>
<p>}</p>
<p>B.</p>
<p>x :=[]int{</p>
<p>1, 2, 3,</p>
<p>4, 5, 6</p>
<p>}</p>
<p>C.</p>
<p>x :=[]int{</p>
<p>1, 2, 3,</p>
<p>4, 5, 6}</p>
<p>D.</p>
<p>x :=[]int{1, 2, 3, 4, 5, 6,}</p>
<p>参考答案：ACD</p>
<ol start="55">
<li>【初级】关于变量的自增和自减操作，下面语句正确的是（）</li>
</ol>
<p>A. 55. i := 1</p>
<p>i++</p>
<p>B.</p>
<p>i := 1</p>
<p>j = i++</p>
<p>C.</p>
<p>i := 1</p>
<p>++i</p>
<p>D.</p>
<p>i := 1</p>
<p>i–</p>
<p>参考答案：AD</p>
<ol start="57">
<li>【中级】关于函数声明，下面语法错误的是（）</li>
</ol>
<p>A. func f(a, b int) (value int, err error)</p>
<p>B. func f(a int, b int) (value int, err error)</p>
<p>C. func f(a, b int) (value int, error)</p>
<p>D. func f(a int, b int) (int, int, error)</p>
<p>参考答案：C</p>
<ol start="58">
<li>【中级】如果 Add 函数的调用代码为：</li>
<li>func main() {</li>
<li>var a Integer = 1</li>
<li>var b Integer = 2</li>
<li>var i interface{} = &amp;a</li>
<li>sum := i.(*Integer).Add(b)</li>
<li>fmt.Println(sum)</li>
</ol>
<p>}</p>
<p>则 Add 函数定义正确的是（）<br>A.</p>
<p>typeInteger int</p>
<p>func (aInteger) Add(b Integer) Integer {</p>
<p>return a + b</p>
<p>}</p>
<p>B.</p>
<p>typeInteger int</p>
<p>func (aInteger) Add(b *Integer) Integer {</p>
<p>return a + *b</p>
<p>}</p>
<p>C.</p>
<p>typeInteger int</p>
<p>func (a*Integer) Add(b Integer) Integer {</p>
<p>return *a + b</p>
<p>}</p>
<p>D.</p>
<p>typeInteger int</p>
<p>func (a_Integer) Add(b _Integer) Integer {</p>
<p>return _a + _b</p>
<p>}</p>
<p>参考答案：AC</p>
<ol start="65">
<li>【中级】如果 Add 函数的调用代码为：</li>
<li>func main() {</li>
<li>var a Integer = 1</li>
<li>var b Integer = 2</li>
<li>var i interface{} = a</li>
<li>sum := i.(Integer).Add(b)</li>
<li>fmt.Println(sum)</li>
</ol>
<p>}</p>
<p>则 Add 函数定义正确的是（）<br>A.</p>
<p>typeInteger int</p>
<p>func (a Integer)Add(b Integer) Integer {</p>
<p>return a + b</p>
<p>}</p>
<p>B.</p>
<p>typeInteger int</p>
<p>func (aInteger) Add(b *Integer) Integer {</p>
<p>return a + *b</p>
<p>}</p>
<p>C.</p>
<p>typeInteger int</p>
<p>func (a*Integer) Add(b Integer) Integer {</p>
<p>return *a + b</p>
<p>}</p>
<p>D.</p>
<p>typeInteger int</p>
<p>func (a_Integer) Add(b _Integer) Integer {</p>
<p>return _a + _b</p>
<p>}</p>
<p>参考答案：A</p>
<ol start="72">
<li>【中级】关于 GetPodAction 定义，下面赋值正确的是（）</li>
<li>type Fragment interface {</li>
<li>Exec(transInfo *TransInfo) error</li>
<li>}</li>
<li>type GetPodAction struct {</li>
<li>}</li>
<li>func (g GetPodAction) Exec(transInfo*TransInfo) error {</li>
<li>…</li>
<li>return nil</li>
</ol>
<p>}</p>
<p>A. var fragment Fragment =new(GetPodAction)<br>B. var fragment Fragment = GetPodAction<br>C. var fragment Fragment = &amp;GetPodAction{}<br>D. var fragment Fragment = GetPodAction{}</p>
<p>参考答案：ACD</p>
<ol start="81">
<li>【中级】关于 GoMock，下面说法正确的是（）</li>
</ol>
<p>A. GoMock 可以对 interface 打桩</p>
<p>B. GoMock 可以对类的成员函数打桩</p>
<p>C. GoMock 可以对函数打桩</p>
<p>D. GoMock 打桩后的依赖注入可以通过 GoStub 完成</p>
<p>参考答案：AD</p>
<ol start="82">
<li>【中级】关于接口，下面说法正确的是（）</li>
</ol>
<p>A. 只要两个接口拥有相同的方法列表（次序不同不要紧），那么它们就是等价的，可以相互赋值</p>
<p>B. 如果接口 A 的方法列表是接口 B 的方法列表的子集，那么接口 B 可以赋值给接口 A</p>
<p>C. 接口查询是否成功，要在运行期才能够确定</p>
<p>D. 接口赋值是否可行，要在运行期才能够确定</p>
<p>参考答案：ABC</p>
<ol start="83">
<li>【初级】关于 channel，下面语法正确的是（）</li>
</ol>
<p>A. var ch chan int</p>
<p>B. ch := make(chan int)</p>
<p>C. &lt;- ch</p>
<p>D. ch &lt;-</p>
<p>参考答案：ABC</p>
<ol start="84">
<li>【初级】关于同步锁，下面说法正确的是（）</li>
</ol>
<p>A. 当一个 goroutine 获得了 Mutex 后，其他 goroutine 就只能乖乖的等待，除非该 goroutine 释放这个 Mutex</p>
<p>B. RWMutex 在读锁占用的情况下，会阻止写，但不阻止读</p>
<p>C. RWMutex 在写锁占用情况下，会阻止任何其他 goroutine（无论读和写）进来，整个锁相当于由该 goroutine 独占</p>
<p>D. Lock()操作需要保证有 Unlock()或 RUnlock()调用与之对应</p>
<p>参考答案：ABC</p>
<ol start="85">
<li>【中级】 golang 中大多数数据类型都可以转化为有效的 JSON 文本，下面几种类型除外（）</li>
</ol>
<p>A. 指针</p>
<p>B. channel</p>
<p>C. complex</p>
<p>D. 函数</p>
<p>参考答案：BCD</p>
<ol start="86">
<li>【中级】关于 go vendor，下面说法正确的是（）</li>
</ol>
<p>A. 基本思路是将引用的外部包的源代码放在当前工程的 vendor 目录下面</p>
<p>B. 编译 go 代码会优先从 vendor 目录先寻找依赖包</p>
<p>C. 可以指定引用某个特定版本的外部包</p>
<p>D. 有了 vendor 目录后，打包当前的工程代码到其他机器的$GOPATH/src 下都可以通过编译</p>
<p>参考答案：ABD</p>
<ol start="87">
<li>【初级】 flag 是 bool 型变量，下面 if 表达式符合编码规范的是（）</li>
</ol>
<p>A. if flag == 1</p>
<p>B. if flag</p>
<p>C. if flag == false</p>
<p>D. if !flag</p>
<p>参考答案：BD</p>
<ol start="88">
<li>【初级】 value 是整型变量，下面 if 表达式符合编码规范的是（）</li>
</ol>
<p>A. if value == 0</p>
<p>B. if value</p>
<p>C. if value != 0</p>
<p>D. if !value</p>
<p>参考答案：AC</p>
<ol start="89">
<li>【中级】关于函数返回值的错误设计，下面说法正确的是（）</li>
</ol>
<p>A. 如果失败原因只有一个，则返回 bool</p>
<p>B. 如果失败原因超过一个，则返回 error</p>
<p>C. 如果没有失败原因，则不返回 bool 或 error</p>
<p>D. 如果重试几次可以避免失败，则不要立即返回 bool 或 error</p>
<p>参考答案：ABCD</p>
<ol start="90">
<li>【中级】关于异常设计，下面说法正确的是（）</li>
</ol>
<p>A. 在程序开发阶段，坚持速错，让程序异常崩溃</p>
<p>B. 在程序部署后，应恢复异常避免程序终止</p>
<p>C. 一切皆错误，不用进行异常设计</p>
<p>D. 对于不应该出现的分支，使用异常处理</p>
<p>参考答案：ABD</p>
<ol start="91">
<li>【中级】关于 slice 或 map 操作，下面正确的是（）</li>
</ol>
<p>A. 91. var s []int</p>
<p>s =append(s,1)</p>
<p>B.</p>
<p>var mmap[string]int</p>
<p>m[“one”]= 1</p>
<p>C.</p>
<p>var s[]int</p>
<p>s =make([]int, 0)</p>
<p>s =append(s,1)</p>
<p>D.</p>
<p>var mmap[string]int</p>
<p>m =make(map[string]int)</p>
<p>m[“one”]= 1</p>
<p>参考答案：ACD</p>
<ol start="93">
<li>【中级】关于 channel 的特性，下面说法正确的是（）</li>
</ol>
<p>A. 给一个 nil channel 发送数据，造成永远阻塞</p>
<p>B. 从一个 nil channel 接收数据，造成永远阻塞</p>
<p>C. 给一个已经关闭的 channel 发送数据，引起 panic</p>
<p>D. 从一个已经关闭的 channel 接收数据，如果缓冲区中为空，则返回一个零值</p>
<p>参考答案：ABCD</p>
<ol start="94">
<li>【中级】关于无缓冲和有冲突的 channel，下面说法正确的是（）</li>
</ol>
<p>A. 无缓冲的 channel 是默认的缓冲为 1 的 channel</p>
<p>B. 无缓冲的 channel 和有缓冲的 channel 都是同步的</p>
<p>C. 无缓冲的 channel 和有缓冲的 channel 都是非同步的</p>
<p>D. 无缓冲的 channel 是同步的，而有缓冲的 channel 是非同步的</p>
<p>参考答案：D</p>
<ol start="95">
<li>【中级】关于异常的触发，下面说法正确的是（）</li>
</ol>
<p>A. 空指针解析</p>
<p>B. 下标越界</p>
<p>C. 除数为 0</p>
<p>D. 调用 panic 函数</p>
<p>参考答案：ABCD</p>
<ol start="96">
<li>【中级】关于 cap 函数的适用类型，下面说法正确的是（）</li>
</ol>
<p>A. array</p>
<p>B. slice</p>
<p>C. map</p>
<p>D. channel</p>
<p>参考答案：ABD</p>
<ol start="97">
<li>【中级】关于 beego 框架，下面说法正确的是（）</li>
</ol>
<p>A. beego 是一个 golang 实现的轻量级 HTTP 框架</p>
<p>B. beego 可以通过注释路由、正则路由等多种方式完成 url 路由注入</p>
<p>C. 可以使用 bee new 工具生成空工程，然后使用 bee run 命令自动热编译</p>
<p>D. beego 框架只提供了对 url 路由的处理，而对于 MVC 架构中的数据库部分未提供框架支持</p>
<p>参考答案：ABC</p>
<ol start="98">
<li>【中级】关于 goconvey，下面说法正确的是（）</li>
</ol>
<p>A. goconvey 是一个支持 golang 的单元测试框架</p>
<p>B. goconvey 能够自动监控文件修改并启动测试，并可以将测试结果实时输出到 web 界面</p>
<p>C. goconvey 提供了丰富的断言简化测试用例的编写</p>
<p>D. goconvey 无法与 go test 集成</p>
<p>参考答案：ABC</p>
<ol start="99">
<li>【中级】关于 go vet，下面说法正确的是（）</li>
</ol>
<p>A. go vet 是 golang 自带工具 go tool vet 的封装</p>
<p>B. 当执行 go vet database 时，可以对 database 所在目录下的所有子文件夹进行递归检测</p>
<p>C. go vet 可以使用绝对路径、相对路径或相对 GOPATH 的路径指定待检测的包</p>
<p>D. go vet 可以检测出死代码</p>
<p>参考答案：ACD</p>
<p>100.             【中级】关于 map，下面说法正确的是（）<br>A. map 反序列化时 json.unmarshal 的入参必须为 map 的地址<br>B. 在函数调用中传递 map，则子函数中对 map 元素的增加不会导致父函数中 map 的修改<br>C. 在函数调用中传递 map，则子函数中对 map 元素的修改不会导致父函数中 map 的修改<br>D. 不能使用内置函数 delete 删除 map 的元素</p>
<p>参考答案：A</p>
<p>101.             【中级】关于 GoStub，下面说法正确的是（）<br>A. GoStub 可以对全局变量打桩<br>B. GoStub 可以对函数打桩<br>C. GoStub 可以对类的成员方法打桩<br>D. GoStub 可以打动态桩，比如对一个函数打桩后，多次调用该函数会有不同的行为</p>
<p>参考答案：ABD</p>
<p>102.             【初级】关于 select 机制，下面说法正确的是（）<br>A. select 机制用来处理异步 IO 问题<br>B. select 机制最大的一条限制就是每个 case 语句里必须是一个 IO 操作<br>C. golang 在语言级别支持 select 关键字<br>D. select 关键字的用法与 switch 语句非常类似，后面要带判断条件</p>
<p>参考答案：ABC</p>
<p>103.             【初级】关于内存泄露，下面说法正确的是（）<br>A. golang 有自动垃圾回收，不存在内存泄露<br>B. golang 中检测内存泄露主要依靠的是 pprof 包<br>C. 内存泄露可以在编译阶段发现<br>D. 应定期使用浏览器来查看系统的实时内存信息，及时发现内存泄露问题</p>
<p>参考答案：BD</p>
<p>填空题</p>
<p>1.   【初级】声明一个整型变量 i**<strong>__**</strong></p>
<p>参考答案：var i int</p>
<p>2.   【初级】声明一个含有 10 个元素的整型数组 a**<strong>__**</strong></p>
<p>参考答案：var a [10]int</p>
<p>3.   【初级】声明一个整型数组切片 s**<strong>__**</strong></p>
<p>参考答案：var s []int</p>
<p>4.   【初级】声明一个整型指针变量 p**<strong>__**</strong></p>
<p>参考答案：var p *int</p>
<p>5.   【初级】声明一个 key 为字符串型 value 为整型的 map 变量 m**<strong>__**</strong></p>
<p>参考答案：var m map[string]int</p>
<p>6.   【初级】声明一个入参和返回值均为整型的函数变量 f**<strong>__**</strong></p>
<p>参考答案：var f func(a int) int</p>
<p>7.   【初级】声明一个只用于读取 int 数据的单向 channel 变量 ch**<strong>__**</strong></p>
<p>参考答案：var ch &lt;-chan int</p>
<p>8.   【初级】假设源文件的命名为 slice.go，则测试文件的命名为**<strong>__**</strong></p>
<p>参考答案：slice_test.go</p>
<p>9.   【初级】 go test 要求测试函数的前缀必须命名为**<strong>__**</strong></p>
<p>参考答案：Test</p>
<ol start="10">
<li>【中级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>for i := 0; i &lt; 5; i++ {</li>
<li>defer fmt.Printf(“%d “, i)</li>
</ol>
<p>}</p>
<p>参考答案：4 3 2 1 0</p>
<ol start="13">
<li>【中级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>func main() {</li>
<li>x := 1</li>
<li>{</li>
<li>x := 2</li>
<li>fmt.Print(x)</li>
<li>}</li>
<li>fmt.Println(x)</li>
</ol>
<p>}</p>
<p>参考答案：21</p>
<ol start="21">
<li><p>【中级】下面的程序的运行结果是**<strong>__**</strong></p>
</li>
<li><p>func main() {</p>
</li>
<li><p>strs := []string{“one”,”two”, “three”}</p>
</li>
<li></li>
<li><p>for _, s := range strs {</p>
</li>
<li><p>go func() {</p>
</li>
<li><p>time.Sleep(1 * time.Second)</p>
</li>
<li><p>fmt.Printf(“%s “, s)</p>
</li>
<li><p>}()</p>
</li>
<li><p>}</p>
</li>
<li><p>time.Sleep(3 * time.Second)</p>
</li>
</ol>
<p>}</p>
<p>参考答案：three threethree</p>
<ol start="32">
<li>【中级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>func main() {</li>
<li>x := []string{“a”, “b”,”c”}</li>
<li>for v := range x {</li>
<li>fmt.Print(v)</li>
<li>}</li>
</ol>
<p>}</p>
<p>参考答案：012</p>
<ol start="38">
<li>【中级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>func main() {</li>
<li>x := []string{“a”, “b”,”c”}</li>
<li>for _, v := range x {</li>
<li>fmt.Print(v)</li>
<li>}</li>
</ol>
<p>}</p>
<p>参考答案：abc</p>
<ol start="44">
<li>【初级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>func main() {</li>
<li>i := 1</li>
<li>j := 2</li>
<li>i, j = j, i</li>
<li>fmt.Printf(“%d%d\n”, i, j)</li>
</ol>
<p>}</p>
<p>参考答案：21</p>
<ol start="50">
<li>【初级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>func incr(p *int) int {</li>
<li>*p++</li>
<li>return *p</li>
<li>}</li>
<li>func main() {</li>
<li>v := 1</li>
<li>incr(&amp;v)</li>
<li>fmt.Println(v)</li>
</ol>
<p>}</p>
<p>参考答案：2</p>
<ol start="59">
<li>【初级】启动一个 goroutine 的关键字是**<strong>__**</strong></li>
</ol>
<p>参考答案：go</p>
<ol start="60">
<li>【中级】下面的程序的运行结果是**<strong>__**</strong></li>
<li>type Slice []int</li>
<li>func NewSlice() Slice {</li>
<li>return make(Slice, 0)</li>
<li>}</li>
<li>func (s_ Slice) Add(elem int) _Slice {</li>
<li>_s = append(_s, elem)</li>
<li>fmt.Print(elem)</li>
<li>return s</li>
<li>}</li>
<li>func main() {</li>
<li>s := NewSlice()</li>
<li>defer s.Add(1).Add(2)</li>
<li>s.Add(3)</li>
</ol>
<p>}</p>
<p>参考答案：132</p>
<p>判断题</p>
<p>1.   【初级】数组是一个值类型（）</p>
<p>参考答案：T</p>
<p>2.   【初级】使用 map 不需要引入任何库（）</p>
<p>参考答案：T</p>
<p>3.   【中级】内置函数 delete 可以删除数组切片内的元素（）</p>
<p>参考答案：F</p>
<p>4.   【初级】指针是基础类型（）</p>
<p>参考答案：F</p>
<p>5.   【初级】 interface{}是可以指向任意对象的 Any 类型（）</p>
<p>参考答案：T</p>
<p>6.   【中级】下面关于文件操作的代码可能触发异常（）</p>
<p>7.  file, err := os.Open(“test.go”)</p>
<p>8.  defer file.Close()</p>
<p>9.  if err != nil {</p>
<ol start="10">
<li>fmt.Println(“open file failed:”,err)</li>
<li>return</li>
<li>}</li>
</ol>
<p>…</p>
<p>参考答案：T</p>
<ol start="13">
<li>【初级】 Golang 不支持自动垃圾回收（）</li>
</ol>
<p>参考答案：F</p>
<ol start="14">
<li>【初级】 Golang 支持反射，反射最常见的使用场景是做对象的序列化（）</li>
</ol>
<p>参考答案：T</p>
<ol start="15">
<li>【初级】 Golang 可以复用 C/C++的模块，这个功能叫 Cgo（）</li>
</ol>
<p>参考答案：F</p>
<ol start="16">
<li>【初级】下面代码中两个斜点之间的代码，比如 json:”x”，作用是 X 字段在从结构体实例编码到 JSON 数据格式的时候，使用 x 作为名字，这可以看作是一种重命名的方式（）</li>
<li>type Position struct {</li>
<li>X int <code>json:&quot;x&quot;</code></li>
<li>Y int <code>json:&quot;y&quot;</code></li>
<li>Z int <code>json:&quot;z&quot;</code></li>
</ol>
<p>}</p>
<p>参考答案：T</p>
<ol start="21">
<li>【初级】通过成员变量或函数首字母的大小写来决定其作用域（）</li>
</ol>
<p>参考答案：T</p>
<ol start="22">
<li>【初级】对于常量定义 zero(const zero = 0.0)，zero 是浮点型常量（）</li>
</ol>
<p>参考答案：F</p>
<ol start="23">
<li>【初级】对变量 x 的取反操作是~x（）</li>
</ol>
<p>参考答案：F</p>
<ol start="24">
<li>【初级】下面的程序的运行结果是 xello（）</li>
<li>func main() {</li>
<li>str := “hello”</li>
<li>str[0] = ‘x’</li>
<li>fmt.Println(str)</li>
</ol>
<p>}</p>
<p>参考答案：F</p>
<ol start="29">
<li>【初级】 golang 支持 goto 语句（）</li>
</ol>
<p>参考答案：T</p>
<ol start="30">
<li>【初级】下面代码中的指针 p 为野指针，因为返回的栈内存在函数结束时会被释放（）</li>
<li>type TimesMatcher struct {</li>
<li>base int</li>
<li>}</li>
<li>func NewTimesMatcher(base int) *TimesMatcher{</li>
<li>return &amp;TimesMatcher{base:base}</li>
<li>}</li>
<li>func main() {</li>
<li>p := NewTimesMatcher(3)</li>
<li>…</li>
</ol>
<p>}</p>
<p>参考答案：F</p>
<ol start="40">
<li>【初级】匿名函数可以直接赋值给一个变量或者直接执行（）</li>
</ol>
<p>参考答案：T</p>
<ol start="41">
<li>【初级】如果调用方调用了一个具有多返回值的方法，但是却不想关心其中的某个返回值，可以简单地用一个下划线“_”来跳过这个返回值，该下划线对应的变量叫匿名变量（）</li>
</ol>
<p>参考答案：T</p>
<ol start="42">
<li>【初级】在函数的多返回值中，如果有 error 或 bool 类型，则一般放在最后一个（）</li>
</ol>
<p>参考答案：T</p>
<ol start="43">
<li>【初级】错误是业务过程的一部分，而异常不是（）</li>
</ol>
<p>参考答案：T</p>
<ol start="44">
<li>【初级】函数执行时，如果由于 panic 导致了异常，则延迟函数不会执行（）</li>
</ol>
<p>参考答案：F</p>
<ol start="45">
<li>【中级】当程序运行时，如果遇到引用空指针、下标越界或显式调用 panic 函数等情况，则先触发 panic 函数的执行，然后调用延迟函数。调用者继续传递 panic，因此该过程一直在调用栈中重复发生：函数停止执行，调用延迟执行函数。如果一路在延迟函数中没有 recover 函数的调用，则会到达该携程的起点，该携程结束，然后终止其他所有携程，其他携程的终止过程也是重复发生：函数停止执行，调用延迟执行函数（）</li>
</ol>
<p>参考答案：F</p>
<ol start="46">
<li>【初级】同级文件的包名不允许有多个（）</li>
</ol>
<p>参考答案：T</p>
<ol start="47">
<li>【中级】可以给任意类型添加相应的方法（）</li>
</ol>
<p>参考答案：F</p>
<ol start="48">
<li>【初级】 golang 虽然没有显式的提供继承语法，但是通过匿名组合实现了继承（）</li>
</ol>
<p>参考答案：T</p>
<ol start="49">
<li>【初级】使用 for range 迭代 map 时每次迭代的顺序可能不一样，因为 map 的迭代是随机的（）</li>
</ol>
<p>参考答案：T</p>
<ol start="50">
<li>【初级】 switch 后面可以不跟表达式（）</li>
</ol>
<p>参考答案：T</p>
<ol start="51">
<li>【中级】结构体在序列化时非导出变量（以小写字母开头的变量名）不会被 encode，因此在 decode 时这些非导出变量的值为其类型的零值（）</li>
</ol>
<p>参考答案：T</p>
<ol start="52">
<li>【初级】 golang 中没有构造函数的概念，对象的创建通常交由一个全局的创建函数来完成，以 NewXXX 来命名（）</li>
</ol>
<p>参考答案：T</p>
<ol start="53">
<li><p>【中级】当函数 deferDemo 返回失败时，并不能 destroy 已 create 成功的资源（）</p>
</li>
<li><p>func deferDemo() error {</p>
</li>
<li><p>err := createResource1()</p>
</li>
<li><p>if err != nil {</p>
</li>
<li><p>return ERR_CREATE_RESOURCE1_FAILED</p>
</li>
<li><p>}</p>
</li>
<li><p>defer func() {</p>
</li>
<li><p>if err != nil {</p>
</li>
<li><p>destroyResource1()</p>
</li>
<li><p>}</p>
</li>
<li><p>}()</p>
</li>
<li></li>
<li><p>err = createResource2()</p>
</li>
<li><p>if err != nil {</p>
</li>
<li><p>return ERR_CREATE_RESOURCE2_FAILED</p>
</li>
<li><p>}</p>
</li>
<li><p>defer func() {</p>
</li>
<li><p>if err != nil {</p>
</li>
<li><p>destroyResource2()</p>
</li>
<li><p>}</p>
</li>
<li><p>}()</p>
</li>
<li></li>
<li><p>err = createResource3()</p>
</li>
<li><p>if err != nil {</p>
</li>
<li><p>return ERR_CREATE_RESOURCE3_FAILED</p>
</li>
<li><p>}</p>
</li>
<li><p>return nil</p>
</li>
</ol>
<p>}</p>
<p>参考答案：F</p>
<ol start="80">
<li>【中级】 channel 本身必然是同时支持读写的，所以不存在单向 channel（）</li>
</ol>
<p>参考答案：F</p>
<ol start="81">
<li>【初级】 import 后面的最后一个元素是包名（）</li>
</ol>
<p>参考答案：F</p>
<p>最近在很多地方看到了 golang 的面试题，看到了很多人对 Golang 的面试题心存恐惧，也是为了复习基础，我把解题的过程总结下来。</p>
<p>面试题</p>
<p>1 写出下面代码输出内容。</p>
<p>package main<br>import (   <br>“fmt”<br>)<br>funcmain() {<br>    defer_call()<br>}<br>funcdefer_call() {<br>    deferfunc() {fmt.Println(“打印前”)}()<br>    deferfunc() {fmt.Println(“打印中”)}()<br>    deferfunc() {fmt.Println(“打印后”)}()<br>    panic(“触发异常”)<br>}</p>
<p>考点：defer 执行顺序<br>解答：<br>defer 是后进先出。<br>panic 需要等 defer 结束后才会向上传递。 出现 panic 恐慌时候，会先按照 defer 的后入先出的顺序执行，最后才会执行 panic。</p>
<p>打印后<br>打印中<br>打印前<br>panic: 触发异常</p>
<p>2 以下代码有什么问题，说明原因。</p>
<p>type student struct {<br>    Name string<br>    Age  int<br>}<br>funcpase<em>student() {<br>    m := make(map[string]\</em>student)<br>    stus := []student{<br>        {Name: “zhou”,Age: 24},<br>        {Name: “li”,Age: 23},<br>        {Name: “wang”,Age: 22},<br>    }    for *,stu := range stus {<br>        m[stu.Name] =&amp;stu<br>    }<br>}</p>
<p>考点：foreach<br>解答：<br>这样的写法初学者经常会遇到的，很危险！ 与 Java 的 foreach 一样，都是使用副本的方式。所以 m[stu.Name]=&amp;stu 实际上一致指向同一个指针， 最终该指针的值为遍历的最后一个 struct 的值拷贝。 就像想修改切片元素的属性：</p>
<p>for _, stu := rangestus {<br>    stu.Age = stu.Age+10}</p>
<p>也是不可行的。 大家可以试试打印出来：</p>
<p>func pase<em>student() {<br>    m := make(map[string]\</em>student)<br>    stus := []student{<br>        {Name: “zhou”,Age: 24},<br>        {Name: “li”,Age: 23},<br>        {Name: “wang”,Age: 22},<br>    }    <br>    // 错误写法<br>    for *,stu := range stus {<br>        m[stu.Name] =&amp;stu<br>    }    <br>     fork,v:=range m{        <br>      println(k,”=&gt;”,v.Name)<br>    }    <br>      // 正确<br>    for i:=0;i&lt;len(stus);i++ {<br>       m[stus[i].Name] = &amp;stus[i]<br>    }    <br>     fork,v:=range m{        <br>       println(k,”=&gt;”,v.Name)<br>    }<br>}</p>
<p>3 下面的代码会输出什么，并说明原因</p>
<p>func main() {<br>    runtime.GOMAXPROCS(1)<br>    wg := sync.WaitGroup{}<br>    wg.Add(20)   for i := 0; i &lt; 10; i++ {        <br>         gofunc() {<br>           fmt.Println(“A: “, i)<br>           wg.Done()<br>        }()<br>    }    <br>        for i:= 0; i &lt; 10; i++ {        <br>           gofunc(i int) {<br>           fmt.Println(“B: “, i)<br>           wg.Done()<br>        }(i)<br>    }<br>    wg.Wait()<br>}</p>
<p>考点：go 执行的随机性和闭包<br>解答：<br>谁也不知道执行后打印的顺序是什么样的，所以只能说是随机数字。 但是 A:均为输出 10，B:从 0~9 输出(顺序不定)。 第一个 go func 中 i 是外部 for 的一个变量，地址不变化。遍历完成后，最终 i=10。 故 go func 执行时，i 的值始终是 10。</p>
<p>第二个 go func 中 i 是函数参数，与外部 for 中的 i 完全是两个变量。 尾部(i)将发生值拷贝，go func 内部指向值拷贝地址。<br>4 下面代码会输出什么？</p>
<p>type People struct{}func (p <em>People)ShowA() {<br>    fmt.Println(“showA”)<br>    p.ShowB()<br>}<br>func(p</em>People)ShowB() {<br>    fmt.Println(“showB”)<br>}<br>typeTeacher struct {<br>    People<br>}<br>func(t*Teacher)ShowB() {<br>    fmt.Println(“teachershowB”)<br>}<br>funcmain() {<br>    t := Teacher{}<br>    t.ShowA()<br>}</p>
<p>考点：go 的组合继承<br>解答：<br>这是 Golang 的组合模式，可以实现 OOP 的继承。 被组合的类型 People 所包含的方法虽然升级成了外部类型 Teacher 这个组合类型的方法（一定要是匿名字段），但它们的方法(ShowA())调用时接受者并没有发生变化。 此时 People 类型并不知道自己会被什么类型组合，当然也就无法调用方法时去使用未知的组合者 Teacher 类型的功能。<br>showAshowB</p>
<p>5 下面代码会触发异常吗？请详细说明</p>
<p>func main() {<br>    runtime.GOMAXPROCS(1)<br>    int_chan := make(chanint, 1)<br>    string_chan := make(chanstring, 1)<br>    int_chan &lt;- 1<br>    string_chan &lt;- “hello”<br>    select {   <br>            case value := &lt;-int_chan:<br>       fmt.Println(value)<br>          casevalue := &lt;-string_chan:        <br>          panic(value)<br>    }<br>}</p>
<p>考点：select 随机性<br>解答：<br>select 会随机选择一个可用通用做收发操作。 所以代码是有肯触发异常，也有可能不会。 单个 chan 如果无缓冲时，将会阻塞。但结合 select 可以在多个 chan 间等待执行。有三点原则：</p>
<p>select 中只要有一个 case 能 return，则立刻执行。<br>当如果同一时间有多个 case 均能 return 则伪随机方式抽取任意一个执行。<br>如果没有一个 case 能 return 则可以执行”default”块。</p>
<p>6 下面代码输出什么？</p>
<p>funccalc(indexstring, a, bint) int {<br>    ret := a+ b<br>    fmt.Println(index,a, b, ret)<br>    return ret<br>}<br>funcmain() {   <br>      a := 1<br>    b := 2<br>    defer calc(“1”, a,calc(“10”, a, b))    a = 0<br>    defer calc(“2”, a,calc(“20”, a, b))    b = 1<br>}</p>
<p>考点：defer 执行顺序<br>解答：<br>这道题类似第 1 题 需要注意到 defer 执行顺序和值传递 index:1 肯定是最后执行的，但是 index:1 的第三个参数是一个函数，所以最先被调用<br>calc(“10”,1,2)&gt;10,1,2,3 执行 index:2 时,与之前一样，需要先调用 calc(“20”,0,2)&gt;20,0,2,2 执行到 b=1 时候开始调用，index:2==&gt;calc(“2”,0,2)&gt;2,0,2,2 最后执行 index:1&gt;calc(“1”,1,3)==&gt;1,1,3,4</p>
<p>10 1 2 320 0 2 22 0 2 21 1 3 4</p>
<p>7 请写出以下输入内容</p>
<p>funcmain() {    <br>       s := make([]int,5)<br>    s = append(s,1, 2, 3)<br>    fmt.Println(s)<br>}</p>
<p>考点：make 默认值和 append<br>解答：<br>make 初始化是由默认值的哦，此处默认值为 0</p>
<p>[00000123]</p>
<p>大家试试改为:</p>
<p>s := make([]int, 0)<br>s = append(s, 1, 2, 3)<br>fmt.Println(s)//[1 2 3]</p>
<p>8 下面的代码有什么问题?</p>
<p>type UserAges struct {<br>    ages map[string]int<br>    sync.Mutex<br>}<br>func(ua<em>UserAges)Add(name string, age int) {<br>    ua.Lock()  <br>       deferua.Unlock()<br>    ua.ages[name] = age<br>}<br>func(ua</em>UserAges)Get(name string)int {    <br>      ifage, ok := ua.ages[name]; ok {        <br>         return age<br>    }  <br>      return-1<br>}</p>
<p>考点：map 线程安全<br>解答：<br>可能会出现</p>
<p>fatal error: concurrent mapreadandmapwrite.</p>
<p>修改一下看看效果</p>
<p>func (ua *UserAges)Get(namestring)int {<br>    ua.Lock()    <br>     deferua.Unlock()    <br>     ifage, ok := ua.ages[name]; ok {        <br>          return age<br>    }    <br>       return-1<br>}</p>
<p>9.    下面的迭代会有什么问题？</p>
<p>func (set *threadSafeSet)Iter()&lt;-chaninterface{} {<br>    ch := make(chaninterface{})   <br>              gofunc() {<br>        set.RLock()   <br>            for elem := range set.s {<br>           ch &lt;- elem<br>        }     <br>             close(ch)<br>        set.RUnlock()<br>    }()<br>     return ch<br>}</p>
<p>考点：chan 缓存池<br>解答：<br>看到这道题，我也在猜想出题者的意图在哪里。 chan?sync.RWMutex?go?chan 缓存池?迭代? 所以只能再读一次题目，就从迭代入手看看。 既然是迭代就会要求 set.s 全部可以遍历一次。但是 chan 是为缓存的，那就代表这写入一次就会阻塞。 我们把代码恢复为可以运行的方式，看看效果</p>
<p>package main<br>import (   <br>      “sync”<br>    “fmt”)//下面的迭代会有什么问题？type threadSafeSet struct {<br>    sync.RWMutex<br>    s []interface{}<br>}<br>func(set*threadSafeSet)Iter() &lt;-chaninterface{} {    <br>//ch := make(chan interface{}) // 解除注释看看！<br>    ch := make(chaninterface{},len(set.s))   <br>gofunc() {<br>        set.RLock()       <br>forelem,value := range set.s {<br>           ch &lt;- elem            <br>println(“Iter:”,elem,value)<br>        }       close(ch)<br>        set.RUnlock()<br>    }()    <br>return ch<br>}<br>funcmain() {<br>    th:=threadSafeSet{<br>        s:[]interface{}{“1”,”2”},<br>    }<br>    v:=&lt;-th.Iter()<br>    fmt.Sprintf(“%s%v”,”ch”,v)<br>}</p>
<p>10 以下代码能编译过去吗？为什么？</p>
<p>package main<br>import (   “fmt”)<br>typePeople interface {<br>    Speak(string) string<br>}<br>typeStduent struct{}<br>func(stu*Stduent)Speak(think string)(talk string) {    <br>ifthink == “bitch” {<br>        talk = “Youare a good boy”<br>    } else {<br>        talk = “hi”<br>    }<br>    return<br>}<br>funcmain() {<br>    var peoPeople = Stduent{}<br>    think := “bitch”<br>   fmt.Println(peo.Speak(think))<br>}</p>
<p>考点：golang 的方法集<br>解答：<br>编译不通过！ 做错了！？说明你对 golang 的方法集还有一些疑问。 一句话：golang 的方法集仅仅影响接口实现和方法表达式转化，与通过实例或者指针调用方法无关。</p>
<p>11 以下代码打印出来什么内容，说出为什么。</p>
<p>package main<br>import (   “fmt”)<br>typePeople interface {<br>    Show()<br>}<br>typeStudent struct{}<br>func(stu<em>Student)Show() {<br>}<br>funclive()People {<br>    var stu</em>Student<br>    return stu<br>}<br>funcmain() {   if live() == nil<br>{<br>        fmt.Println(“AAAAAAA”)<br>    } else {<br>        fmt.Println(“BBBBBBB”)<br>    }<br>}</p>
<p>考点：interface 内部结构<br>解答：<br>很经典的题！ 这个考点是很多人忽略的 interface 内部结构。 go 中的接口分为两种一种是空的接口类似这样：</p>
<p>varininterface{}</p>
<p>另一种如题目：</p>
<p>type People interface {<br>    Show()<br>}</p>
<p>他们的底层结构如下：</p>
<p>type eface struct {      //空接口<br>    <em>type __type        //类型信息<br>    data  unsafe.Pointer //指向数据的指针(go 语言中特殊的指针类型 unsafe.Pointer 类似于 c 语言中的 void</em>)}<br>typeiface struct {      //带有方法的接口<br>    tab  <em>itab          //存储 type 信息还有结构实现方法的集合<br>    data unsafe.Pointer  //指向数据的指针(go 语言中特殊的指针类型 unsafe.Pointer 类似于 c 语言中的 void</em>)}<br>type_type struct {<br>    size       uintptr //类型大小<br>    ptrdata    uintptr //前缀持有所有指针的内存大小<br>    hash       uint32  //数据 hash 值<br>    tflag     tflag<br>    align      uint8   //对齐<br>    fieldalign uint8   //嵌入结构体时的对齐<br>    kind       uint8   //kind 有些枚举值 kind 等于 0 是无效的<br>    alg       *typeAlg //函数指针数组，类型实现的所有方法<br>    gcdata    *byte   str       nameOff<br>    ptrToThis typeOff<br>}type itab struct {<br>    inter  _interfacetype //接口类型</p>
<p>_type  __type         //结构类型<br>    link   *itab<br>    bad    int32<br>    inhash int32<br>    fun    [1]uintptr     //可变大小方法集合}</p>
<p>可以看出 iface 比 eface 中间多了一层 itab 结构。 itab 存储_type 信息和[]fun 方法集，从上面的结构我们就可得出，因为 data 指向了 nil 并不代表 interface 是 nil， 所以返回值并不为空，这里的 fun(方法集)定义了接口的接收规则，在编译的过程中需要验证是否实现接口 结果：</p>
<p>BBBBBBB 12.是否可以编译通过？如果通过，输出什么？</p>
<p>func main() {<br>    i := GetValue() switch i.(type) { <br>        caseint:       <br>        println(“int”)   <br>        casestring:       <br>        println(“string”)   <br>        caseinterface{}:       <br>        println(“interface”)   <br>        default:       <br>         println(“unknown”)<br>    }<br>}<br>funcGetValue()int {   <br>return1<br>}</p>
<p>解析<br>考点：type</p>
<p>编译失败，因为 type 只能使用在 interface</p>
<p>13.下面函数有什么问题？</p>
<p>func funcMui(x,y int)(sum int,error){    <br>returnx+y,nil<br>}</p>
<p>解析<br>考点：函数返回值命名<br>在函数有多个返回值时，只要有一个返回值有指定命名，其他的也必须有命名。 如果返回值有有多个返回值必须加上括号； 如果只有一个返回值并且有命名也需要加上括号； 此处函数第一个返回值有 sum 名称，第二个未命名，所以错误。</p>
<p>14.是否可以编译通过？如果通过，输出什么？</p>
<p>package mainfunc main() {    println(DeferFunc1(1)) println(DeferFunc2(1)) println(DeferFunc3(1))<br>}func DeferFunc1(i int)(t int) {<br>    t = i   deferfunc() {<br>        t += 3<br>    }() return t<br>}<br>funcDeferFunc2(i int)int {<br>    t := i  deferfunc() {<br>        t += 3<br>    }() return t<br>}<br>funcDeferFunc3(i int)(t int) {   deferfunc() {<br>        t += i<br>    }() return2}</p>
<p>解析<br>考点:defer 和函数返回值<br>需要明确一点是 defer 需要在函数结束前执行。 函数返回值名字会在函数起始处被初始化为对应类型的零值并且作用域为整个函数 DeferFunc1 有函数返回值 t 作用域为整个函数，在 return 之前 defer 会被执行，所以 t 会被修改，返回 4; DeferFunc2 函数中 t 的作用域为函数，返回 1;DeferFunc3 返回 3</p>
<p>15.是否可以编译通过？如果通过，输出什么？</p>
<p>funcmain() {    list := new([]int)<br>    list = append(list,1)<br>    fmt.Println(list)<br>}</p>
<p>解析<br>考点：new</p>
<p>list:=make([]int,0)</p>
<p>16.是否可以编译通过？如果通过，输出什么？</p>
<p>package mainimport “fmt”funcmain() {<br>    s1 := []int{1, 2, 3}<br>    s2 := []int{4, 5}<br>    s1 = append(s1,s2)<br>    fmt.Println(s1)<br>}</p>
<p>解析<br>考点：append<br>append 切片时候别漏了’…’</p>
<p>17.是否可以编译通过？如果通过，输出什么？</p>
<p>func main() {<br>    sn1 := struct {<br>        age  int<br>        name string<br>    }{age: 11,name: “qq”}<br>    sn2 := struct {<br>        age  int<br>        name string<br>    }{age: 11,name: “qq”}  if sn1== sn2 {<br>        fmt.Println(“sn1== sn2”)<br>    }<br>    sm1 := struct {<br>        age int<br>        m   map[string]string<br>    }{age: 11, m:map[string]string{“a”: “1”}}<br>    sm2 := struct {<br>        age int<br>        m   map[string]string<br>    }{age: 11, m:map[string]string{“a”: “1”}} <br>           if sm1 == sm2 {<br>        fmt.Println(“sm1== sm2”)<br>    }<br>}</p>
<p>解析<br>考点:结构体比较<br>进行结构体比较时候，只有相同类型的结构体才可以比较，结构体是否相同不但与属性类型个数有关，还与属性顺序相关。</p>
<p>sn3:= struct {<br>    name string<br>    age  int<br>}<br>{age:11,name:”qq”}</p>
<p>sn3 与 sn1 就不是相同的结构体了，不能比较。 还有一点需要注意的是结构体是相同的，但是结构体属性中有不可以比较的类型，如 map,slice。 如果该结构属性都是可以比较的，那么就可以使用“==”进行比较操作。</p>
<p>可以使用 reflect.DeepEqual 进行比较</p>
<p>if reflect.DeepEqual(sn1, sm) {<br>    fmt.Println(“sn1==sm”)<br>}else {<br>    fmt.Println(“sn1!=sm”)<br>}</p>
<p>所以编译不通过： invalid operation: sm1 == sm2</p>
<p>18.是否可以编译通过？如果通过，输出什么？</p>
<p>func Foo(x interface{}) {    if x== nil {<br>        fmt.Println(“emptyinterface”)      <br>          return<br>    }<br>    fmt.Println(“non-emptyinterface”)<br>}<br>       funcmain() {   <br>       var x *int = nil<br>    Foo(x)<br>}</p>
<p>解析<br>考点：interface 内部结构</p>
<p>non-emptyinterface</p>
<p>19.是否可以编译通过？如果通过，输出什么？</p>
<p>func GetValue(m map[int]string, id int)(string, bool) {    <br>         if _,exist := m[id]; exist {        <br>           return”存在数据”, true<br>    }  <br>         returnnil, false}funcmain() {<br>    intmap:=map[int]string{   <br>1:”a”,       <br>2:”bb”,       <br>3:”ccc”,<br>    }<br>    v,err:=GetValue(intmap,3)<br>    fmt.Println(v,err)<br>}</p>
<p>解析<br>考点：函数返回值类型<br>nil 可以用作 interface、function、pointer、map、slice 和 channel 的“空值”。但是如果不特别指定的话，Go 语言不能识别类型，所以会报错。报:cannot use nil as type string in return argument.</p>
<p>20.是否可以编译通过？如果通过，输出什么？</p>
<p>const (<br>    x = iota<br>    y<br>    z = “zz”<br>    k<br>    p = iota)<br>funcmain() <br>{<br>    fmt.Println(x,y,z,k,p)<br>}</p>
<p>解析<br>考点：iota<br>结果:</p>
<p>0 1 zz zz 4</p>
<p>21.编译执行下面代码会出现什么?</p>
<p>package mainvar(<br>    size :=1024<br>    max_size = size*2)<br>funcmain() {    <br>println(size,max_size)<br>}</p>
<p>解析<br>考点:变量简短模式<br>变量简短模式限制：</p>
<p>定义变量同时显式初始化<br>不能提供数据类型<br>只能在函数内部使用<br>结果：</p>
<p>syntaxerror: unexpected :=</p>
<p>22.下面函数有什么问题？</p>
<p>package main<br>const cl = 100<br>var bl   = 123<br>funcmain() {    <br>println(&amp;bl,bl)   <br>println(&amp;cl,cl)<br>}</p>
<p>解析<br>考点:常量<br>常量不同于变量的在运行期分配内存，常量通常会被编译器在预处理阶段直接展开，作为指令数据使用，</p>
<p>cannot take the address of cl</p>
<p>23.编译执行下面代码会出现什么?</p>
<p>package main<br>funcmain() {    <br>for i:=0;i&lt;10;i++  {<br>    loop:       <br>println(i)<br>    }    gotoloop<br>}</p>
<p>解析<br>考点：goto<br>goto 不能跳转到其他函数或者内层代码</p>
<p>goto loop jumps intoblock starting at</p>
<p>24.编译执行下面代码会出现什么?</p>
<p>package main<br>import”fmt”<br>funcmain() {    <br> typeMyInt1 int    <br> typeMyInt2 = int<br>    var i int =9<br>    var i1MyInt1 = i<br>    var i2MyInt2 = i<br>    fmt.Println(i1,i2)<br>}</p>
<p>解析<br>考点：**Go 1.9 新特性 Type Alias **<br>基于一个类型创建一个新类型，称之为 defintion；基于一个类型创建一个别名，称之为 alias。 MyInt1 为称之为 defintion，虽然底层类型为 int 类型，但是不能直接赋值，需要强转； MyInt2 称之为 alias，可以直接赋值。</p>
<p>结果:</p>
<p>cannot use i (typeint) astype MyInt1 in assignment</p>
<p>25.编译执行下面代码会出现什么?</p>
<p>package main<br>import”fmt”<br>typeUser struct {<br>}<br>typeMyUser1 User<br>typeMyUser2 = User<br>func(iMyUser1)m1(){<br>    fmt.Println(“MyUser1.m1”)<br>}<br>func(iUser)m2(){<br>    fmt.Println(“User.m2”)<br>}<br>funcmain() {<br>    var i1MyUser1<br>    var i2MyUser2<br>    i1.m1()<br>    i2.m2()<br>}</p>
<p>解析<br>考点：**Go 1.9 新特性 Type Alias **<br>因为 MyUser2 完全等价于 User，所以具有其所有的方法，并且其中一个新增了方法，另外一个也会有。 但是</p>
<p>i1.m2()</p>
<p>是不能执行的，因为 MyUser1 没有定义该方法。 结果:</p>
<p>MyUser1.m1User.m2</p>
<p>26.编译执行下面代码会出现什么?</p>
<p>package main<br>import”fmt”<br>type T1 struct {<br>}<br>func(tT1)m1(){<br>    fmt.Println(“T1.m1”)<br>}<br>type T2= T1<br>typeMyStruct struct {<br>    T1<br>    T2<br>}<br>funcmain() {<br>    my:=MyStruct{}<br>    my.m1()<br>}</p>
<p>解析<br>考点：**Go 1.9 新特性 Type Alias **<br>是不能正常编译的,异常：</p>
<p>ambiguousselectormy.m1</p>
<p>结果不限于方法，字段也也一样；也不限于 type alias，type defintion 也是一样的，只要有重复的方法、字段，就会有这种提示，因为不知道该选择哪个。 改为:</p>
<p>my.T1.m1()<br>my.T2.m1()</p>
<p>type alias 的定义，本质上是一样的类型，只是起了一个别名，源类型怎么用，别名类型也怎么用，保留源类型的所有方法、字段等。</p>
<p>27.编译执行下面代码会出现什么?</p>
<p>package main<br>import (   <br>       “errors”<br>    “fmt”)<br>varErrDidNotWork = errors.New(“did not work”)<br>funcDoTheThing(reallyDoItbool)(errerror) {    <br>ifreallyDoIt {<br>        result, err:= tryTheThing()        <br>if err!= nil || result != “it worked” {<br>           err = ErrDidNotWork<br>        }<br>    }    return err<br>}<br>functryTheThing()(string,error) {    <br>return””,ErrDidNotWork<br>}<br>funcmain() {<br>    fmt.Println(DoTheThing(true))<br>    fmt.Println(DoTheThing(false))<br>}</p>
<p>解析<br>考点：变量作用域<br>因为 if 语句块内的 err 变量会遮罩函数作用域内的 err 变量，结果：</p>
<p>改为：</p>
<p>func DoTheThing(reallyDoIt bool)(errerror) {    <br>varresult string<br>    ifreallyDoIt {<br>        result, err =tryTheThing()        <br>if err!= nil || result != “it worked” {<br>           err = ErrDidNotWork<br>        }<br>    }    return err<br>}</p>
<p>28.编译执行下面代码会出现什么?</p>
<p>package main<br>functest() []func() {    <br>varfuns []func()<br>    fori:=0;i&lt;2;i++  {<br>        funs = append(funs,func() {           <br>           println(&amp;i,i)<br>        })<br>    }    returnfuns<br>}<br>funcmain(){<br>    funs:=test()    <br>       for_,f:=range funs{<br>        f()<br>    }<br>}</p>
<p>解析<br>考点：闭包延迟求值<br>for 循环复用局部变量 i，每一次放入匿名函数的应用都是想一个变量。 结果：</p>
<p>0xc042046000 2<br>0xc042046000 2</p>
<p>如果想不一样可以改为：</p>
<p>func test() []func()  {    <br>varfuns []func()<br>    fori:=0;i&lt;2;i++  {<br>        x:=i<br>        funs = append(funs,func() {           <br>println(&amp;x,x)<br>        })<br>    }    returnfuns<br>}</p>
<p>29.编译执行下面代码会出现什么?</p>
<p>package main<br>functest(x int)(func(),func()) {    <br>returnfunc() {       <br>println(x)<br>    x+=10<br>    }, func() {       <br>      println(x)<br>    }<br>}<br>funcmain() {<br>    a,b:=test(100)<br>    a()<br>    b()<br>}</p>
<p>解析<br>考点：闭包引用相同变量*<br>结果：</p>
<p>100<br>110</p>
<ol start="30">
<li>编译执行下面代码会出现什么?</li>
</ol>
<p>package main<br>import (   “fmt”<br>    “reflect”)<br>funcmain1() {    <br>deferfunc() {     <br>iferr:=recover();err!=nil{<br>          fmt.Println(err)<br>       }else {<br>          fmt.Println(“fatal”)<br>       }<br>    }()    <br>deferfunc() {       <br>panic(“deferpanic”)<br>    }()    <br>panic(“panic”)<br>}<br>funcmain() {    <br>deferfunc() {       <br>iferr:=recover();err!=nil{<br>           fmt.Println(“++++”)<br>           f:=err.(func()string)            <br>fmt.Println(err,f(),reflect.TypeOf(err).Kind().String())<br>        }else {<br>           fmt.Println(“fatal”)<br>        }<br>    }()    <br>deferfunc() {       <br>panic(func()string {           <br>return “defer panic”<br>        })<br>    }()    <br>panic(“panic”)<br>}</p>
<p>解析<br>考点：panic 仅有最后一个可以被 revover 捕获<br>触发 panic(“panic”)后顺序执行 defer，但是 defer 中还有一个 panic，所以覆盖了之前的 panic(“panic”)</p>
<p>————————————————<br>版权声明：本文为 CSDN 博主「尹成」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/itcastcpp/java/article/details/80462619">https://blog.csdn.net/itcastcpp/java/article/details/80462619</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/18/yuque/go%20%E9%9D%A2%E8%AF%95%E9%A2%98/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/系统设计" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">系统设计</a>
    </h1>
  

        
        <a href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="archive-article-date">
  	<time datetime="2020-05-18T10:49:07.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>对于技术来说，每一个系统都少不了最重要的一个环节，系统设计。<br>系统设计的成功与否直接决定了后续的系统开发能否成功。<br>这次的分享，我们将系统设计的方法简化为三板斧，简单易懂，居家旅行学习进修必备。<br><strong>三包承诺：包记住，包理解，包会用。如有问题，请再看一遍。如想快速浏览，可以先看总论</strong></p>
<h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><ul>
<li>1 系统设计的基本流程</li>
<li>2 三板斧的招式</li>
<li>3 实例讲解，权限系统设计</li>
<li>4 总结</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956326-9ee7312e-d443-4be9-b86d-93168f7ca37f.jpeg#align=left&display=inline&height=244&margin=%5Bobject%20Object%5D&originHeight=244&originWidth=326&size=0&status=done&style=none&width=326"></p>
<h2 id="什么是系统设计"><a href="#什么是系统设计" class="headerlink" title="什么是系统设计"></a>什么是系统设计</h2><p>The process of <strong>defining</strong> the 　　　　　　　　　 　 定义（产出）<br><strong>architecture</strong>, 　　　　　　　　　　　　　　　　　架构<br><strong>components</strong>, 　　　　　　　　　　　　　　　　　组件<br><strong>modules</strong>, 　　　　　　　　　　　　　　　　　　　模块<br><strong>interfaces</strong>, 　　　　　　　　　　　　　　　　　　接口<br>and <strong>data</strong> 　　　　　　　　　　　　　　　　　　　数据<br>for a system to satisfy specified <strong>requirements</strong>. 　　需求（目标）</p>
<h2 id="1-系统设计的基本流程"><a href="#1-系统设计的基本流程" class="headerlink" title="1 系统设计的基本流程"></a>1 系统设计的基本流程</h2><h3 id="1-1-软件开发流程"><a href="#1-1-软件开发流程" class="headerlink" title="1.1 软件开发流程"></a>1.1 软件开发流程</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956235-bb06d7f8-2bc9-4bef-bba7-a4340e37ff50.jpeg#align=left&display=inline&height=419&margin=%5Bobject%20Object%5D&originHeight=419&originWidth=638&size=0&status=done&style=none&width=638"></p>
<ul>
<li>1 需求分析</li>
<li>2 <strong>概要设计</strong></li>
<li>3 <strong>详细设计</strong></li>
<li>4 系统开发</li>
<li>5 系统测试</li>
<li>6 软件交付</li>
</ul>
<p>软件开发流程，详细内容可以参考： <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B">https://baike.baidu.com/item/软件开发流程</a></p>
<p>需求分析就是一个很专业的工作，对于大型的软件开发，也有专门的需求分析师，所以这里面的方法和流程也还有很多细分的内容，有兴趣的同学可以继续挖掘。</p>
<p>系统设计主要就是 2、3 两部分，大学毕业设计的时候，应该也都有深刻的印象，自己的文档是怎么写出来，怎么组织和编排的吧。</p>
<h3 id="1-2-系统设计的流程"><a href="#1-2-系统设计的流程" class="headerlink" title="1.2 系统设计的流程"></a>1.2 系统设计的流程</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956212-d3e9b6ee-03a7-4137-8870-abafcdbd7f97.jpeg#align=left&display=inline&height=351&margin=%5Bobject%20Object%5D&originHeight=351&originWidth=952&size=0&status=done&style=none&width=952"><br>系统设计的内容可以用 16 或者 32 课时来专门开一课，大学时候应该也有这样的课，可能是选修吧。<br>详细内容可以参考： 从 0 到 1 教你设计业务系统 <a target="_blank" rel="noopener" href="https://36kr.com/p/5105245">https://36kr.com/p/5105245</a></p>
<h3 id="1-3-总结，系统设计的基本流程"><a href="#1-3-总结，系统设计的基本流程" class="headerlink" title="1.3 总结，系统设计的基本流程"></a>1.3 总结，系统设计的基本流程</h3><p>上面的软件开发流程和系统设计流程，看着就很复杂，分工很细，要完全遵守这些方法来做互联网产品开发的话，很多人是无法想象的，2 周上线，1 天 1 个版本？<br>所以，上面的流程都是来自传统的企业软件开发方法。而传统软件的开发周期，最少也是半年、一年的周期，交付物也都会比较严格，也不会有持续迭代一说。<br>传统企业软件开发，有很多是外包公司，规模很大，类似富士康的工厂。而规模的基础就需要标准化，遵守各种认证体系的要求，这样也更能被企业认可和信任。<br>但是，这些流程、方法，对于我们互联网研发就很不合适，系统设计也是。所以，才有了本文的核心方法。</p>
<h2 id="2-三板斧的招式"><a href="#2-三板斧的招式" class="headerlink" title="2 三板斧的招式"></a>2 三板斧的招式</h2><h3 id="2-1-第一招：抽象，万物归一"><a href="#2-1-第一招：抽象，万物归一" class="headerlink" title="2.1 第一招：抽象，万物归一"></a>2.1 第一招：抽象，万物归一</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956214-e3ec2ac7-2271-41df-a6f6-39e0921854b8.jpeg#align=left&display=inline&height=261&margin=%5Bobject%20Object%5D&originHeight=261&originWidth=500&size=0&status=done&style=none&width=500"></p>
<ul>
<li>1 人，主体对象</li>
</ul>
<p>实体模型，数据结构</p>
<ul>
<li>2 事，核心功能</li>
</ul>
<p>组件模块，功能需求</p>
<ul>
<li>3 物，资源要求</li>
</ul>
<p>系统规模，开发周期，架构设计</p>
<p>宏观上的面，提炼和定义，不拘泥细节。<br>从繁杂的系统中剥离、提炼，抽象出来我们系统的核心，定义好系统的人、事、物，也就有了系统的大致样貌。<br><strong>抽象，这是最重要的一步，也是最厉害的一招。</strong></p>
<h3 id="2-2-第二招：具象，有血有肉"><a href="#2-2-第二招：具象，有血有肉" class="headerlink" title="2.2 第二招：具象，有血有肉"></a>2.2 第二招：具象，有血有肉</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956220-5f62a64e-c7a3-47d4-bbca-739ee5d11f48.jpeg#align=left&display=inline&height=266&margin=%5Bobject%20Object%5D&originHeight=266&originWidth=479&size=0&status=done&style=none&width=479"></p>
<ul>
<li>1 数据结构设计</li>
</ul>
<p>对象的属性，数据表</p>
<ul>
<li>2 业务功能设计</li>
</ul>
<p>功能模块，任务清单</p>
<ul>
<li>3 系统架构设计</li>
</ul>
<p>性能、并发、伸缩、扩展、安全</p>
<p>微观实现的点，为后续的编码扫平模糊。<br>系统设计在这一招完成后，基本上就要全面完工了，交付给开发来编码。如果这时候还有不清晰的地方，还有遗留的点，那么后续就会出现很严重的需求变更、技术变更、甚至重构，会严重影响项目开发的周期和质量。<br><strong>具象，这是需要细致且耐心的一步，也是势大力沉的一招。</strong></p>
<h3 id="2-3-第三招：演算，活灵活现"><a href="#2-3-第三招：演算，活灵活现" class="headerlink" title="2.3 第三招：演算，活灵活现"></a>2.3 第三招：演算，活灵活现</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956246-40e7f983-d7d4-4658-bac3-d1f49f3c9727.jpeg#align=left&display=inline&height=275&margin=%5Bobject%20Object%5D&originHeight=275&originWidth=462&size=0&status=done&style=none&width=462"></p>
<ul>
<li>1 业务流程</li>
</ul>
<p>让功能细节发生互动（业务恋爱）</p>
<ul>
<li>2 数据流程</li>
</ul>
<p>让对象之间发生关系（数据怀孕）</p>
<ul>
<li>3 模拟操作与系统预估</li>
</ul>
<p>模拟的运转和系统压力评估（成长烦恼）</p>
<p>流程不通，操作不顺，系统瓶颈，及早发现和补充完善。<br>纯脑力运算的过程，可能是设计者来做，也可能是要系统相关人一起来做。<br>这里用时 2 小时或者一起开个会，把系统设计的方方面面都模拟的运转起来，各个环节，各个角色带入进来，发现问题马上调整前面的抽象和具象的设计。<br>演算是一个快速查缺补漏的环节，也是对系统设计进行方案优化、调整的最后环节，这里投入的每一分钟都是十倍百倍于后续研发阶段的调整时间效率。<br><strong>演算，这是最容易忽略的一步，也是最难的一招。</strong></p>
<h3 id="2-4-总结，系统设计的三板斧"><a href="#2-4-总结，系统设计的三板斧" class="headerlink" title="2.4 总结，系统设计的三板斧"></a>2.4 总结，系统设计的三板斧</h3><p>围绕系统设计中的人、事、物，我们通过宏观层面的抽象，提炼和定义出来核心内容，在通过微观层面的具象，把各个细节补充完善，最后，运用演算，让这个系统在我们的脑子里面活起来，重复这三板斧，完善我们的系统设计。</p>
<h2 id="3-实例讲解，权限系统设计"><a href="#3-实例讲解，权限系统设计" class="headerlink" title="3 实例讲解，权限系统设计"></a>3 实例讲解，权限系统设计</h2><p>介绍：权限系统管理着应用和服务之间的调用关系。应用要调用服务的接口，必须先申请对应的服务接口权限才可以。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956241-cedbc9dd-3aea-4e45-9257-a7491088b716.jpeg#align=left&display=inline&height=264&margin=%5Bobject%20Object%5D&originHeight=264&originWidth=332&size=0&status=done&style=none&width=332"></p>
<h3 id="3-1-1-抽象：权限系统的核心对象（主体）"><a href="#3-1-1-抽象：权限系统的核心对象（主体）" class="headerlink" title="3.1.1 抽象：权限系统的核心对象（主体）"></a>3.1.1 抽象：权限系统的核心对象（主体）</h3><ul>
<li>1 主要对象</li>
</ul>
<p>应用，服务</p>
<ul>
<li>2 派生对象</li>
</ul>
<p>接口，应用请求服务</p>
<p>权限，接口权限</p>
<ul>
<li>3 外部对象</li>
</ul>
<p>网关，系统平台，第三方服务等</p>
<p>提炼权限系统内部的主体对象，确定系统的数据模型。</p>
<h3 id="3-1-2-抽象：权限系统的核心功能（硬性）"><a href="#3-1-2-抽象：权限系统的核心功能（硬性）" class="headerlink" title="3.1.2 抽象：权限系统的核心功能（硬性）"></a>3.1.2 抽象：权限系统的核心功能（硬性）</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956232-bf5c86f1-debe-4bc7-8619-5211986311fb.jpeg#align=left&display=inline&height=410&margin=%5Bobject%20Object%5D&originHeight=410&originWidth=372&size=0&status=done&style=none&width=372"></p>
<ul>
<li>1 权限相关功能</li>
</ul>
<p>应用端申请，服务端审批，查询</p>
<ul>
<li>2 后台管理功能</li>
</ul>
<p>服务信息和扩展权限的配置</p>
<ul>
<li>3 扩展功能</li>
</ul>
<p>消息通知，权限推送</p>
<p>定义必须的应用的全后端功能，扩展的与外部系统的交互功能。</p>
<h3 id="3-1-3-抽象：权限系统的资源要求（软性）"><a href="#3-1-3-抽象：权限系统的资源要求（软性）" class="headerlink" title="3.1.3 抽象：权限系统的资源要求（软性）"></a>3.1.3 抽象：权限系统的资源要求（软性）</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956211-782b9043-98d7-41c7-b5e1-c9c7b5627444.jpeg#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&originHeight=435&originWidth=298&size=0&status=done&style=none&width=298"></p>
<ul>
<li>1 权限的管理系统，不涉及权限验证</li>
</ul>
<p>系统并发量很有限，性能要求低</p>
<ul>
<li>2 平台内应用、服务的权限依赖度高</li>
</ul>
<p>系统的安全和稳定性高</p>
<ul>
<li>3 内部和外部服务的权限定义差别大</li>
</ul>
<p>扩展性要求高</p>
<p>系统的架构设计不必过于复杂，保证应用程序的安全和稳定性，定义好系统的可扩展性。</p>
<h3 id="3-2-1-具象：权限系统的数据结构"><a href="#3-2-1-具象：权限系统的数据结构" class="headerlink" title="3.2.1 具象：权限系统的数据结构"></a>3.2.1 具象：权限系统的数据结构</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956230-ac9cdc85-12ce-41e4-a135-0ab71d15eb1a.jpeg#align=left&display=inline&height=453&margin=%5Bobject%20Object%5D&originHeight=453&originWidth=500&size=0&status=done&style=none&width=500"></p>
<ul>
<li>1 申请记录表 tb_privilege</li>
</ul>
<p>应用相关</p>
<p>服务相关</p>
<p>接口相关</p>
<p>申请相关</p>
<p>审批相关</p>
<p>标准字段</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956250-800d6067-0fbf-4cba-b491-1e5cb45cfa11.jpeg#align=left&display=inline&height=411&margin=%5Bobject%20Object%5D&originHeight=411&originWidth=577&size=0&status=done&style=none&width=577"></p>
<ul>
<li>2 服务配置表 tb_paas</li>
</ul>
<p>服务信息</p>
<p>推送相关</p>
<p>外部相关</p>
<p>扩展相关</p>
<p>标准字段</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956248-8ded5322-4c83-4a9f-8731-80b46f173733.jpeg#align=left&display=inline&height=311&margin=%5Bobject%20Object%5D&originHeight=311&originWidth=684&size=0&status=done&style=none&width=684"></p>
<ul>
<li>3 操作日志表 tb_log</li>
</ul>
<p>数据模型</p>
<p>新旧数据</p>
<p>标准字段</p>
<h3 id="3-2-2-具象：权限系统的业务功能"><a href="#3-2-2-具象：权限系统的业务功能" class="headerlink" title="3.2.2 具象：权限系统的业务功能"></a>3.2.2 具象：权限系统的业务功能</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/190217/1589798956295-7d950b7d-f588-4038-9c39-a580b5f2dff4.png#align=left&display=inline&height=1334&margin=%5Bobject%20Object%5D&originHeight=1334&originWidth=2148&size=0&status=done&style=none&width=2148"><br>细化每一个功能的处理过程，要结合交互页面，操作流程，数据输入和产出等。</p>
<h3 id="3-2-3-具象：权限系统的系统架构"><a href="#3-2-3-具象：权限系统的系统架构" class="headerlink" title="3.2.3 具象：权限系统的系统架构"></a>3.2.3 具象：权限系统的系统架构</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956232-c87fc415-1440-4123-834d-997e87e2e5db.jpeg#align=left&display=inline&height=540&margin=%5Bobject%20Object%5D&originHeight=540&originWidth=378&size=0&status=done&style=none&width=378"></p>
<ul>
<li>1 分层模型，前后端分离</li>
</ul>
<p>前端展现和交互，后端数据和逻辑，前后端耦合度低</p>
<ul>
<li>2 服务的权限订阅和推送，预留第三方服务和扩展权限</li>
</ul>
<p>定制化多端推送，扩展能力强</p>
<ul>
<li>3 多机分布式，定时任务更新权限和通知</li>
</ul>
<p>资源伸缩性强</p>
<p><strong>架构演化：</strong>单机 -&gt; 分布式，单库 -&gt; 主从库 -&gt; 缓存层 -&gt; 数据分拆（水平、垂直） -&gt; 应用分拆（微服务）</p>
<p>架构选择，只有合适与否，没有好坏之分。</p>
<h3 id="3-3-演算：数据流程、业务流程和交互模拟"><a href="#3-3-演算：数据流程、业务流程和交互模拟" class="headerlink" title="3.3 演算：数据流程、业务流程和交互模拟"></a>3.3 演算：数据流程、业务流程和交互模拟</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956254-d644e927-9769-4710-892d-dea89c47b5f8.jpeg#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&originHeight=221&originWidth=735&size=0&status=done&style=none&width=735"></p>
<ul>
<li>1 权限申请流程</li>
</ul>
<p>方便查找服务，方便申请接口权限</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956238-fd21bd6d-7a80-468e-95e8-da04c5d06253.jpeg#align=left&display=inline&height=316&margin=%5Bobject%20Object%5D&originHeight=316&originWidth=640&size=0&status=done&style=none&width=640"></p>
<ul>
<li>2 权限审批流程</li>
</ul>
<p>方便查找服务，方便申请接口权限</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956262-129bd7ed-c3e6-4fe3-8e28-e18e10a00a00.jpeg#align=left&display=inline&height=369&margin=%5Bobject%20Object%5D&originHeight=369&originWidth=660&size=0&status=done&style=none&width=660"></p>
<ul>
<li>3 接口权限申请的状态变更</li>
</ul>
<p>申请、审批和推送、通知，把开发者、服务方、网关、服务都串联起来</p>
<p>流程，让整个系统运转起来，是一个活的系统，不再是冷冰冰的数据结构和系统框架。</p>
<p>考虑开发者和服务方的用户，带入用户的立场和操作，更好地模拟整个系统的交互体验。</p>
<h3 id="3-4-总结，实例讲解，权限系统设计"><a href="#3-4-总结，实例讲解，权限系统设计" class="headerlink" title="3.4 总结，实例讲解，权限系统设计"></a>3.4 总结，实例讲解，权限系统设计</h3><p>这里的实例比较简单，但毕竟是最近设计开发的一个系统。<br>而对于更加复杂的系统，方法还是互通的。<br>定义好，写下来，画下来，这就是一个系统设计和项目文档。<br>当然系统设计不仅仅是上面呈现出来的内容，还有关于接口，任务清单等内容。</p>
<h2 id="4-总结，系统设计的三板斧"><a href="#4-总结，系统设计的三板斧" class="headerlink" title="4 总结，系统设计的三板斧"></a>4 总结，系统设计的三板斧</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798956288-a836eaac-5b26-4883-8292-b17ab31a9eb7.jpeg#align=left&display=inline&height=385&margin=%5Bobject%20Object%5D&originHeight=385&originWidth=535&size=0&status=done&style=none&width=535"><br><strong>一句话形容，从宏观到微观，互动更长久。</strong><br><strong>抽象</strong>，先从宏观层面做好抽象；<br><strong>具象</strong>，再从微观层面补充完善细节；<br><strong>演算</strong>，全流程的模拟，查缺补漏；<br>重复上述三板斧，不断完善系统设计。<br>注意：不用纠结未知和差异化太大的部分。<br>系统设计的三板斧，相信不仅仅可以用在系统设计中，在其他的很多方面应该也是类似，比如：写作。<br>主题 -&gt; 目标<br>创意 -&gt; 抽象（人、事、物）<br>细节 -&gt; 具象（有血有肉）<br>故事 -&gt; 演算（活灵活现）<br><strong>在最后，强调一遍，抽象和推理是数学的重要能力，数学绝对是极其重要的学科，掌握好数学，能够更好地掌握科学方法，而不仅仅只有个人的经验和直觉。</strong></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/系统架构升级知道" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%8D%87%E7%BA%A7%E7%9F%A5%E9%81%93/">系统架构升级知道</a>
    </h1>
  

        
        <a href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%8D%87%E7%BA%A7%E7%9F%A5%E9%81%93/" class="archive-article-date">
  	<time datetime="2020-05-18T10:40:07.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414354-308fad5c-6900-476e-b80d-2c4d1fd5f45e.jpeg#align=left&display=inline&height=473&margin=%5Bobject%20Object%5D&originHeight=473&originWidth=316&size=0&status=done&style=none&width=316"><br>【数据库】<br>一个典型的互联网应用，前端服务器可以利用负载均衡服务，组成一个集群，但是只有一个 mysql 主库，这时候，mysql 服务就是系统中依赖的关键服务。<br>关键服务的性能和波动将成为整个系统的性能瓶颈和主要问题源。<br>为了减轻只有一个 mysql 主库的依赖，我们引入了一主多从的架构，让更多从库也来提供查询服务，减轻主库的查询依赖。<br>这样升级改造后，系统的性能和稳定性还是有明显的提升，但是 mysql 查询的复杂度和数量增加后，mysql 的性能瓶颈依然会很突出。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414343-2377a7d0-cfe6-4faf-8edc-92af24c08513.jpeg#align=left&display=inline&height=460&margin=%5Bobject%20Object%5D&originHeight=460&originWidth=358&size=0&status=done&style=none&width=358"><br>【缓存层】<br>于是，继续升级，引入 redis 或者 memcache，将大量的结果缓存起来，把应用尽量从 mysql 隔离，减少对数据库的依赖。<br>这时候，我们会欣喜的发现，应用的性能比之前完全依赖 mysql 的时候要强好多，稳定性也响应的提高很多。<br>随着我们的系统越来越复杂，访问量越来越大，缓存层的压力也会越来越大。<br>一方面是内存不足的问题，另一方面数据更新更复杂，还有就是访问压力以及内网带宽的瓶颈也增加了。<br>这时候又要开始对缓存层继续升级改造了，于是分布式缓存集群也就出现了。<br>通过一致性 hash 算法或者简单的散列方法，都可以很容易的增加 redis/memcache 服务来构建更大规模的集群。<br>这样一来，随着服务器增加，单机的内存瓶颈减轻了，访问压力以及带宽压力也降低了，但是数据更新的问题依然存在。<br>数据更新的问题，就是数据不一致的问题，本质上就是因为一个数据的多次写入，中间出现异常的话，就导致出现不一致了。<br>关于数据一致性问题，我们后面再来详细分析和讲解。<br>随着缓存层集群的构建，整个系统架构就变成了多前端服务器，多缓存服务器，一个主库，多个从库。<br>主库主要承载数据写入的负载，在大部分的互联网应用中，写入的数量相对还是少很多的，所以大部分时候，这样的架构也就可以安枕无忧啦。<br>【更大规模】<br>我们的追求不仅是眼前的苟且，还有更强大的系统和更多的用户。<br>当我们的应用，用户数、访问量过千万之后，以前的架构还是会遇到越来越多的挑战。<br>这里面，可能数据库还是会第一个出现瓶颈，毕竟一个主库，再强大也是没法做到一秒钟数万次的更新，哪怕只是小小的点击数的增加。<br>这时候，就要开始考虑对数据库做分拆了，把一个数据库分拆为好几个数据库（分表分库）。<br>而分拆的方式，大家应该能想到的，比如：水平分拆和垂直分拆。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414227-1f805639-3f99-4348-ba3c-cebf9a67a41b.jpeg#align=left&display=inline&height=465&margin=%5Bobject%20Object%5D&originHeight=465&originWidth=504&size=0&status=done&style=none&width=504"><br>【水平分拆】<br>典型的水平分拆就是对数据做归档，按照日期（每年归档），把旧的数据迁移到归档库里面，访问量少，也不会有写入的压力。<br>水平分拆对整个系统的改造和变化相对来说是影响比较小的，毕竟数据结构没有变化，只是数据源增加了。<br>而这种分拆带来的明显效果就是，数据规模减少，数据库的读写性能都会有明显的提升，当然对整个应用的性能和稳定性都会有很大提高。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414337-bac0cd3d-6ef6-4877-a563-23baad189881.jpeg#align=left&display=inline&height=485&margin=%5Bobject%20Object%5D&originHeight=485&originWidth=750&size=0&status=done&style=none&width=750"><br>【垂直分拆】<br>如果只是对数据库做垂直分拆，只是把一部分数据表迁移到其他独立数据库中，比如：把用户相关的信息表迁移到用户库，把商品相关的产品表迁移到商品库，那这个分拆也不算难。<br>但是，往往伴随着系统规模的变大，应用的复杂度也会不断提高。<br>所以，这个时候垂直分拆，很可能会同时进行应用的分拆。<br>比如：把用户的登录注册、信息维护单独部署和维护，把商品信息的管理和维护单独部署。<br>这时候，应用也就同时进行了垂直分拆，即：把大的应用进行组件化、服务化。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414260-0721e9c1-1109-4b4c-a727-b0e4adac479f.jpeg#align=left&display=inline&height=353&margin=%5Bobject%20Object%5D&originHeight=353&originWidth=550&size=0&status=done&style=none&width=550"><br>【微服务】<br>到这个阶段，大家应该就开始感觉大一个系统的复杂了吧。<br>一开始说好的做一个互联网应用，而现在却出来了很多个应用和服务，他们之间又有很多关联，组成一个大型的系统。<br>这时候，系统中的关键服务依赖已经不仅仅是缓存层、数据库服务，而变成了一个个拆分之后的应用、微服务了。<br>这时候，系统的性能和稳定性就完全依赖各个微服务的性能和稳定性了。<br>如果，再把每个微服务按照上面的架构升级路线演练一遍，貌似又不那么困难。<br>但是，全部组合在一起，新的难点已经是对这些服务的监控、运维、故障排除等治理工作。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589798414363-9fdc8433-f5f1-4b40-baef-713473865cb2.jpeg#align=left&display=inline&height=612&margin=%5Bobject%20Object%5D&originHeight=612&originWidth=749&size=0&status=done&style=none&width=749"><br>【畅想未来】<br>那么，系统继续升级的话，我想，可能就是自动化运维的工作会更多了吧。<br>一两个数据库宕机不用怕，主从自动切换，数据库集群秒级自动恢复。<br>几个缓存服务器网络不稳定也没关系，有备份的缓存可以先用着。<br>微服务的一些服务器不稳定，服务自动降级，并且在微服务稳定后自动恢复以及同步数据。<br>甚至一个机房断网、断电了，其他机房依然正常的提供全面的服务，不影响用户使用。<br>【总结】<br>关键服务依赖总是最重要的环节，也是最容易出问题的地方。<br>系统架构升级，正是对这些关键依赖的瓶颈进行针对性优化升级和改造。<br>应用从小变大，再分拆变小，从一个应用到很多个微服务，这些都是技术不断变革的过程。<br>规模化带来了带来了的总体容量和总体性能的提高，同时也带来了关于服务治理的新挑战。<br>那么，是不是开发系统都要用这么复杂的架构呢？<br>其实不是，上面的架构升级过程，其实是对线上问题不断发现和解决的过程，也是一个不得已的过程。如果一个系统的用户量、业务量不大，一开始就复用一套庞大的系统架构，那真的就费时费力，累死自己，完全没必要。所以，合适就好。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/18/yuque/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%8D%87%E7%BA%A7%E7%9F%A5%E9%81%93/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/高性能程序设计，缓存为王" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/18/yuque/%E9%AB%98%E6%80%A7%E8%83%BD%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%8C%E7%BC%93%E5%AD%98%E4%B8%BA%E7%8E%8B/">高性能程序设计，缓存为王</a>
    </h1>
  

        
        <a href="/2020/05/18/yuque/%E9%AB%98%E6%80%A7%E8%83%BD%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%8C%E7%BC%93%E5%AD%98%E4%B8%BA%E7%8E%8B/" class="archive-article-date">
  	<time datetime="2020-05-18T10:04:40.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>我们在程序设计时，有一个极其重要的非功能性指标：性能，总是无时无刻不缠绕在程序员的脑海，尤其是我们开发的面向大众的 Web 服务，网络接口等程序。<br>高性能的程序可以使用更少的服务器资源提供同样规模的用户请求（成本低），也可以更快的响应用户请求（体验好）。<br>当然，高性能的程序设计也会更加复杂，开发也有更大难度。<br>这次的内容，我们面向高性能程序设计方向，来讲一讲其中最核心最重要的缓存。<br>希望能够帮助大家更好的理解缓存为王的含义，也能更好的利用缓存，设计出高性能的程序。</p>
<h2 id="大纲："><a href="#大纲：" class="headerlink" title="大纲："></a>大纲：</h2><ul>
<li>1 高性能程序与时间、空间的关系</li>
<li>2 无处不在的缓存，硬件与软件</li>
<li>3 系统中的缓存设计</li>
<li>4 总结，缓存为王</li>
</ul>
<h2 id="0-找找看，人体中的缓存、缓冲区"><a href="#0-找找看，人体中的缓存、缓冲区" class="headerlink" title="0 找找看，人体中的缓存、缓冲区"></a>0 找找看，人体中的缓存、缓冲区</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410006-d4e2f597-084c-4f3d-a421-c4f3de4b34e6.jpeg#align=left&display=inline&height=540&margin=%5Bobject%20Object%5D&originHeight=540&originWidth=402&size=0&status=done&style=none&width=402"><br><strong>头</strong></p>
<ul>
<li>大脑的短时记忆和长期记忆，外部持久存储的书籍</li>
<li>短期、长期记忆，比临时查阅书籍更快、更灵活</li>
<li>计算机有非常强大的存储、检索和运算能力，可以作为大脑非常好的补充</li>
</ul>
<p><strong>颈椎</strong></p>
<ul>
<li>上接头部，下衔接胸椎，承上启下，多节</li>
<li>头部与胸部的衔接，保证灵活性</li>
<li>颈椎病、腰间盘突出，问题是类似的，长期保持同一个姿势造成无法修复的劳损</li>
<li>建议多做以下动作：上九天揽月，下五洋捉鳖，简化后就是“抬头，转体”</li>
</ul>
<p><strong>胸腹</strong></p>
<ul>
<li>大量的冗余空间，孕妇和胖子的潜力</li>
<li>更大的冗余区，更好地支持生育和度过饥荒</li>
<li>可惜，时代变了，审美变了，这倒是成了缺点</li>
</ul>
<p><strong>关节</strong></p>
<ul>
<li>软骨、关节腔，避免骨头硬碰硬和磨损</li>
<li>提供了足够的灵活性，减少冲击和磨损</li>
<li>既要硬，又要灵活，还要做杠杆运动，真是难为了关节</li>
</ul>
<p><strong>脚</strong></p>
<ul>
<li>减震</li>
<li>扁平足，失去了减震和缓冲</li>
<li>NBA 球星麦迪就是扁平足，而且他的技术动作不合理，所以一直受伤病困扰</li>
</ul>
<h2 id="1-高性能程序与时间、空间的关系"><a href="#1-高性能程序与时间、空间的关系" class="headerlink" title="1 高性能程序与时间、空间的关系"></a>1 高性能程序与时间、空间的关系</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796409998-c49c2b95-0e55-4620-928e-6347ec01e759.jpeg#align=left&display=inline&height=528&margin=%5Bobject%20Object%5D&originHeight=528&originWidth=1812&size=0&status=done&style=none&width=1812"><br>哪种地铁闸机，占用空间小、过关快、体验好、可靠性好、安全性好？还有更多类型的闸机可以比较的。</p>
<h3 id="1-1-性能，速度与时间"><a href="#1-1-性能，速度与时间" class="headerlink" title="1.1 性能，速度与时间"></a>1.1 性能，速度与时间</h3><ul>
<li>吞吐率：单位时间内处理的请求数</li>
<li>吞吐量：对网络、设备、端口、虚电路或其他设施，单位时间内成功地传送数据的数量</li>
<li>TPS：每秒钟系统能够处理事务或交易的数量</li>
<li>性能=速度=数量/时间，单位时间内处理的数量越多，性能越好</li>
</ul>
<p>关注程序性能，首先要关注<strong>单次请求的执行时间</strong>，10ms 的等待时长肯定是要比 100ms 的执行时间要更好。然后就是在压力测试下（并发&amp;集群），我们会关注上面的吞吐率、吞吐量、TPS 这些关键指标。</p>
<h3 id="1-2-系统性能预估"><a href="#1-2-系统性能预估" class="headerlink" title="1.2 系统性能预估"></a>1.2 系统性能预估</h3><p><strong>CPU 密集型，如：数据排序</strong><br>假设：单次请求耗时 Tms，服务器 CPU 数量 C 核，集群的服务器数量 S 台<br>QPS=1000/T_C_S (公式是理想状态，单机、分布式并发中无共享无状态)<br><strong>IO 密集型，如：依赖大量网络 API/数据库/文件（IO 耗时）</strong><br>假设：单次请求耗时 Tms，服务器 CPU 数量 C 核，集群的服务器数量 S 台，IO 耗时 1/2Tms<br>QPS=1000/(T-1/2T)_C_S(理想状态下，API 不是瓶颈)<br><strong>服务线程数量预估</strong><br>CPU 密集型，线程数量与 CPU 数量一致（redis）<br>IO 密集型，要考虑 IO 的开销，适当放大线程数量，如：1/2 时间在 IO 中，那么线程数量可以是 CPU 的 2 倍(Java Web 的线程数，PHP-fpm 的进程数)<br>增加 CPU 数量，涉及到并发编程。<br>增加服务器数量，涉及到分布式系统设计。<br>所以，提高系统性能，还需要提高并发编程的能力，提高分布式系统设计的能力。</p>
<h3 id="1-3-降低单次请求执行时间"><a href="#1-3-降低单次请求执行时间" class="headerlink" title="1.3 降低单次请求执行时间"></a>1.3 降低单次请求执行时间</h3><p><strong>减少 CPU 运算量</strong><br>简化运算逻辑，优化算法（少循环，少编解码等）<br>简化数据结构，降低时间复杂度，减少内存复制<br><strong>减少 IO 耗时</strong><br>减少 API/数据库/文件的依赖<br>优化 API/数据库/文件的性能<br><strong>利用缓存</strong><br>缓存复杂运算后的结果<br>缓存 IO 的返回值<br><strong>最好的优化手段就是砍需求，没有代码就有最好的性能。</strong></p>
<h3 id="1-4-缓存，空间换时间"><a href="#1-4-缓存，空间换时间" class="headerlink" title="1.4 缓存，空间换时间"></a>1.4 缓存，空间换时间</h3><p><strong>增加的缓存空间</strong><br>缓存 IO 返回值<br>缓存运算结果<br>缓存 IO 返回值以及运算结果<br><strong>增加的处理逻辑</strong><br>缓存数据的读取和验证<br>数据更新到缓存<br><strong>减少的处理时间</strong><br>减少 IO 耗时<br>减少大量的 CPU 运算<br><strong>离 CPU 越近的数据，处理越快；减少的处理逻辑就是优化的时间。缓存就是这个法宝。</strong></p>
<h3 id="1-5-缓存，是否多多益善"><a href="#1-5-缓存，是否多多益善" class="headerlink" title="1.5 缓存，是否多多益善"></a>1.5 缓存，是否多多益善</h3><p>下面三种情况建议尽量使用缓存来做优化。<br><strong>减少的处理时间显著（性能差异明显）</strong><br>原来的逻辑太复杂，性能很低下，如：超过 50ms<br>原来的 IO 耗时太长，如：网络延时超过 50ms，或者 IO 处理耗时超过 50ms<br><strong>增加空间有限（成本提高）</strong><br>缓存的数据空间尽量小，如果实在很大，可以考虑把数据压缩后缓存，如：博文正文页（计算换空间）<br>缓存数据的位置，可以在进程内，外部服务进程，甚至文件、数据库中（缓存后速度比缓存前的性能提高明显才有益）<br>单个实例进程的容量尽量别太大（超过 16G，32G），以减小迁移、重启、故障造成的影响（运维的负担也不能忽视）<br><strong>增加的处理有限（开发难度，运算次数）</strong><br>避免缓存频繁失效（命中率太低）<br>避免缓存频繁更新（数据一致性复杂）</p>
<h3 id="1-6-总结，高性能程序与时间、空间的关系"><a href="#1-6-总结，高性能程序与时间、空间的关系" class="headerlink" title="1.6 总结，高性能程序与时间、空间的关系"></a>1.6 总结，高性能程序与时间、空间的关系</h3><p><strong>高性能程序设计，重点关注</strong><br>方法一，减少单个请求的处理时间（程序优化）<br>方法二，增加 CPU，线性提高系统的吞吐率（并发编程）<br>方法三，增加集群的服务器，线性提高系统的吞吐率（分布式系统设计）<br><strong>空间换时间，缓存的优势</strong><br>场景一，缓存前的处理速度太慢，IO 耗时太长（超过 50ms）<br>场景二，缓存数据具有极高的命中率（超过 90%，理想是 100%）<br><strong>避免缓存的陷阱</strong><br>场景一，程序没有高性能需求，程序原本性能已经非常高（不要为缓存而优化）<br>场景二，缓存容量爆炸性增长（成本太高）<br>场景三，缓存数据更新太频繁（命中率低，数据一致性差）</p>
<h2 id="2-无处不在的缓存，硬件与软件"><a href="#2-无处不在的缓存，硬件与软件" class="headerlink" title="2 无处不在的缓存，硬件与软件"></a>2 无处不在的缓存，硬件与软件</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410098-11990f7f-14ab-4b46-b6dc-34969d53bc07.jpeg#align=left&display=inline&height=540&margin=%5Bobject%20Object%5D&originHeight=540&originWidth=429&size=0&status=done&style=none&width=429"></p>
<ul>
<li>CPU 与内存</li>
<li>硬盘</li>
<li>网卡</li>
<li>操作系统</li>
<li>程序设计语言</li>
<li>Web 服务器和数据库</li>
<li>CDN 内容分发网络</li>
<li>DNS 域名解析</li>
<li>Web 浏览器</li>
</ul>
<h3 id="2-1-CPU-与内存"><a href="#2-1-CPU-与内存" class="headerlink" title="2.1 CPU 与内存"></a>2.1 CPU 与内存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796409990-b88c56e4-74b4-4dd7-962f-30cc28c59a5d.jpeg#align=left&display=inline&height=375&margin=%5Bobject%20Object%5D&originHeight=375&originWidth=390&size=0&status=done&style=none&width=390"><br><strong>CPU 内的寄存器/L1/L2/L3</strong></p>
<ul>
<li>速度不一样</li>
<li>容量不一样</li>
<li>成本不一样</li>
</ul>
<p><strong>计算机内存</strong></p>
<ul>
<li>容量更大</li>
<li>成本更低</li>
<li>速度稍慢（比硬盘、网络快很多）</li>
</ul>
<p><strong>更多参考：</strong> <a target="_blank" rel="noopener" href="https://www.imooc.com/article/283248">并发编程与锁的底层原理</a></p>
<h3 id="2-2-硬盘内的缓存"><a href="#2-2-硬盘内的缓存" class="headerlink" title="2.2 硬盘内的缓存"></a>2.2 硬盘内的缓存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796409914-b1677f8d-a505-4f15-a1aa-30c5a2559dc9.jpeg#align=left&display=inline&height=243&margin=%5Bobject%20Object%5D&originHeight=243&originWidth=243&size=0&status=done&style=none&width=243"> <img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410103-8fc531a7-f3db-46ad-acc5-e09f3574d57c.jpeg#align=left&display=inline&height=211&margin=%5Bobject%20Object%5D&originHeight=211&originWidth=240&size=0&status=done&style=none&width=240"><br><strong>SATA 传来的数据和盘片的实际操作间加一个缓冲</strong></p>
<ul>
<li>HDD 的延迟是 ms 级别，缓存是 ns 级，相差数万倍</li>
<li>缓存容量增加，提高命中率</li>
<li>突然掉电导致数据丢失的风险增大</li>
<li>固态混合硬盘，内置 8G/16G 固态硬盘，缓存容量更大</li>
<li>固态硬盘，随机读写速度更快</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/27030135">为什么机械硬盘的缓存不是越大越好</a>？</p>
<p>缓存容量增加，带来的成本提高，突然掉电导致数据丢失的风险增大</p>
<h3 id="2-3-网卡的发送-接收缓存"><a href="#2-3-网卡的发送-接收缓存" class="headerlink" title="2.3 网卡的发送/接收缓存"></a>2.3 网卡的发送/接收缓存</h3><p><strong>发送缓存</strong></p>
<ul>
<li>网卡有包就发，包太多了就放入缓存队列，缓存满了就丢包并且告诉系统丢包了</li>
<li>TCP 协议具有流控和拥塞检测功能，防止发包太快造成丢包(UDP 不可靠传输)</li>
</ul>
<p><strong>接收缓存</strong></p>
<ul>
<li>网卡接收数据，放入接收缓存，一次数据接收完成后，网卡驱动程序，向 CPU 发送信号，提示网卡有新数据到来。</li>
<li>操作系统从网卡的接收缓冲队列中读取数据，交给应用程序处理。</li>
</ul>
<h3 id="2-4-操作系统的缓存"><a href="#2-4-操作系统的缓存" class="headerlink" title="2.4 操作系统的缓存"></a>2.4 操作系统的缓存</h3><p><strong>缓冲文件系统</strong></p>
<ul>
<li>在内存开辟一个“缓冲区”，为程序中的每一个文件使用(读写文件先操作缓冲区)</li>
<li>fopen, fclose, fread, fwrite, fgetc, fgets, fputc, fputs, freopen, fseek, ftell, rewind 等</li>
</ul>
<p><strong>网络相关缓存设置</strong></p>
<ul>
<li>/proc/sys/net/core/wmem_max 最大 socket 写 buffer</li>
<li>/proc/sys/net/core/rmem_max   最大 socket 读 buffer</li>
<li>/proc/sys/net/ipv4/tcp_wmem  TCP 写 buffer</li>
<li>/proc/sys/net/ipv4/tcp_rmem  TCP 读 buffer</li>
<li>/proc/sys/net/core/netdev_max_backlog   进入包的最大设备队列</li>
<li>/proc/sys/net/core/somaxconn  listen()的默认参数,挂起请求的最大数量</li>
<li>/proc/sys/net/ipv4/tcp_max_syn_backlog   进入 SYN 包的最大请求队列</li>
</ul>
<p>操作系统磁盘缓存，可以减少磁盘机械操作。</p>
<p><strong>更多参考：</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/tanqiuwei/article/details/20641965">不带缓冲区 open 和带缓冲区的 fopen 的区别</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/weifeng1463/p/6825532.html">linux 内核参数优化</a></li>
</ul>
<h3 id="2-5-程序设计语言的缓存"><a href="#2-5-程序设计语言的缓存" class="headerlink" title="2.5 程序设计语言的缓存"></a>2.5 程序设计语言的缓存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410037-a5c88bd9-6dc4-4ea7-b757-2a8caafae455.jpeg#align=left&display=inline&height=200&margin=%5Bobject%20Object%5D&originHeight=200&originWidth=350&size=0&status=done&style=none&width=350"><br><strong>PHP 的缓存</strong></p>
<ul>
<li>opcache，省去了 PHP 源码到 opcode 的转换过程，并且保证脚本对应的 opcode 都保存在内存中</li>
<li>apcu，共享内存，缓存 PHP 程序中的用户数据</li>
</ul>
<p><strong>Java 的缓存</strong></p>
<ul>
<li>JIT，运行时生成机器码，比 Java 编译器优化后的 bytecode 性能更好</li>
<li>ehcache，缓存数据有两级：内存和磁盘</li>
</ul>
<p>编程语言的版本升级，我们最关注的除了语言特性的变化，还有就是关于性能的提升。其中有优化数据结构的，也有优化 GC 的，当然也有引入缓存/JIT 这些技术。</p>
<h3 id="2-6-Web-服务器和数据库"><a href="#2-6-Web-服务器和数据库" class="headerlink" title="2.6 Web 服务器和数据库"></a>2.6 Web 服务器和数据库</h3><p><strong>nginx 中的缓存</strong></p>
<ul>
<li>减少应用服务器请求</li>
<li>proxy_cache，内容缓存在本地文件中</li>
</ul>
<p><strong>mysql 中的缓存</strong></p>
<ul>
<li>减少文件系统 I/O</li>
<li>SqlSession，直接返回结果（四种失效情况：Sql 不同，条件不同，增删改操作，清空了缓存）</li>
<li>sort_buffer_size 排序缓冲区大小，超过的时候就用到磁盘中排序</li>
<li>join_buffer_size 每个联合查询分配的缓冲区</li>
<li>read_buffer_size 对 MyISAM 表进行全表扫描时分配的读缓存池的大小</li>
<li>read_rnd_buffer_size 索引缓冲区的大小</li>
</ul>
<p>数据库缓存，减少文件系统 I/O。</p>
<p><strong>更多参考：</strong><a target="_blank" rel="noopener" href="https://www.jb51.net/article/100377.htm">mysql 缓冲和缓存设置详解</a></p>
<h3 id="2-7-CDN-内容分发网络的缓存"><a href="#2-7-CDN-内容分发网络的缓存" class="headerlink" title="2.7 CDN 内容分发网络的缓存"></a>2.7 CDN 内容分发网络的缓存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410027-baac97e3-d62a-432b-b0bb-4a3e670db5e8.jpeg#align=left&display=inline&height=224&margin=%5Bobject%20Object%5D&originHeight=224&originWidth=405&size=0&status=done&style=none&width=405"><br><strong>分布式网络</strong></p>
<ul>
<li>全国/全球多地部署很多 Web 服务器缓存节点</li>
<li>DNS 动态解析，让客户端请求就近访问到 Web 服务器缓存节点</li>
</ul>
<p><strong>Web 内容缓存</strong></p>
<ul>
<li>缓存源服务器的内容，有缓存时就不需要回源</li>
<li>可以支持目录规则、文件扩展名等设置缓存策略</li>
<li>可以手动刷新指定目录、文件的缓存数据</li>
</ul>
<p>CDN,加速终端连接和请求速度，减少源站点压力</p>
<h3 id="2-8-DNS-域名解析"><a href="#2-8-DNS-域名解析" class="headerlink" title="2.8 DNS 域名解析"></a>2.8 DNS 域名解析</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796409973-4ae35b75-da04-45ec-a64d-a3bd21e34b9a.jpeg#align=left&display=inline&height=371&margin=%5Bobject%20Object%5D&originHeight=371&originWidth=580&size=0&status=done&style=none&width=580"></p>
<ul>
<li>浏览器的 DNS 缓存，60s， chrome://net-internals/#dns</li>
<li>操作系统的 DNS 缓存， ipconfig /displaydns</li>
<li>本地 HOSTS 文件<ul>
<li>C:\Windows\System32\drivers\etc\hosts</li>
<li>/etc/hosts</li>
</ul>
</li>
<li>远程多级 DNS 服务器<ul>
<li>路由器，运营商</li>
<li>根服务，顶级域名服务</li>
<li>二级域名服务，三级域名服务等</li>
</ul>
</li>
</ul>
<p>DNS 服务是典型的分布式分层缓存系统，高效可靠，当然也是非常核心的系统，大面积断网的事件就跟 DNS 故障有关。</p>
<p><strong>更多参考：</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/tonykan/p/3500332.html">浏览器的 DNS 缓存</a></p>
<h3 id="2-9-Web-浏览器"><a href="#2-9-Web-浏览器" class="headerlink" title="2.9 Web 浏览器"></a>2.9 Web 浏览器</h3><p>客户端浏览器缓存，减少对网站的访问。<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410031-40cdd37f-2fd1-421e-9b98-5266cb644a4e.jpeg#align=left&display=inline&height=367&margin=%5Bobject%20Object%5D&originHeight=367&originWidth=542&size=0&status=done&style=none&width=542"><br><strong>Web 内容缓存</strong></p>
<ul>
<li>客户端直接读取缓存，减少对 Web 服务器的请求</li>
<li>强制缓存 cache-control, expires (from memory cache, from disk cache)</li>
<li>协商缓存 etag, If-None-Match, last-modified, If-Modified-Since (304 not modify)</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410063-d5339954-195d-4e3b-880d-4f33c187faa2.jpeg#align=left&display=inline&height=169&margin=%5Bobject%20Object%5D&originHeight=169&originWidth=938&size=0&status=done&style=none&width=938"></p>
<p><strong>Cookie/LocalStorage/SessionStorage</strong></p>
<ul>
<li>数据存储在客户端，减少对服务端的依赖</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410098-64bccb0a-47eb-4597-9138-144359e8d4bb.jpeg#align=left&display=inline&height=309&margin=%5Bobject%20Object%5D&originHeight=309&originWidth=960&size=0&status=done&style=none&width=960"></p>
<p><strong>更多参考：</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/entry/5ad86c16f265da505a77dca4">彻底理解浏览器的缓存机制</a></li>
<li><a target="_blank" rel="noopener" href="https://jerryzou.com/posts/cookie-and-web-storage/">详说 Cookie, LocalStorage 与 SessionStorage</a></li>
</ul>
<h3 id="2-10-总结，无处不在的缓存，硬件和软件"><a href="#2-10-总结，无处不在的缓存，硬件和软件" class="headerlink" title="2.10 总结，无处不在的缓存，硬件和软件"></a>2.10 总结，无处不在的缓存，硬件和软件</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410052-25c56cb4-f3ed-4e87-a09a-f6c328046043.jpeg#align=left&display=inline&height=722&margin=%5Bobject%20Object%5D&originHeight=722&originWidth=1046&size=0&status=done&style=none&width=1046"><br><strong>缓冲区 buffer</strong></p>
<ul>
<li>避免频繁读写</li>
<li>一次性分配稍大的空间</li>
<li>一次性读写多一点内容</li>
</ul>
<p><strong>缓冲队列</strong></p>
<ul>
<li>通过队列，削峰填谷</li>
<li>不同设备、应用的读写速度不一样</li>
</ul>
<p><strong>多级缓存，分布式缓存</strong></p>
<ul>
<li>本地更快，减少远程数据依赖</li>
<li>缓存数据使用更快，减少数据读取和运算</li>
</ul>
<p>问：在浏览器中输入一个网址 <a target="_blank" rel="noopener" href="http://www.imooc.com/">http://www.imooc.com/</a> ，接下来会发生什么？</p>
<h2 id="3-系统中的缓存设计"><a href="#3-系统中的缓存设计" class="headerlink" title="3 系统中的缓存设计"></a>3 系统中的缓存设计</h2><p>先来看看 2 个典型的常见的软件系统。</p>
<h3 id="3-1-社区-bbs-的缓存设计"><a href="#3-1-社区-bbs-的缓存设计" class="headerlink" title="3.1 社区 bbs 的缓存设计"></a>3.1 社区 bbs 的缓存设计</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410234-492047cd-e53a-4187-9639-d46d3143c29a.jpeg#align=left&display=inline&height=279&margin=%5Bobject%20Object%5D&originHeight=279&originWidth=462&size=0&status=done&style=none&width=462"><br><strong>数据模型</strong></p>
<ul>
<li>用户，板块，主题，帖子，回复</li>
</ul>
<p><strong>页面</strong></p>
<ul>
<li>首页，板块帖子列表页，帖子详情页，用户资料页</li>
</ul>
<p><strong>操作</strong></p>
<ul>
<li>浏览，发帖，回帖，置顶</li>
</ul>
<p><strong>缓存数据</strong></p>
<ul>
<li>全量永久缓存：用户(uid -&gt; map)，板块(all -&gt; json)，置顶帖(all -&gt; json)</li>
<li>部分临时缓存：帖子列表页数据(多种排序, fid-displayorder -&gt; tids), 主题浏览量(tid -&gt; views)，帖子数据(tid -&gt; map)，用户帖子列表页数据(uid -&gt; json)</li>
<li>页面缓存：首页，帖子详情页</li>
</ul>
<h3 id="3-2-电商系统的缓存设计"><a href="#3-2-电商系统的缓存设计" class="headerlink" title="3.2 电商系统的缓存设计"></a>3.2 电商系统的缓存设计</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410217-3c5d7b87-9584-4d7d-bba7-0b3217d8d78b.jpeg#align=left&display=inline&height=299&margin=%5Bobject%20Object%5D&originHeight=299&originWidth=432&size=0&status=done&style=none&width=432"><br><strong>数据模型</strong></p>
<ul>
<li>用户，分类，商品 SPU,SKU，订单，支付</li>
<li>评价，收藏，购物车，联系地址</li>
</ul>
<p><strong>页面</strong></p>
<ul>
<li>首页，分类商品推荐页，搜索商品列表页</li>
<li>商品详情页，用户订单列表页</li>
</ul>
<p><strong>操作</strong></p>
<ul>
<li>浏览，搜索，下单，支付，推荐，评价</li>
</ul>
<p><strong>缓存数据</strong></p>
<ul>
<li>全量永久缓存：用户，分类，商品，商品 SKU 库存，推荐</li>
<li>部分临时缓存：大量的临时推荐位，人工干预内容，相关商品，置顶评论等</li>
<li>页面缓存：首页，搜索页，商品详情页</li>
</ul>
<h3 id="3-3-缓存设计，最佳场景，永久缓存"><a href="#3-3-缓存设计，最佳场景，永久缓存" class="headerlink" title="3.3 缓存设计，最佳场景，永久缓存"></a>3.3 缓存设计，最佳场景，永久缓存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796409972-9c10fd63-401d-4af7-a3f0-22c4ff82d025.jpeg#align=left&display=inline&height=109&margin=%5Bobject%20Object%5D&originHeight=109&originWidth=508&size=0&status=done&style=none&width=508"><br><strong>数据只读，极少更新</strong></p>
<ul>
<li>配置类，全局共享数据（置顶帖）</li>
<li>后台定时任务生成的数据（推荐内容）</li>
</ul>
<p><strong>数据占用空间有限</strong></p>
<ul>
<li>单个 key 的内容比较小（用户信息）</li>
<li>总数量比较有限（商品信息）</li>
</ul>
<p><strong>数据结构简单，容易快速查找</strong></p>
<ul>
<li>key-string 直接得到完整数据</li>
<li>key-hash 易于部分数据读取和更新</li>
<li>key-list 双向队列</li>
<li>key-sortedset 有序集合，索引排序</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410000-48903214-843e-4d15-ad69-0958847aa6f9.jpeg#align=left&display=inline&height=239&margin=%5Bobject%20Object%5D&originHeight=239&originWidth=533&size=0&status=done&style=none&width=533"></p>
<h3 id="3-4-缓存设计，较好场景，临时缓存"><a href="#3-4-缓存设计，较好场景，临时缓存" class="headerlink" title="3.4 缓存设计，较好场景，临时缓存"></a>3.4 缓存设计，较好场景，临时缓存</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410106-00ff3efc-fabc-43e0-933f-f6d7ada17eed.jpeg#align=left&display=inline&height=153&margin=%5Bobject%20Object%5D&originHeight=153&originWidth=372&size=0&status=done&style=none&width=372"><br><strong>数据读多写少，读取速度慢</strong></p>
<ul>
<li>用户、内容数据，如：用户信息，帖子信息等</li>
<li>缓存快过数据库</li>
</ul>
<p><strong>数据占用空间较大</strong></p>
<ul>
<li>帖子内容，整页缓存</li>
<li>过期或者未命中再从数据库读取</li>
</ul>
<p><strong>保证较高的命中率，90%以上</strong></p>
<ul>
<li>缓存容量较大，过期/失效的缓存减少，命中率提高</li>
<li>更新的频率降低，命中率提高</li>
<li>更新的时候主动更新缓存，命中率提高</li>
<li>合适的缓存淘汰策略，FIFO/LRU/LFU/TTL/RANDOM</li>
</ul>
<h3 id="3-5-缓存设计，特殊场景，性能优先"><a href="#3-5-缓存设计，特殊场景，性能优先" class="headerlink" title="3.5 缓存设计，特殊场景，性能优先"></a>3.5 缓存设计，特殊场景，性能优先</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410358-81b6e325-7a8a-40ca-939b-c743a014bbec.jpeg#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&originHeight=318&originWidth=411&size=0&status=done&style=none&width=411"><br><strong>读写过于频繁的时候</strong></p>
<ul>
<li>帖子浏览量更新，更新到缓存，定时更新到数据库，读取数据库+缓存</li>
<li>秒杀时，商品库存扣减，隔离数据库的压力</li>
</ul>
<p><strong>排序方式太多，索引效率下降的时候</strong></p>
<ul>
<li>有序集合类缓存，代替数据库索引</li>
</ul>
<p><strong>数据表分拆太细，连表查询效率低的时候</strong></p>
<ul>
<li>直接把联合查询的数据缓存起来</li>
</ul>
<h3 id="3-6-缓存设计，不适合场景，成本超过收益"><a href="#3-6-缓存设计，不适合场景，成本超过收益" class="headerlink" title="3.6 缓存设计，不适合场景，成本超过收益"></a>3.6 缓存设计，不适合场景，成本超过收益</h3><p><strong>内容更新太频繁，命中率太低</strong></p>
<ul>
<li>用户的呼吸状态如果也缓冲起来，那么这时候的用户信息缓存命中率就太低了</li>
<li>完全散列随机的 key 值遍历查找，缓存无法重复利用</li>
</ul>
<p><strong>数据写入超过读取次数</strong></p>
<ul>
<li>日志类、流水式的固定内容，很少使用，不适合用缓存</li>
</ul>
<p><strong>系统自身性能很好</strong></p>
<ul>
<li>没必要增加缓存来提高不足 10%的速度</li>
</ul>
<p><strong>系统访问量很有限</strong></p>
<ul>
<li>性能需求不高，没必要增加复杂度来做优化</li>
</ul>
<h3 id="3-7-总结，系统中的缓存设计"><a href="#3-7-总结，系统中的缓存设计" class="headerlink" title="3.7 总结，系统中的缓存设计"></a>3.7 总结，系统中的缓存设计</h3><p><strong>提高缓存命中率</strong></p>
<ul>
<li>缓存永不过期，缓存空间充足，数据直接写入和更新缓存</li>
<li>扩大缓存容量，减少缓存过期或者失效的概率（内存+SSD 文件）</li>
</ul>
<p><strong>规划缓存容量</strong></p>
<ul>
<li>优先把永久缓存的内容放进去</li>
<li>再把读多写少的内容放进去</li>
<li>再有富余容量，把实时性要求不高的内容放进去</li>
<li>大容量使用简单，风险高；多实例连接多，操作复杂，可用性好</li>
</ul>
<p><strong>缓存性能优势</strong></p>
<ul>
<li>内存缓存 &gt; 数据库 &gt; 硬盘文件</li>
<li>进程内数据 &gt; 本地缓存 &gt; 远程数据</li>
<li>缓存数据读取后运算后的复杂结果</li>
</ul>
<h2 id="4-总结，缓存为王"><a href="#4-总结，缓存为王" class="headerlink" title="4 总结，缓存为王"></a>4 总结，缓存为王</h2><p>高性能程序设计与缓存的效果（连蒙带猜）<br><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410364-0e9d714a-5d6c-4016-9428-21bdf18a0a2d.jpeg#align=left&display=inline&height=928&margin=%5Bobject%20Object%5D&originHeight=928&originWidth=1836&size=0&status=done&style=none&width=1836"><br>如果没有缓存的情况下，100 亿的客户端请求，最后落到数据服务器上会有上万亿的 IO 操作。<br><strong>老司机箴言：</strong></p>
<ul>
<li>设计时，分层分级。</li>
<li>执行时，少查少写少依赖，Less is more。</li>
<li>别让硬盘抗性能，别让内存保持久，别让网线抗稳定。</li>
</ul>
<h3 id="高性能程序设计的漫漫求索之路"><a href="#高性能程序设计的漫漫求索之路" class="headerlink" title="高性能程序设计的漫漫求索之路"></a>高性能程序设计的漫漫求索之路</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410185-30e01122-2761-4d71-bdf6-b8ee9f967d16.jpeg#align=left&display=inline&height=237&margin=%5Bobject%20Object%5D&originHeight=237&originWidth=254&size=0&status=done&style=none&width=254"><br><strong>数据结构和算法（应用优化）</strong></p>
<ul>
<li>数组、链表、集合、哈希表、二叉树等</li>
<li>排序算法：冒泡、快速、归并等</li>
</ul>
<p><strong>并发编程的问题（增加 CPU）</strong></p>
<ul>
<li>共享变量的读写，线程安全性问题</li>
<li>数据存储、依赖服务等瓶颈点</li>
</ul>
<p><strong>分布式系统设计（增加服务器）</strong></p>
<ul>
<li>有状态服务高可用和数据一致性问题</li>
<li>全局、中心节点的可靠性问题</li>
</ul>
<p><strong>缓存优化（空间换时间）</strong></p>
<ul>
<li>精细化分析和设计，提高命中率和可用性</li>
<li>监控工具、运维工具等</li>
</ul>
<h3 id="总结，缓存为王"><a href="#总结，缓存为王" class="headerlink" title="总结，缓存为王"></a>总结，缓存为王</h3><p>高性能程序设计，使用缓存来优化可能会是第一选择。只是，方法虽然简单，过程还是曲折的。每一次缓存设计，都还是要针对具体场景和需求，制定最合适的方案，要考虑的地方也还是有很多。</p>
<ul>
<li>速度、成本的平衡（开发速度、执行效率，人力成本、服务器成本）</li>
<li>空间、时间的平衡</li>
<li>复杂、简单的平衡</li>
<li>设计方案，没有最优，只有最合适</li>
<li>高性能程序系统，一个动态演进的过程</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/190217/1589796410196-42280ffd-72e7-43b6-b5d1-e81488431561.jpeg#align=left&display=inline&height=239&margin=%5Bobject%20Object%5D&originHeight=239&originWidth=319&size=0&status=done&style=none&width=319"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/18/yuque/%E9%AB%98%E6%80%A7%E8%83%BD%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%8C%E7%BC%93%E5%AD%98%E4%B8%BA%E7%8E%8B/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/指针反转lianbiao，树右序遍历" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/18/yuque/%E6%8C%87%E9%92%88%E5%8F%8D%E8%BD%AClianbiao%EF%BC%8C%E6%A0%91%E5%8F%B3%E5%BA%8F%E9%81%8D%E5%8E%86/">指针反转lianbiao，树右序遍历</a>
    </h1>
  

        
        <a href="/2020/05/18/yuque/%E6%8C%87%E9%92%88%E5%8F%8D%E8%BD%AClianbiao%EF%BC%8C%E6%A0%91%E5%8F%B3%E5%BA%8F%E9%81%8D%E5%8E%86/" class="archive-article-date">
  	<time datetime="2020-05-18T08:21:17.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">type</span> ListNode <span class="keyword">struct</span> &#123;</span><br><span class="line">	Val  <span class="keyword">int</span></span><br><span class="line">	Next *ListNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverselist</span><span class="params">(head *ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> temp *ListNode</span><br><span class="line">	pre := head</span><br><span class="line">	<span class="keyword">for</span> pre != <span class="literal">nil</span> &#123;</span><br><span class="line">		t := pre.Next</span><br><span class="line">		pre.Next = temp</span><br><span class="line">		temp = pre</span><br><span class="line">		pre = t</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> NodeTree <span class="keyword">struct</span> &#123;</span><br><span class="line">	Val   <span class="keyword">int</span></span><br><span class="line">	Left  *NodeTree</span><br><span class="line">	Right *NodeTree</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">levelOrder</span><span class="params">(node *NodeTree)</span> <span class="params">(res [][]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	res = [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">if</span> node == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	queue := []*NodeTree&#123;node&#125;</span><br><span class="line">	<span class="keyword">for</span> <span class="built_in">len</span>(queue) &gt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="comment">//创建临时队列,保存层节点</span></span><br><span class="line">		tmpQ := []*NodeTree&#123;&#125;</span><br><span class="line">		tmpRes := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="built_in">len</span>(queue); j++ &#123;</span><br><span class="line">			node := queue[j]</span><br><span class="line">			tmpRes = <span class="built_in">append</span>(tmpRes, node.Val)</span><br><span class="line">			<span class="keyword">if</span> node.Right != <span class="literal">nil</span> &#123;</span><br><span class="line">				tmpQ = <span class="built_in">append</span>(tmpQ, node.Right)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> node.Left != <span class="literal">nil</span> &#123;</span><br><span class="line">				tmpQ = <span class="built_in">append</span>(tmpQ, node.Left)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//处理下一层</span></span><br><span class="line">		queue = tmpQ</span><br><span class="line">		res = <span class="built_in">append</span>(res, tmpRes)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/18/yuque/%E6%8C%87%E9%92%88%E5%8F%8D%E8%BD%AClianbiao%EF%BC%8C%E6%A0%91%E5%8F%B3%E5%BA%8F%E9%81%8D%E5%8E%86/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Go核心36讲中50个思考题" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/yuque/Go%E6%A0%B8%E5%BF%8336%E8%AE%B2%E4%B8%AD50%E4%B8%AA%E6%80%9D%E8%80%83%E9%A2%98/">Go核心36讲中50个思考题</a>
    </h1>
  

        
        <a href="/2020/05/15/yuque/Go%E6%A0%B8%E5%BF%8336%E8%AE%B2%E4%B8%AD50%E4%B8%AA%E6%80%9D%E8%80%83%E9%A2%98/" class="archive-article-date">
  	<time datetime="2020-05-15T16:30:25.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="基础概念篇"><a href="#基础概念篇" class="headerlink" title="基础概念篇"></a>基础概念篇</h2><ol>
<li>Go 语言在多个工作区中查找依赖包的时候是以怎样的顺序进行的？<br>答：你设置的环境变量 GOPATH 的值决定了这个顺序。如果你在 GOPATH 中设置了多个工作区，那么这种查找会以从左到右的顺序在这些工作区中进行。</li>
</ol>
<p>你可以通过试验来确定这个问题的答案。例如：先在一个源码文件中导入一个在你的机器上并不存在的代码包，然后编译这个代码文件。最后，将输出的编译错误信息与 GOPATH 的值进行对比。</p>
<ol start="2">
<li><p>如果在多个工作区中都存在导入路径相同的代码包会产生冲突吗？<br>答：不会产生冲突。因为代码包的查找是按照已给定的顺序逐一地在多个工作区中进行的。</p>
</li>
<li><p>默认情况下，我们可以让命令源码文件接受哪些类型的参数值？<br>答：这个问题通过查看 flag 代码包的文档就可以回答了。概括来讲，有布尔类型、整数类型、浮点数类型、字符串类型，以及 time.Duration 类型。</p>
</li>
<li><p>我们可以把自定义的数据类型作为参数值的类型吗？如果可以，怎样做？<br>答：狭义上讲是不可以的，但是广义上讲是可以的。这需要一些定制化的工作，并且被给定的参数值只能是序列化的。具体可参见 flag 代码包文档中的例子。</p>
</li>
<li><p>如果你需要导入两个代码包，而这两个代码包的导入路径的最后一级是相同的，比如：dep/lib/flag 和 flag，那么会产生冲突吗？ 答：这会产生冲突。因为代表两个代码包的标识符重复了，都是 flag。</p>
</li>
<li><p>如果会产生冲突，那么怎样解决这种冲突？有几种方式？<br>答：接上一个问题。很简单，导入代码包的时候给它起一个别名就可以了，比如： import libflag “dep/lib/flag”。或者，以本地化的方式导入代码包，如：import . “dep/lib/flag”。</p>
</li>
<li><p>如果与当前的变量重名的是外层代码块中的变量，那么意味着什么？<br>答：这意味着这两个变量成为了“可重名变量”。在内层的变量所处的那个代码块以及更深层次的代码块中，这个变量会“屏蔽”掉外层代码块中的那个变量。</p>
</li>
<li><p>如果通过 import . XXX 这种方式导入的代码包中的变量与当前代码包中的变量重名了，那么 Go 语言是会把它们当做“可重名变量”看待还是会报错呢？<br>答：这两个变量会成为“可重名变量”。虽然这两个变量在这种情况下的作用域都是当前代码包的当前文件，但是它们所处的代码块是不同的。</p>
</li>
</ol>
<p>当前文件中的变量处在该文件所代表的代码块中，而被导入的代码包中的变量却处在声明它的那个文件所代表的代码块中。当然，我们也可以说被导入的代码包所代表的代码块包含了这个变量。<br>在当前文件中，本地的变量会“屏蔽”掉被导入的变量。</p>
<ol start="9">
<li><p>除了《程序实体的那些事儿 3》一文中提及的那些，你还认为类型转换规则中有哪些值得注意的地方？<br>答：简单来说，我们在进行类型转换的时候需要注意各种符号的优先级。具体可参见 Go 语言规范中的转换部分。</p>
</li>
<li><p>你能具体说说别名类型在代码重构过程中可以起到的哪些作用吗？<br>答：简单来说，我们可以通过别名类型实现外界无感知的代码重构。具体可参见 Go 语言官方的文档 Proposal: Type Aliases。</p>
</li>
</ol>
<h2 id="数据类型和语句篇"><a href="#数据类型和语句篇" class="headerlink" title="数据类型和语句篇"></a>数据类型和语句篇</h2><ol start="11">
<li>如果有多个切片指向了同一个底层数组，那么你认为应该注意些什么？<br>答：我们需要特别注意的是，当操作其中一个切片的时候是否会影响到其他指向同一个底层数组的切片。</li>
</ol>
<p>如果是，那么问一下自己，这是你想要的结果吗？无论如何，通过这种方式来组织或共享数据是不正确的。你需要做的是，要么彻底切断这些切片的底层联系，要么立即为所有的相关操作加锁。</p>
<ol start="12">
<li><p>怎样沿用“扩容”的思想对切片进行“缩容”？<br>答：关于切片的“缩容”，可参看官方的相关 wiki。不过，如果你需要频繁的“缩容”，那么就可能需要考虑其他的数据结构了，比如：container/list 代码包中的 List。</p>
</li>
<li><p>container/ring 包中的循环链表的适用场景都有哪些？<br>答：比如：可重用的资源（缓存等）的存储，或者需要灵活组织的资源池，等等。</p>
</li>
<li><p>container/heap 包中的堆的适用场景又有哪些呢？<br>答：它最重要的用途就是构建优先级队列，并且这里的“优先级”可以很灵活。所以，想象空间很大。</p>
</li>
<li><p>字典类型的值是并发安全的吗？如果不是，那么在我们只在字典上添加或删除键-元素对的情况下，依然不安全吗？<br>答：字典类型的值不是并发安全的，即使我们只是增减其中的键值对也是如此。其根本原因是，字典值内部有时候会根据需要进行存储方面的调整。</p>
</li>
<li><p>通道的长度代表着什么？它在什么时候会通道的容量相同？<br>通道的长度代表它当前包含的元素值的个数。当通道已满时，其长度会与容量相同。</p>
</li>
<li><p>元素值在经过通道传递时会被复制，那么这个复制是浅表复制还是深层复制呢？<br>答：浅表复制。实际上，在 Go 语言中并不存在深层次的复制，除非我们自己来做。</p>
</li>
<li><p>如果在 select 语句中发现某个通道已关闭，那么应该怎样屏蔽掉它所在的分支？<br>答：很简单，把 nil 赋给代表了这个通道的变量就可以了。如此一来，对于这个通道（那个变量）的发送操作和接收操作就会永远被阻塞。</p>
</li>
<li><p>在 select 语句与 for 语句联用时，怎样直接退出外层的 for 语句？<br>答：这一般会用到 goto 语句和标签（label），具体请参看 Go 语言规范的这部分。</p>
</li>
<li><p>complexArray1 被传入函数的话，这个函数中对该参数值的修改会影响到它的原值吗？<br>答：文中 complexArray1 变量的声明如下：</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">complexArray1 := [<span class="number">3</span>][]<span class="keyword">string</span>&#123;</span><br><span class="line">	[]<span class="keyword">string</span>&#123;<span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>&#125;,</span><br><span class="line">	[]<span class="keyword">string</span>&#123;<span class="string">&quot;g&quot;</span>, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;i&quot;</span>&#125;,</span><br><span class="line">	[]<span class="keyword">string</span>&#123;<span class="string">&quot;j&quot;</span>, <span class="string">&quot;k&quot;</span>, <span class="string">&quot;l&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这要看怎样修改了。虽然 complexArray1 本身是一个数组，但是其中的元素却都是切片。如果对 complexArray1 中的元素进行增减，那么原值就不会受到影响。但若要修改它已有的元素值，那么原值也会跟着改变。</p>
<ol start="21">
<li><p>函数真正拿到的参数值其实只是它们的副本，那么函数返回给调用方的结果值也会被复制吗？<br>答：函数返回给调用方的结果值也会被复制。不过，在一般情况下，我们不用太在意。但如果函数在返回结果值之后依然保持执行并会对结果值进行修改，那么我们就需要注意了。</p>
</li>
<li><p>我们可以在结构体类型中嵌入某个类型的指针类型吗？如果可以，有哪些注意事项？<br>答：当然可以。在这时，我们依然需要注意各种“屏蔽”现象。由于某个类型的指针类型会包含与前者有关联的所有方法，所以我们更要注意。</p>
</li>
</ol>
<p>另外，我们在嵌入和引用这样的字段的时候还需要注意一些冲突方面的问题，具体请参看 Go 语言规范的这一部分。</p>
<ol start="23">
<li>字面量 struct{}代表了什么？又有什么用处？<br>答：字面量 struct{}代表了空的结构体类型。这样的类型既不包含任何字段也没有任何方法。该类型的值所需的存储空间几乎可以忽略不计。</li>
</ol>
<p>因此，我们可以把这样的值作为占位值来使用。比如：在同一个应用场景下，map[int] [int]bool 类型的值占用更少的存储空间。</p>
<ol start="24">
<li><p>如果我们把一个值为 nil 的某个实现类型的变量赋给了接口变量，那么在这个接口变量上仍然可以调用该接口的方法吗？如果可以，有哪些注意事项？如果不可以，原因是什么？<br>答：可以调用。但是请注意，这个被调用的方法在此时所持有的接收者的值是 nil。因此，如果该方法引用了其接收者的某个字段，那么就会引发 panic！</p>
</li>
<li><p>引用类型的值的指针值是有意义的吗？如果没有意义，为什么？如果有意义，意义在哪里？<br>答：从存储和传递的角度看，没有意义。因为引用类型的值已经相当于指向某个底层数据结构的指针了。当然，引用类型的值不只是指针那么简单。</p>
</li>
<li><p>用什么手段可以对 goroutine 的启用数量加以限制？<br>答：一个很简单且很常用的方法是，使用一个通道保存一些令牌。只有先拿到一个令牌，才能启用一个 goroutine。另外在 go 函数即将执行结束的时候还需要把令牌及时归还给那个通道。</p>
</li>
</ol>
<p>更高级的手段就需要比较完整的设计了。比如，任务分发器+任务管道（单层的通道）+固定个数的 goroutine。又比如，动态任务池（多层的通道）+动态 goroutine 池（可由前述的那个令牌方案演化而来）。等等。</p>
<ol start="27">
<li><p>runtime 包中提供了哪些与模型三要素 G、P 和 M 相关的函数？<br>答：关于这个问题，我相信你一查文档便知。在线文档在这里。不过光知道还不够，还要会用。</p>
</li>
<li><p>在类型 switch 语句中，我们怎样对被判断类型的那个值做相应的类型转换？<br>答：其实这个事情可以让 Go 语言自己来做，例如：</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> t := x.(<span class="keyword">type</span>) &#123;</span><br><span class="line"><span class="comment">// cases</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当流程进入到某个 case 子句的时候，变量 t 的值就已经被自动地转换为相应类型的值了。</p>
<ol start="29">
<li><p>在 if 语句中，初始化子句声明的变量的作用域是什么？<br>答：如果这个变量是新的变量，那么它的作用域就是当前 if 语句所代表的代码块。注意，后续的 else if 子句和 else 子句也包含在当前的 if 语句代表的代码块之内。</p>
</li>
<li><p>请列举出你经常用到或者看到的 3 个错误类型，它们所在的错误类型体系都是怎样的？你能画出一棵树来描述它们吗？<br>答：略。这需要你自己去做，我代替不了你。</p>
</li>
<li><p>请列举出你经常用到或者看到的 3 个错误值，它们分别在哪个错误值列表里？这些错误值列表分别包含的是哪个种类的错误？<br>答：略。这需要你自己去做，我代替不了你。</p>
</li>
<li><p>一个函数怎样才能把 panic 转化为 error 类型值，并将其作为函数的结果值返回给调用方？<br>答：可以这样编写：</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		p := <span class="built_in">recover</span>()</span><br><span class="line">		err = fmt.Errorf(<span class="string">&quot;FATAL ERROR: %s&quot;</span>, p)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;Oops!!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意结果声明的写法。这是一个带有名称的结果声明。</p>
<ol start="33">
<li>我们可以在 defer 函数中恢复 panic，那么可以在其中引发 panic 吗？<br>答：当然可以。这样做可以把原先的 panic 包装一下再抛出去。</li>
</ol>
<h2 id="Go-程序的测试"><a href="#Go-程序的测试" class="headerlink" title="Go 程序的测试"></a>Go 程序的测试</h2><ol start="34">
<li><p>除了本文中提到的，你还知道或用过 testing.T 类型和 testing.B 类型的哪些方法？它们都是做什么用的？<br>答：略。这需要你自己去做，我代替不了你。</p>
</li>
<li><p>在编写示例测试函数的时候，我们怎样指定预期的打印内容？<br>答：这个问题的答案就在 testing 代码包的文档中。</p>
</li>
<li><p>-benchmem 标记和-benchtime 标记的作用分别是什么？<br>答：-benchmem 标记的作用是在性能测试完成后打印内存分配统计信息。-benchtime 标记的作用是设定测试函数的执行时间上限。</p>
</li>
</ol>
<p>具体请看这里的文档。</p>
<ol start="37">
<li>怎样在测试的时候开启测试覆盖度分析？如果开启，会有什么副作用吗？<br>答：go test 命令可以接受-cover 标记。该标记的作用就是开启测试覆盖度分析。不过，由于覆盖度分析开启之后 go test 命令可能会在程序被编译之前注释掉一部分源代码，所以，若程序编译或测试失败，那么错误报告可能会记录下与原始的源代码不对应的行号。</li>
</ol>
<h2 id="标准库的用法"><a href="#标准库的用法" class="headerlink" title="标准库的用法"></a>标准库的用法</h2><ol start="38">
<li><p>你知道互斥锁和读写锁的指针类型都实现了哪一个接口吗？<br>答：它们都实现了 sync.Locker 接口。</p>
</li>
<li><p>怎样获取读写锁中的读锁？<br>答：sync.RWMutex 类型有一个名为 RLocker 的指针方法可以获取其读锁。</p>
</li>
<li><p>*sync.Cond 类型的值可以被传递吗？那 sync.Cond 类型的值呢？<br>答：sync.Cond 类型的值一旦被使用就不应该再被传递了，传递往往意味着拷贝。拷贝一个已经被使用的 sync.Cond 值会引发 panic。但是它的指针值是可以被拷贝的。</p>
</li>
<li><p>sync.Cond 类型中的公开字段 L 是做什么用的？我们可以在使用条件变量的过程中改变这个字段的值吗？<br>答：这个字段代表的是当前的 sync.Cond 值所持有的那个锁。我们可以在使用条件变量的过程中改变该字段的值，但是在改变之前一定要搞清楚这样做的影响。</p>
</li>
<li><p>如果要对原子值和互斥锁进行二选一，你认为最重要的三个决策条件应该是什么？<br>答：我觉得首先需要考虑下面几个问题。</p>
</li>
</ol>
<p>被保护的数据是什么类型的？是值类型的还是引用类型的？<br>操作被保护数据的方式是怎样的？是简单的读和写还是更复杂的操作？<br>操作被保护数据的代码是集中的还是分散的？如果是分散的，是否可以变为集中的？<br>在搞清楚上述问题（以及你关注的其他问题）之后，优先使用原子值。</p>
<ol start="43">
<li><p>在使用 WaitGroup 值实现一对多的 goroutine 协作流程时，怎样才能让分发子任务的 goroutine 获得各个子任务的具体执行结果？ 答：可以考虑使用锁+容器（数组、切片或字典等），也可以考虑使用通道。另外，你或许也可以用上 golang.org/x/sync/errgroup 代码包中的程序实体，相应的文档在这里。</p>
</li>
<li><p>Context 值在传达撤销信号的时候是广度优先的还是深度优先的？其优势和劣势都是什么？<br>答：它是深度优先的。其优势和劣势都是：直接分支的产生时间越早，其中的所有子节点就会越先接收到信号。至于什么时候是优势、什么时候是劣势还要看具体的应用场景。</p>
</li>
</ol>
<p>例如，如果子节点的存续时间与资源的消耗是正相关的，那么这可能就是一个优势。但是，如果每个分支中的子节点都很多，而且各个分支中的子节点的产生顺序并不依从于分支的产生顺序，那么这种优势就很可能会变成劣势。最终的定论还是要看测试的结果。</p>
<ol start="45">
<li>怎样保证一个临时对象池中总有比较充足的临时对象？<br>答：首先，我们应该事先向临时对象池中放入足够多的临时对象。其次，在用完临时对象之后，我们需要及时地把它归还给临时对象池。</li>
</ol>
<p>最后，我们应该保证它的 New 字段所代表的值是可用的。虽然 New 函数返回的临时对象并不会被放入池中，但是起码能够保证池的 Get 方法总能返回一个临时对象。</p>
<ol start="46">
<li><p>关于保证并发安全字典中的键和值的类型正确性，你还能想到其他的方案吗？<br>答：这是一道开放的问题，需要你自己去思考。其实怎样做完全取决于你的应用场景。不过，我们应该尽量避免使用反射，因为它对程序性能还是有一定的影响的。</p>
</li>
<li><p>判断一个 Unicode 字符是否为单字节字符通常有几种方式？<br>答：unicode/utf8 代码包中有几个可以做此判断的函数，比如：RuneLen 函数、EncodeRune 函数等。我们需要根据输入的不同来选择和使用它们。具体可以查看该代码包的文档。</p>
</li>
<li><p>strings.Builder 和 strings.Reader 都分别实现了哪些接口？这样做有什么好处吗？<br>答：strings.Builder 类型实现了 3 个接口，分别是：fmt.Stringer、io.Writer 和 io.ByteWriter。</p>
</li>
</ol>
<p>而 strings.Reader 类型则实现了 8 个接口，即：io.Reader、io.ReaderAt、io.ByteReader、io.RuneReader、io.Seeker、io.ByteScanner、io.RuneScanner 和 io.WriterTo。<br>好处是显而易见的。实现的接口越多，它们的用途就越广。它们会适用于那些要求参数的类型为这些接口类型的地方。</p>
<ol start="49">
<li>对比 strings.Builder 和 bytes.Buffer 的 String 方法，并判断哪一个更高效？原因是什么？<br>答：strings.Builder 的 String 方法更高效。因为该方法只对其所属值的内容容器（那个字节切片）做了简单的类型转换，并且直接使用了底层的值（或者说内存空间）。它的源码如下：</li>
</ol>
<p>// String returns the accumulated string. func (b _Builder) String() string { return _(*string)(unsafe.Pointer(&amp;b.buf)) } 数组值和字符串值在底层的存储方式其实是一样的。所以从切片值到字符串值的指针值的转换可以是直截了当的。又由于字符串值是不可变的，所以这样做也是安全的。<br>不过，由于一些历史、结构和功能方面的原因，bytes.Buffer 的 String 方法却不能这样做。</p>
<ol start="50">
<li>io 包中的同步内存管道的运作机制是什么？<br>答：我们实际上已经在正文中做了基本的说明。</li>
</ol>
<p>io.Pipe 函数会返回一个 io.PipeReader 类型的值和一个 io.PipeWriter 类型的值，并将它们分别作为管道的两端。而这两个值在底层其实只是代理了同一个*io.pipe 类型值的功能而已。<br>io.pipe 类型通过无缓冲的通道实现了读操作与写操作之间的同步，并且通过互斥锁实现了写操作之间的串行化。另外，它还使用原子值来处理错误。这些共同保证了这个同步内存管道的并发安全性。</p>
<ol start="51">
<li>bufio.Scanner 类型的主要功用是什么？它有哪些特点？<br>答：bufio.Scanner 类型俗称带缓存的扫描器。它的功能还是比较强大的。</li>
</ol>
<p>比如，我们可以自定义每次扫描的边界，或者说内容的分段方法。我们在调用它的 Scan 方法对目标进行扫描之前，可以先调用其 Split 方法并传入一个函数来自定义分段方法。<br>在默认情况下，扫描器会以行为单位对目标内容进行扫描。bufio 代码包提供了一些现成的分段方法。实际上，扫描器在默认情况下会使用 bufio.ScanLines 函数作为分段方法。<br>又比如，我们还可以在扫描之前自定义缓存的载体和缓存的最大容量，这需要调用它的 Buffer 方法。在默认情况下，扫描器内部设定的最大缓存容量是 64K 个字节。<br>换句话说，目标内容中的每一段都不能超过 64K 个字节。否则，扫描器就会使它的 Scan 方法返回 false，并通过其 Err 方法给予我们一个表示“token too long”的错误值。这里的“token”代表的就是一段内容。<br>关于 bufio.Scanner 类型的更多特点和使用注意事项，你可以通过它的文档获得。</p>
<ol start="52">
<li>怎样通过 os 包中的 API 创建和操纵一个系统进程？<br>答：你可以从 os 包的 FindProcess 函数和 StartProcess 函数开始。前者用于通过进程 ID（pid）查找进程，后者用来基于某个程序启动一个进程。</li>
</ol>
<p>这两者都会返回一个*os.Process 类型的值。该类型提供了一些方法，比如，用于杀掉当前进程的 Kill 方法，又比如，可以给当前进程发送系统信号的 Signal 方法，以及会等待当前进程结束的 Wait 方法。<br>与此相关的还有 os.ProcAttr 类型、os.ProcessState 类型、os.Signal 类型，等等。你可以通过积极的实践去探索更多的玩法。</p>
<ol start="53">
<li>怎样在 net.Conn 类型的值上正确地设定针对读操作和写操作的超时时间？<br>答：net.Conn 类型有 3 个可用于设置超时时间的方法，分别是：SetDeadline、SetReadDeadline 和 SetWriteDeadline。</li>
</ol>
<p>这三个方法的签名是一模一样的，只是名称不同罢了。它们都接受一个 time.Time 类型的参数，并都会返回一个 error 类型的结果。其中的 SetDeadline 方法是用来同时设置读操作超时和写操作超时的。<br>有一点需要特别注意，这三个方法都会针对任何正在进行以及未来将要进行的相应操作进行超时设定。<br>因此，如果你要在一个循环中进行读操作或写操作的话，最好在每次迭代中都进行一次超时设定。<br>否则，靠后的操作就有可能因触达超时时间而直接失败。另外，如果有必要，你应该再次调用它们并传入 time.Time 类型的零值来表达不再限定超时时间。</p>
<ol start="54">
<li>怎样优雅地停止基于 HTTP 协议的网络服务程序？<br>答：net/http.Server 类型有一个名为 Shutdown 的指针方法可以实现“优雅的停止”。也就是说，它可以在不中断任何正处在活动状态的连接的情况下平滑地关闭当前的服务器。</li>
</ol>
<p>它会先关闭所有的空闲连接，并一直等待。只有活动的连接变为空闲之后，它才会关闭它们。当所有的连接都被平滑地关闭之后，它会关闭当前的服务器并返回。当有错误发生时，它还会把相应的错误值返回。<br>另外，你还可以通过调用 Server 值的 RegisterOnShutdown 方法来注册可以在服务器即将关闭时被自动调用的函数。<br>更确切地说，当前服务器的 Shutdown 方法会以异步的方式调用如此注册的所有函数。我们可以利用这样的函数来通知长连接的客户端“连接即将关闭”。</p>
<ol start="55">
<li>runtime/trace 代码包的功用是什么？<br>答：简单来说，这个代码包是用来帮助 Go 程序实现内部跟踪操作的。其中的程序实体可以帮助我们记录程序中各个 goroutine 的状态、各种系统调用的状态，与 GC 有关的各种事件，以及内存相关和 CPU 相关的变化，等等。</li>
</ol>
<p>通过它们生成的跟踪记录可以通过 go tool trace 命令来查看。更具体的说明可以参看 runtime/trace 代码包的文档。<br>有了 runtime/trace 代码包，我们就可以为 Go 程序加装上可以满足个性化需求的跟踪器了。Go 语言标准库中有的代码包正是通过使用该包实现了自身的功能，例如 net/http/pprof 包。<br>好了，全部的思考题答案已经更新完了，你如果还有疑问，可以给我留言。祝你新春快乐，学习愉快。再见。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/15/yuque/Go%E6%A0%B8%E5%BF%8336%E8%AE%B2%E4%B8%AD50%E4%B8%AA%E6%80%9D%E8%80%83%E9%A2%98/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/Linux基础" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/yuque/Linux%E5%9F%BA%E7%A1%80/">Linux基础</a>
    </h1>
  

        
        <a href="/2020/05/15/yuque/Linux%E5%9F%BA%E7%A1%80/" class="archive-article-date">
  	<time datetime="2020-05-15T16:25:45.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>为了便于理解，本文从常用操作和概念开始讲起。虽然已经尽量做到简化，但是涉及到的内容还是有点多。在面试中，Linux 知识点相对于网络和操作系统等知识点而言不是那么重要，只需要重点掌握一些原理和命令即可。为了方便大家准备面试，在此先将一些比较重要的知识点列出来：</p>
<ul>
<li>能简单使用 cat，grep，cut 等命令进行一些操作；</li>
<li>文件系统相关的原理，inode 和 block 等概念，数据恢复；</li>
<li>硬链接与软链接；</li>
<li>进程管理相关，僵尸进程与孤儿进程，SIGCHLD 。</li>
</ul>
<h1 id="一、常用操作以及概念"><a href="#一、常用操作以及概念" class="headerlink" title="一、常用操作以及概念"></a>一、常用操作以及概念</h1><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ul>
<li>Tab：命令和文件名补全；</li>
<li>Ctrl+C：中断正在运行的程序；</li>
<li>Ctrl+D：结束键盘输入（End Of File，EOF）</li>
</ul>
<h2 id="求助"><a href="#求助" class="headerlink" title="求助"></a>求助</h2><h3 id="1-–help"><a href="#1-–help" class="headerlink" title="1. –help"></a>1. –help</h3><p>指令的基本用法与选项介绍。</p>
<h3 id="2-man"><a href="#2-man" class="headerlink" title="2. man"></a>2. man</h3><p>man 是 manual 的缩写，将指令的具体信息显示出来。<br>当执行 <code>man date</code> 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下：</p>
<table>
<thead>
<tr>
<th>代号</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>用户在 shell 环境中可以操作的指令或者可执行文件</td>
</tr>
<tr>
<td>5</td>
<td>配置文件</td>
</tr>
<tr>
<td>8</td>
<td>系统管理员可以使用的管理指令</td>
</tr>
</tbody></table>
<h3 id="3-info"><a href="#3-info" class="headerlink" title="3. info"></a>3. info</h3><p>info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以跳转。</p>
<h3 id="4-doc"><a href="#4-doc" class="headerlink" title="4. doc"></a>4. doc</h3><p>/usr/share/doc 存放着软件的一整套说明文件。</p>
<h2 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h2><h3 id="1-who"><a href="#1-who" class="headerlink" title="1. who"></a>1. who</h3><p>在关机前需要先使用 who 命令查看有没有其它用户在线。</p>
<h3 id="2-sync"><a href="#2-sync" class="headerlink" title="2. sync"></a>2. sync</h3><p>为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘，因此关机之前需要先进行 sync 同步操作。</p>
<h3 id="3-shutdown"><a href="#3-shutdown" class="headerlink" title="3. shutdown"></a>3. shutdown</h3><h1 id="shutdown-krhc-时间-信息"><a href="#shutdown-krhc-时间-信息" class="headerlink" title="shutdown [-krhc] 时间 [信息]"></a>shutdown [-krhc] 时间 [信息]</h1><p>-k ： 不会关机，只是发送警告信息，通知所有在线的用户<br>-r ： 将系统的服务停掉后就重新启动<br>-h ： 将系统的服务停掉后就立即关机<br>-c ： 取消已经在进行的 shutdown</p>
<h2 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h2><p>可以在环境变量 PATH 中声明可执行文件的路径，路径之间用 : 分隔。<br>/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin</p>
<h2 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h2><p>sudo 允许一般用户使用 root 可执行的命令，不过只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。</p>
<h2 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a>包管理工具</h2><p>RPM 和 DPKG 为最常见的两类软件包管理工具：</p>
<ul>
<li>RPM 全称为 Redhat Package Manager，最早由 Red Hat 公司制定实施，随后被 GNU 开源操作系统接受并成为许多 Linux 系统的既定软件标准。YUM 基于 RPM，具有依赖管理和软件升级功能。</li>
<li>与 RPM 竞争的是基于 Debian 操作系统的 DEB 软件包管理工具 DPKG，全称为 Debian Package，功能方面与 RPM 相似。</li>
</ul>
<h2 id="发行版"><a href="#发行版" class="headerlink" title="发行版"></a>发行版</h2><p>Linux 发行版是 Linux 内核及各种应用软件的集成版本。</p>
<table>
<thead>
<tr>
<th>基于的包管理工具</th>
<th>商业发行版</th>
<th>社区发行版</th>
</tr>
</thead>
<tbody><tr>
<td>RPM</td>
<td>Red Hat</td>
<td>Fedora / CentOS</td>
</tr>
<tr>
<td>DPKG</td>
<td>Ubuntu</td>
<td>Debian</td>
</tr>
</tbody></table>
<h2 id="VIM-三个模式"><a href="#VIM-三个模式" class="headerlink" title="VIM 三个模式"></a>VIM 三个模式</h2><p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/eaeb0094c063ed7dd4d645db69e9c9a80d38eff3/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f696d6167652d32303139313230393030323831383632362e706e67"><img src="https://camo.githubusercontent.com/eaeb0094c063ed7dd4d645db69e9c9a80d38eff3/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f696d6167652d32303139313230393030323831383632362e706e67#align=left&display=inline&height=530&margin=%5Bobject%20Object%5D&originHeight=530&originWidth=1176&status=done&style=none&width=1176"></a></p>
<ul>
<li>一般指令模式（Command mode）：VIM 的默认模式，可以用于移动游标查看内容；</li>
<li>编辑模式（Insert mode）：按下 “i” 等按键之后进入，可以对文本进行编辑；</li>
<li>指令列模式（Bottom-line mode）：按下 “:” 按键之后进入，用于保存退出等操作。</li>
</ul>
<p>在指令列模式下，有以下命令用于离开或者保存文件。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:w</td>
<td>写入磁盘</td>
</tr>
<tr>
<td>:w!</td>
<td>当文件为只读时，强制写入磁盘。到底能不能写入，与用户对该文件的权限有关</td>
</tr>
<tr>
<td>:q</td>
<td>离开</td>
</tr>
<tr>
<td>:q!</td>
<td>强制离开不保存</td>
</tr>
<tr>
<td>:wq</td>
<td>写入磁盘后离开</td>
</tr>
<tr>
<td>:wq!</td>
<td>强制写入磁盘后离开</td>
</tr>
</tbody></table>
<h2 id="GNU"><a href="#GNU" class="headerlink" title="GNU"></a>GNU</h2><p>GNU 计划，译为革奴计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议（GNU General Public License），包含了以下内容：</p>
<ul>
<li>以任何目的运行此程序的自由；</li>
<li>再复制的自由；</li>
<li>改进此程序，并公开发布改进的自由。</li>
</ul>
<h2 id="开源协议"><a href="#开源协议" class="headerlink" title="开源协议"></a>开源协议</h2><ul>
<li><a target="_blank" rel="noopener" href="https://choosealicense.com/">Choose an open source license</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html">如何选择开源许可证？</a></li>
</ul>
<h1 id="二、磁盘"><a href="#二、磁盘" class="headerlink" title="二、磁盘"></a>二、磁盘</h1><h2 id="磁盘接口"><a href="#磁盘接口" class="headerlink" title="磁盘接口"></a>磁盘接口</h2><h3 id="1-IDE"><a href="#1-IDE" class="headerlink" title="1. IDE"></a>1. IDE</h3><p>IDE（ATA）全称 Advanced Technology Attachment，接口速度最大为 133MB/s，因为并口线的抗干扰性太差，且排线占用空间较大，不利电脑内部散热，已逐渐被 SATA 所取代。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/ba738f96c9f39dc5b20b34502ea2c729c899d1a1/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f39323439313463302d363630632d346534612d626263302d3164663131343665373531362e6a7067"><img src="https://camo.githubusercontent.com/ba738f96c9f39dc5b20b34502ea2c729c899d1a1/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f39323439313463302d363630632d346534612d626263302d3164663131343665373531362e6a7067#align=left&display=inline&height=834&margin=%5Bobject%20Object%5D&originHeight=834&originWidth=1294&status=done&style=none&width=400"></a></p>
<h3 id="2-SATA"><a href="#2-SATA" class="headerlink" title="2. SATA"></a>2. SATA</h3><p>SATA 全称 Serial ATA，也就是使用串口的 ATA 接口，抗干扰性强，且对数据线的长度要求比 ATA 低很多，支持热插拔等功能。SATA-II 的接口速度为 300MiB/s，而 SATA-III 标准可达到 600MiB/s 的传输速度。SATA 的数据线也比 ATA 的细得多，有利于机箱内的空气流通，整理线材也比较方便。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/ec188986d5d6d4ed69fa90a753c95776d8ef11cc/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66396632613136622d343834332d343464312d393735392d6337343537373265396263662e6a7067"><img src="https://camo.githubusercontent.com/ec188986d5d6d4ed69fa90a753c95776d8ef11cc/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66396632613136622d343834332d343464312d393735392d6337343537373265396263662e6a7067#align=left&display=inline&height=138&margin=%5Bobject%20Object%5D&originHeight=138&originWidth=321&status=done&style=none&width=321"></a></p>
<h3 id="3-SCSI"><a href="#3-SCSI" class="headerlink" title="3. SCSI"></a>3. SCSI</h3><p>SCSI 全称是 Small Computer System Interface（小型机系统接口），SCSI 硬盘广为工作站以及个人电脑以及服务器所使用，因此会使用较为先进的技术，如碟片转速 15000rpm 的高转速，且传输时 CPU 占用率较低，但是单价也比相同容量的 ATA 及 SATA 硬盘更加昂贵。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/1e3d99079edb2926d3ad11d4ca42515f74536399/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66303537343032352d633531342d343966352d613539312d3664366137316632373166372e6a7067"><img src="https://camo.githubusercontent.com/1e3d99079edb2926d3ad11d4ca42515f74536399/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66303537343032352d633531342d343966352d613539312d3664366137316632373166372e6a7067#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&originHeight=221&originWidth=292&status=done&style=none&width=292"></a></p>
<h3 id="4-SAS"><a href="#4-SAS" class="headerlink" title="4. SAS"></a>4. SAS</h3><p>SAS（Serial Attached SCSI）是新一代的 SCSI 技术，和 SATA 硬盘相同，都是采取序列式技术以获得更高的传输速度，可达到 6Gb/s。此外也通过缩小连接线改善系统内部空间等。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/04b8624757d86632e09982e79256c939c41d357c/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f36373239626161302d353764372d343831372d623361612d3531386362636366383234632e6a7067"><img src="https://camo.githubusercontent.com/04b8624757d86632e09982e79256c939c41d357c/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f36373239626161302d353764372d343831372d623361612d3531386362636366383234632e6a7067#align=left&display=inline&height=128&margin=%5Bobject%20Object%5D&originHeight=128&originWidth=324&status=done&style=none&width=324"></a></p>
<h2 id="磁盘的文件名"><a href="#磁盘的文件名" class="headerlink" title="磁盘的文件名"></a>磁盘的文件名</h2><p>Linux 中每个硬件都被当做一个文件，包括磁盘。磁盘以磁盘接口类型进行命名，常见磁盘的文件名如下：</p>
<ul>
<li>IDE 磁盘：/dev/hd[a-d]</li>
<li>SATA/SCSI/SAS 磁盘：/dev/sd[a-p]</li>
</ul>
<p>其中文件名后面的序号的确定与系统检测到磁盘的顺序有关，而与磁盘所插入的插槽位置无关。</p>
<h1 id="三、分区"><a href="#三、分区" class="headerlink" title="三、分区"></a>三、分区</h1><h2 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h2><p>磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。</p>
<h3 id="1-MBR"><a href="#1-MBR" class="headerlink" title="1. MBR"></a>1. MBR</h3><p>MBR 中，第一个扇区最重要，里面有主要开机记录（Master boot record, MBR）及分区表（partition table），其中主要开机记录占 446 bytes，分区表占 64 bytes。<br>分区表只有 64 bytes，最多只能存储 4 个分区，这 4 个分区为主分区（Primary）和扩展分区（Extended）。其中扩展分区只有一个，它使用其它扇区来记录额外的分区表，因此通过扩展分区可以分出更多分区，这些分区称为逻辑分区。<br>Linux 也把分区当成文件，分区文件的命名方式为：磁盘文件名 + 编号，例如 /dev/sda1。注意，逻辑分区的编号从 5 开始。</p>
<h3 id="2-GPT"><a href="#2-GPT" class="headerlink" title="2. GPT"></a>2. GPT</h3><p>扇区是磁盘的最小存储单位，旧磁盘的扇区大小通常为 512 bytes，而最新的磁盘支持 4 k。GPT 为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logical Block Address, LBA），LBA 默认大小为 512 bytes。<br>GPT 第 1 个区块记录了主要开机记录（MBR），紧接着是 33 个区块记录分区信息，并把最后的 33 个区块用于对分区信息进行备份。这 33 个区块第一个为 GPT 表头纪录，这个部份纪录了分区表本身的位置与大小和备份分区的位置，同时放置了分区表的校验码 (CRC32)，操作系统可以根据这个校验码来判断 GPT 是否正确。若有错误，可以使用备份分区进行恢复。<br>GPT 没有扩展分区概念，都是主分区，每个 LBA 可以分 4 个分区，因此总共可以分 4 * 32 = 128 个分区。<br>MBR 不支持 2.2 TB 以上的硬盘，GPT 则最多支持到 2 TB = 8 ZB。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/d21bfea4ec86b0e89d4b2276b53a5b7e43b63bf5/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f475549445f506172746974696f6e5f5461626c655f536368656d652e7376672e706e67"><img src="https://camo.githubusercontent.com/d21bfea4ec86b0e89d4b2276b53a5b7e43b63bf5/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f475549445f506172746974696f6e5f5461626c655f536368656d652e7376672e706e67#align=left&display=inline&height=550&margin=%5Bobject%20Object%5D&originHeight=550&originWidth=400&status=done&style=none&width=400"></a></p>
<h2 id="开机检测程序"><a href="#开机检测程序" class="headerlink" title="开机检测程序"></a>开机检测程序</h2><h3 id="1-BIOS"><a href="#1-BIOS" class="headerlink" title="1. BIOS"></a>1. BIOS</h3><p>BIOS（Basic Input/Output System，基本输入输出系统），它是一个固件（嵌入在硬件中的软件），BIOS 程序存放在断电后内容不会丢失的只读内存中。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/56705b6035d5ecd0a26a77bd974654a3abba636b/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35303833316136662d323737372d343665612d613537312d3239663233633835636332312e6a7067"><img src="https://camo.githubusercontent.com/56705b6035d5ecd0a26a77bd974654a3abba636b/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35303833316136662d323737372d343665612d613537312d3239663233633835636332312e6a7067#align=left&display=inline&height=172&margin=%5Bobject%20Object%5D&originHeight=172&originWidth=247&status=done&style=none&width=247"></a></p>
<p>BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的主要开机记录（MBR），由主要开机记录（MBR）执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。<br>主要开机记录（MBR）中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动开机管理程序时，就可以通过选单选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。<br>下图中，第一扇区的主要开机记录（MBR）中的开机管理程序提供了两个选单：M1、M2，M1 指向了 Windows 操作系统，而 M2 指向其它分区的启动扇区，里面包含了另外一个开机管理程序，提供了一个指向 Linux 的选单。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/0798d5e852f41cb1c1d31fdcbd4b1d93489a6468/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66393030663236362d613332332d343262322d626334332d3231386664623838313161382e6a7067"><img src="https://camo.githubusercontent.com/0798d5e852f41cb1c1d31fdcbd4b1d93489a6468/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f66393030663236362d613332332d343262322d626334332d3231386664623838313161382e6a7067#align=left&display=inline&height=390&margin=%5Bobject%20Object%5D&originHeight=390&originWidth=642&status=done&style=none&width=600"></a></p>
<p>安装多重引导，最好先安装 Windows 再安装 Linux。因为安装 Windows 时会覆盖掉主要开机记录（MBR），而 Linux 可以选择将开机管理程序安装在主要开机记录（MBR）或者其它分区的启动扇区，并且可以设置开机管理程序的选单。</p>
<h3 id="2-UEFI"><a href="#2-UEFI" class="headerlink" title="2. UEFI"></a>2. UEFI</h3><p>BIOS 不可以读取 GPT 分区表，而 UEFI 可以。</p>
<h1 id="四、文件系统"><a href="#四、文件系统" class="headerlink" title="四、文件系统"></a>四、文件系统</h1><h2 id="分区与文件系统"><a href="#分区与文件系统" class="headerlink" title="分区与文件系统"></a>分区与文件系统</h2><p>对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统。</p>
<h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><p>最主要的几个组成部分如下：</p>
<ul>
<li>inode：一个文件占用一个 inode，记录文件的属性，同时记录此文件的内容所在的 block 编号；</li>
<li>block：记录文件的内容，文件太大时，会占用多个 block。</li>
</ul>
<p>除此之外还包括：</p>
<ul>
<li>superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等；</li>
<li>block bitmap：记录 block 是否被使用的位图。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/af36cfca3a3122a49b13b40ec7ec4e54bf15b4c6/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f4253445f6469736b2e706e67"><img src="https://camo.githubusercontent.com/af36cfca3a3122a49b13b40ec7ec4e54bf15b4c6/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f4253445f6469736b2e706e67#align=left&display=inline&height=509&margin=%5Bobject%20Object%5D&originHeight=509&originWidth=1768&status=done&style=none&width=800"></a></p>
<h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><p>对于 Ext2 文件系统，当要读取一个文件的内容时，先在 inode 中查找文件内容所在的所有 block，然后把所有 block 的内容读出来。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/d81f8e4f37dc78a5f804a1dbe51c57a26685107f/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f31326136356363362d323065302d343730362d396665362d3362613439343133643766362e706e67"><img src="https://camo.githubusercontent.com/d81f8e4f37dc78a5f804a1dbe51c57a26685107f/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f31326136356363362d323065302d343730362d396665362d3362613439343133643766362e706e67#align=left&display=inline&height=440&margin=%5Bobject%20Object%5D&originHeight=440&originWidth=783&status=done&style=none&width=783"></a></p>
<p>而对于 FAT 文件系统，它没有 inode，每个 block 中存储着下一个 block 的编号。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/9e96d72b5464a3db0c8026716079bc44c9cf462a/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35623731386538362d373130322d346262362d386361352d6431646437393135333063352e706e67"><img src="https://camo.githubusercontent.com/9e96d72b5464a3db0c8026716079bc44c9cf462a/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35623731386538362d373130322d346262362d386361352d6431646437393135333063352e706e67#align=left&display=inline&height=339&margin=%5Bobject%20Object%5D&originHeight=339&originWidth=798&status=done&style=none&width=798"></a></p>
<h2 id="磁盘碎片"><a href="#磁盘碎片" class="headerlink" title="磁盘碎片"></a>磁盘碎片</h2><p>指一个文件内容所在的 block 过于分散，导致磁盘磁头移动距离过大，从而降低磁盘读写性能。</p>
<h2 id="block"><a href="#block" class="headerlink" title="block"></a>block</h2><p>在 Ext2 文件系统中所支持的 block 大小有 1K，2K 及 4K 三种，不同的大小限制了单个文件和文件系统的最大大小。</p>
<table>
<thead>
<tr>
<th>大小</th>
<th>1KB</th>
<th>2KB</th>
<th>4KB</th>
</tr>
</thead>
<tbody><tr>
<td>最大单一文件</td>
<td>16GB</td>
<td>256GB</td>
<td>2TB</td>
</tr>
<tr>
<td>最大文件系统</td>
<td>2TB</td>
<td>8TB</td>
<td>16TB</td>
</tr>
</tbody></table>
<p>一个 block 只能被一个文件所使用，未使用的部分直接浪费了。因此如果需要存储大量的小文件，那么最好选用比较小的 block。</p>
<h2 id="inode"><a href="#inode" class="headerlink" title="inode"></a>inode</h2><p>inode 具体包含以下信息：</p>
<ul>
<li>权限 (read/write/excute)；</li>
<li>拥有者与群组 (owner/group)；</li>
<li>容量；</li>
<li>建立或状态改变的时间 (ctime)；</li>
<li>最近读取时间 (atime)；</li>
<li>最近修改时间 (mtime)；</li>
<li>定义文件特性的旗标 (flag)，如 SetUID…；</li>
<li>该文件真正内容的指向 (pointer)。</li>
</ul>
<p>inode 具有以下特点：</p>
<ul>
<li>每个 inode 大小均固定为 128 bytes (新的 ext4 与 xfs 可设定到 256 bytes)；</li>
<li>每个文件都仅会占用一个 inode。</li>
</ul>
<p>inode 中记录了文件内容所在的 block 编号，但是每个 block 非常小，一个大文件随便都需要几十万的 block。而一个 inode 大小有限，无法直接引用这么多 block 编号。因此引入了间接、双间接、三间接引用。间接引用让 inode 记录的引用 block 块记录引用信息。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/e1ff522291af9d77a26e58870f3627b5527b89a3/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f696e6f64655f776974685f7369676e6174757265732e6a7067"><img src="https://camo.githubusercontent.com/e1ff522291af9d77a26e58870f3627b5527b89a3/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f696e6f64655f776974685f7369676e6174757265732e6a7067#align=left&display=inline&height=870&margin=%5Bobject%20Object%5D&originHeight=870&originWidth=1379&status=done&style=none&width=600"></a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>建立一个目录时，会分配一个 inode 与至少一个 block。block 记录的内容是目录下所有文件的 inode 编号以及文件名。<br>可以看到文件的 inode 本身不记录文件名，文件名记录在目录中，因此新增文件、删除文件、更改文件名这些操作与目录的写权限有关。</p>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><p>如果突然断电，那么文件系统会发生错误，例如断电前只修改了 block bitmap，而还没有将数据真正写入 block 中。<br>ext3/ext4 文件系统引入了日志功能，可以利用日志来修复文件系统。</p>
<h2 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h2><p>挂载利用目录作为文件系统的进入点，也就是说，进入目录之后就可以读取文件系统的数据。</p>
<h2 id="目录配置"><a href="#目录配置" class="headerlink" title="目录配置"></a>目录配置</h2><p>为了使不同 Linux 发行版本的目录结构保持一致性，Filesystem Hierarchy Standard (FHS) 规定了 Linux 的目录结构。最基础的三个目录如下：</p>
<ul>
<li>/ (root, 根目录)</li>
<li>/usr (unix software resource)：所有系统默认软件都会安装到这个目录；</li>
<li>/var (variable)：存放系统或程序运行过程中的数据文件。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/b12257cb7875cb1263998e35d1826d5032484d25/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f6c696e75782d66696c6573797374656d2e706e67"><img src="https://camo.githubusercontent.com/b12257cb7875cb1263998e35d1826d5032484d25/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f6c696e75782d66696c6573797374656d2e706e67#align=left&display=inline&height=313&margin=%5Bobject%20Object%5D&originHeight=313&originWidth=660&status=done&style=none&width=660"></a></p>
<h1 id="五、文件"><a href="#五、文件" class="headerlink" title="五、文件"></a>五、文件</h1><h2 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h2><p>用户分为三种：文件拥有者、群组以及其它人，对不同的用户有不同的文件权限。<br>使用 ls 查看一个文件时，会显示一个文件的信息，例如 <code>drwxr-xr-x 3 root root 17 May 6 00:14 .config</code>，对这个信息的解释如下：</p>
<ul>
<li>drwxr-xr-x：文件类型以及权限，第 1 位为文件类型字段，后 9 位为文件权限字段</li>
<li>3：链接数</li>
<li>root：文件拥有者</li>
<li>root：所属群组</li>
<li>17：文件大小</li>
<li>May 6 00:14：文件最后被修改的时间</li>
<li>.config：文件名</li>
</ul>
<p>常见的文件类型及其含义有：</p>
<ul>
<li>d：目录</li>
<li>-：文件</li>
<li>l：链接文件</li>
</ul>
<p>9 位的文件权限字段中，每 3 个为一组，共 3 组，每一组分别代表对文件拥有者、所属群组以及其它人的文件权限。一组权限中的 3 位分别为 r、w、x 权限，表示可读、可写、可执行。<br>文件时间有以下三种：</p>
<ul>
<li>modification time (mtime)：文件的内容更新就会更新；</li>
<li>status time (ctime)：文件的状态（权限、属性）更新就会更新；</li>
<li>access time (atime)：读取文件时就会更新。</li>
</ul>
<h2 id="文件与目录的基本操作"><a href="#文件与目录的基本操作" class="headerlink" title="文件与目录的基本操作"></a>文件与目录的基本操作</h2><h3 id="1-ls"><a href="#1-ls" class="headerlink" title="1. ls"></a>1. ls</h3><p>列出文件或者目录的信息，目录的信息就是其中包含的文件。</p>
<h1 id="ls-aAdfFhilnrRSt-file-dir"><a href="#ls-aAdfFhilnrRSt-file-dir" class="headerlink" title="ls [-aAdfFhilnrRSt] file|dir"></a>ls [-aAdfFhilnrRSt] file|dir</h1><p>-a ：列出全部的文件<br>-d ：仅列出目录本身<br>-l ：以长数据串行列出，包含文件的属性与权限等等数据</p>
<h3 id="2-cd"><a href="#2-cd" class="headerlink" title="2. cd"></a>2. cd</h3><p>更换当前目录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd [相对路径或绝对路径]</span><br></pre></td></tr></table></figure>

<h3 id="3-mkdir"><a href="#3-mkdir" class="headerlink" title="3. mkdir"></a>3. mkdir</h3><p>创建目录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># mkdir [-mp] 目录名称</span><br><span class="line">-m ：配置目录权限</span><br><span class="line">-p ：递归创建目录</span><br></pre></td></tr></table></figure>

<h3 id="4-rmdir"><a href="#4-rmdir" class="headerlink" title="4. rmdir"></a>4. rmdir</h3><p>删除目录，目录必须为空。<br>rmdir [-p] 目录名称<br>-p ：递归删除目录</p>
<h3 id="5-touch"><a href="#5-touch" class="headerlink" title="5. touch"></a>5. touch</h3><p>更新文件时间或者建立新文件。</p>
<h1 id="touch-acdmt-filename"><a href="#touch-acdmt-filename" class="headerlink" title="touch [-acdmt] filename"></a>touch [-acdmt] filename</h1><p>-a ： 更新 atime<br>-c ： 更新 ctime，若该文件不存在则不建立新文件<br>-m ： 更新 mtime<br>-d ： 后面可以接更新日期而不使用当前日期，也可以使用 –date=”日期或时间”<br>-t ： 后面可以接更新时间而不使用当前时间，格式为[YYYYMMDDhhmm]</p>
<h3 id="6-cp"><a href="#6-cp" class="headerlink" title="6. cp"></a>6. cp</h3><p>复制文件。如果源文件有两个以上，则目的文件一定要是目录才行。<br>cp [-adfilprsu] source destination<br>-a ：相当于 -dr –preserve=all<br>-d ：若来源文件为链接文件，则复制链接文件属性而非文件本身<br>-i ：若目标文件已经存在时，在覆盖前会先询问<br>-p ：连同文件的属性一起复制过去<br>-r ：递归复制<br>-u ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制<br>–preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了</p>
<h3 id="7-rm"><a href="#7-rm" class="headerlink" title="7. rm"></a>7. rm</h3><p>删除文件。</p>
<h1 id="rm-fir-文件或目录"><a href="#rm-fir-文件或目录" class="headerlink" title="rm [-fir] 文件或目录"></a>rm [-fir] 文件或目录</h1><p>-r ：递归删除</p>
<h3 id="8-mv"><a href="#8-mv" class="headerlink" title="8. mv"></a>8. mv</h3><p>移动文件。</p>
<h1 id="mv-fiu-source-destination"><a href="#mv-fiu-source-destination" class="headerlink" title="mv [-fiu] source destination"></a>mv [-fiu] source destination</h1><h1 id="mv-options-source1-source2-source3-…-directory"><a href="#mv-options-source1-source2-source3-…-directory" class="headerlink" title="mv [options] source1 source2 source3 …. directory"></a>mv [options] source1 source2 source3 …. directory</h1><p>-f ： force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖</p>
<h2 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h2><p>可以将一组权限用数字来表示，此时一组权限的 3 个位当做二进制数字的位，从左到右每个位的权值为 4、2、1，即每个权限对应的数字权值为 r : 4、w : 2、x : 1。</p>
<h1 id="chmod-R-xyz-dirname-filename"><a href="#chmod-R-xyz-dirname-filename" class="headerlink" title="chmod [-R] xyz dirname/filename"></a>chmod [-R] xyz dirname/filename</h1><p>示例：将 .bashrc 文件的权限修改为 -rwxr-xr–。</p>
<h1 id="chmod-754-bashrc"><a href="#chmod-754-bashrc" class="headerlink" title="chmod 754 .bashrc"></a>chmod 754 .bashrc</h1><p>也可以使用符号来设定权限。</p>
<h1 id="chmod-ugoa-rwx-dirname-filename"><a href="#chmod-ugoa-rwx-dirname-filename" class="headerlink" title="chmod [ugoa]  [+-=] [rwx] dirname/filename"></a>chmod [ugoa]  [+-=] [rwx] dirname/filename</h1><ul>
<li>u：拥有者</li>
<li>g：所属群组</li>
<li>o：其他人</li>
<li>a：所有人</li>
<li>+：添加权限</li>
<li>-：移除权限</li>
<li>=：设定权限<br>示例：为 .bashrc 文件的所有用户添加写权限。</li>
</ul>
<h1 id="chmod-a-w-bashrc"><a href="#chmod-a-w-bashrc" class="headerlink" title="chmod a+w .bashrc"></a>chmod a+w .bashrc</h1><h2 id="默认权限"><a href="#默认权限" class="headerlink" title="默认权限"></a>默认权限</h2><ul>
<li>文件默认权限：文件默认没有可执行权限，因此为 666，也就是 -rw-rw-rw- 。</li>
<li>目录默认权限：目录必须要能够进入，也就是必须拥有可执行权限，因此为 777 ，也就是 drwxrwxrwx。</li>
</ul>
<p>可以通过 umask 设置或者查看默认权限，通常以掩码的形式来表示，例如 002 表示其它用户的权限去除了一个 2 的权限，也就是写权限，因此建立新文件时默认的权限为 -rw-rw-r–。</p>
<h2 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h2><p>文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。因此，拥有文件的 w 权限并不能对文件名进行修改。<br>目录存储文件列表，一个目录的权限也就是对其文件列表的权限。因此，目录的 r 权限表示可以读取文件列表；w 权限表示可以修改文件列表，具体来说，就是添加删除文件，对文件名进行修改；x 权限可以让该目录成为工作目录，x 权限是 r 和 w 权限的基础，如果不能使一个目录成为工作目录，也就没办法读取文件列表以及对文件列表进行修改了。</p>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/160b6c73de6ad65d706650af3e95a7ae6f2be4d6/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f31653436666430332d306364612d346436302d396231632d3063323536656461663662322e706e67"><img src="https://camo.githubusercontent.com/160b6c73de6ad65d706650af3e95a7ae6f2be4d6/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f31653436666430332d306364612d346436302d396231632d3063323536656461663662322e706e67#align=left&display=inline&height=329&margin=%5Bobject%20Object%5D&originHeight=329&originWidth=699&status=done&style=none&width=699"></a></p>
<h1 id="ln-sf-source-filename-dist-filename"><a href="#ln-sf-source-filename-dist-filename" class="headerlink" title="ln [-sf] source_filename dist_filename"></a>ln [-sf] source_filename dist_filename</h1><p>-s ：默认是实体链接，加 -s 为符号链接<br>-f ：如果目标文件存在时，先删除目标文件</p>
<h3 id="1-实体链接"><a href="#1-实体链接" class="headerlink" title="1. 实体链接"></a>1. 实体链接</h3><p>在目录下创建一个条目，记录着文件名与 inode 编号，这个 inode 就是源文件的 inode。<br>删除任意一个条目，文件还是存在，只要引用数量不为 0。<br>有以下限制：不能跨越文件系统、不能对目录进行链接。</p>
<h1 id="ln-etc-crontab"><a href="#ln-etc-crontab" class="headerlink" title="ln /etc/crontab ."></a>ln /etc/crontab .</h1><h1 id="ll-i-etc-crontab-crontab"><a href="#ll-i-etc-crontab-crontab" class="headerlink" title="ll -i /etc/crontab crontab"></a>ll -i /etc/crontab crontab</h1><p>34474855 -rw-r–r–. 2 root root 451 Jun 10 2014 crontab<br>34474855 -rw-r–r–. 2 root root 451 Jun 10 2014 /etc/crontab</p>
<h3 id="2-符号链接"><a href="#2-符号链接" class="headerlink" title="2. 符号链接"></a>2. 符号链接</h3><p>符号链接文件保存着源文件所在的绝对路径，在读取时会定位到源文件上，可以理解为 Windows 的快捷方式。<br>当源文件被删除了，链接文件就打不开了。<br>因为记录的是路径，所以可以为目录建立符号链接。</p>
<h1 id="ll-i-etc-crontab-root-crontab2"><a href="#ll-i-etc-crontab-root-crontab2" class="headerlink" title="ll -i /etc/crontab /root/crontab2"></a>ll -i /etc/crontab /root/crontab2</h1><p>34474855 -rw-r–r–. 2 root root 451 Jun 10 2014 /etc/crontab<br>53745909 lrwxrwxrwx. 1 root root 12 Jun 23 22:31 /root/crontab2 -&gt; /etc/crontab</p>
<h2 id="获取文件内容"><a href="#获取文件内容" class="headerlink" title="获取文件内容"></a>获取文件内容</h2><h3 id="1-cat"><a href="#1-cat" class="headerlink" title="1. cat"></a>1. cat</h3><p>取得文件内容。</p>
<h1 id="cat-AbEnTv-filename"><a href="#cat-AbEnTv-filename" class="headerlink" title="cat [-AbEnTv] filename"></a>cat [-AbEnTv] filename</h1><p>-n ：打印出行号，连同空白行也会有行号，-b 不会</p>
<h3 id="2-tac"><a href="#2-tac" class="headerlink" title="2. tac"></a>2. tac</h3><p>是 cat 的反向操作，从最后一行开始打印。</p>
<h3 id="3-more"><a href="#3-more" class="headerlink" title="3. more"></a>3. more</h3><p>和 cat 不同的是它可以一页一页查看文件内容，比较适合大文件的查看。</p>
<h3 id="4-less"><a href="#4-less" class="headerlink" title="4. less"></a>4. less</h3><p>和 more 类似，但是多了一个向前翻页的功能。</p>
<h3 id="5-head"><a href="#5-head" class="headerlink" title="5. head"></a>5. head</h3><p>取得文件前几行。</p>
<h1 id="head-n-number-filename"><a href="#head-n-number-filename" class="headerlink" title="head [-n number] filename"></a>head [-n number] filename</h1><p>-n ：后面接数字，代表显示几行的意思</p>
<h3 id="6-tail"><a href="#6-tail" class="headerlink" title="6. tail"></a>6. tail</h3><p>是 head 的反向操作，只是取得是后几行。</p>
<h3 id="7-od"><a href="#7-od" class="headerlink" title="7. od"></a>7. od</h3><p>以字符或者十六进制的形式显示二进制文件。</p>
<h2 id="指令与文件搜索"><a href="#指令与文件搜索" class="headerlink" title="指令与文件搜索"></a>指令与文件搜索</h2><h3 id="1-which"><a href="#1-which" class="headerlink" title="1. which"></a>1. which</h3><p>指令搜索。</p>
<h1 id="which-a-command"><a href="#which-a-command" class="headerlink" title="which [-a] command"></a>which [-a] command</h1><p>-a ：将所有指令列出，而不是只列第一个</p>
<h3 id="2-whereis"><a href="#2-whereis" class="headerlink" title="2. whereis"></a>2. whereis</h3><p>文件搜索。速度比较快，因为它只搜索几个特定的目录。</p>
<h1 id="whereis-bmsu-dirname-filename"><a href="#whereis-bmsu-dirname-filename" class="headerlink" title="whereis [-bmsu] dirname/filename"></a>whereis [-bmsu] dirname/filename</h1><h3 id="3-locate"><a href="#3-locate" class="headerlink" title="3. locate"></a>3. locate</h3><p>文件搜索。可以用关键字或者正则表达式进行搜索。<br>locate 使用 /var/lib/mlocate/ 这个数据库来进行搜索，它存储在内存中，并且每天更新一次，所以无法用 locate 搜索新建的文件。可以使用 updatedb 来立即更新数据库。</p>
<h1 id="locate-ir-keyword"><a href="#locate-ir-keyword" class="headerlink" title="locate [-ir] keyword"></a>locate [-ir] keyword</h1><p>-r：正则表达式</p>
<h3 id="4-find"><a href="#4-find" class="headerlink" title="4. find"></a>4. find</h3><p>文件搜索。可以使用文件的属性和权限进行搜索。</p>
<h1 id="find-basedir-option"><a href="#find-basedir-option" class="headerlink" title="find [basedir] [option]"></a>find [basedir] [option]</h1><p>example: find . -name “shadow*“<br><strong>① 与时间有关的选项</strong><br>-mtime  n ：列出在 n 天前的那一天修改过内容的文件<br>-mtime +n ：列出在 n 天之前 (不含 n 天本身) 修改过内容的文件<br>-mtime -n ：列出在 n 天之内 (含 n 天本身) 修改过内容的文件<br>-newer file ： 列出比 file 更新的文件<br>+4、4 和 -4 的指示的时间范围如下：<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/3cb29ecc46909bda3df311755be91fc8e113c509/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f36353866633565372d373963302d343234372d393434352d6436396266313934633533392e706e67"><img src="https://camo.githubusercontent.com/3cb29ecc46909bda3df311755be91fc8e113c509/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f36353866633565372d373963302d343234372d393434352d6436396266313934633533392e706e67#align=left&display=inline&height=162&margin=%5Bobject%20Object%5D&originHeight=162&originWidth=524&status=done&style=none&width=524"></a></p>
<p><strong>② 与文件拥有者和所属群组有关的选项</strong><br>-uid n<br>-gid n<br>-user name<br>-group name<br>-nouser ：搜索拥有者不存在 /etc/passwd 的文件<br>-nogroup：搜索所属群组不存在于 /etc/group 的文件<br><strong>③ 与文件权限和名称有关的选项</strong><br>-name filename<br>-size [+-]SIZE：搜寻比 SIZE 还要大 (+) 或小 (-) 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表 1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k<br>-type TYPE<br>-perm mode  ：搜索权限等于 mode 的文件<br>-perm -mode ：搜索权限包含 mode 的文件<br>-perm /mode ：搜索权限包含任一 mode 的文件</p>
<h1 id="六、压缩与打包"><a href="#六、压缩与打包" class="headerlink" title="六、压缩与打包"></a>六、压缩与打包</h1><h2 id="压缩文件名"><a href="#压缩文件名" class="headerlink" title="压缩文件名"></a>压缩文件名</h2><p>Linux 底下有很多压缩文件名，常见的如下：</p>
<table>
<thead>
<tr>
<th>扩展名</th>
<th>压缩程序</th>
</tr>
</thead>
<tbody><tr>
<td>*.Z</td>
<td>compress</td>
</tr>
<tr>
<td>*.zip</td>
<td>zip</td>
</tr>
<tr>
<td>*.gz</td>
<td>gzip</td>
</tr>
<tr>
<td>*.bz2</td>
<td>bzip2</td>
</tr>
<tr>
<td>*.xz</td>
<td>xz</td>
</tr>
<tr>
<td>*.tar</td>
<td>tar 程序打包的数据，没有经过压缩</td>
</tr>
<tr>
<td>*.tar.gz</td>
<td>tar 程序打包的文件，经过 gzip 的压缩</td>
</tr>
<tr>
<td>*.tar.bz2</td>
<td>tar 程序打包的文件，经过 bzip2 的压缩</td>
</tr>
<tr>
<td>*.tar.xz</td>
<td>tar 程序打包的文件，经过 xz 的压缩</td>
</tr>
</tbody></table>
<h2 id="压缩指令"><a href="#压缩指令" class="headerlink" title="压缩指令"></a>压缩指令</h2><h3 id="1-gzip"><a href="#1-gzip" class="headerlink" title="1. gzip"></a>1. gzip</h3><p>gzip 是 Linux 使用最广的压缩指令，可以解开 compress、zip 与 gzip 所压缩的文件。<br>经过 gzip 压缩过，源文件就不存在了。<br>有 9 个不同的压缩等级可以使用。<br>可以使用 zcat、zmore、zless 来读取压缩文件的内容。<br>$ gzip [-cdtv#] filename<br>-c ：将压缩的数据输出到屏幕上<br>-d ：解压缩<br>-t ：检验压缩文件是否出错<br>-v ：显示压缩比等信息<br>-# ： # 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6</p>
<h3 id="2-bzip2"><a href="#2-bzip2" class="headerlink" title="2. bzip2"></a>2. bzip2</h3><p>提供比 gzip 更高的压缩比。<br>查看命令：bzcat、bzmore、bzless、bzgrep。<br>$ bzip2 [-cdkzv#] filename<br>-k ：保留源文件</p>
<h3 id="3-xz"><a href="#3-xz" class="headerlink" title="3. xz"></a>3. xz</h3><p>提供比 bzip2 更佳的压缩比。<br>可以看到，gzip、bzip2、xz 的压缩比不断优化。不过要注意的是，压缩比越高，压缩的时间也越长。<br>查看命令：xzcat、xzmore、xzless、xzgrep。<br>$ xz [-dtlkc#] filename</p>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>压缩指令只能对一个文件进行压缩，而打包能够将多个文件打包成一个大文件。tar 不仅可以用于打包，也可以使用 gzip、bzip2、xz 将打包文件进行压缩。<br>$ tar [-z|-j|-J] [cv] [-f 新建的 tar 文件] filename…  ==打包压缩<br>$ tar [-z|-j|-J] [tv] [-f 已有的 tar 文件]              ==查看<br>$ tar [-z|-j|-J] [xv] [-f 已有的 tar 文件] [-C 目录]    ==解压缩<br>-z ：使用 zip；<br>-j ：使用 bzip2；<br>-J ：使用 xz；<br>-c ：新建打包文件；<br>-t ：查看打包文件里面有哪些文件；<br>-x ：解打包或解压缩的功能；<br>-v ：在压缩/解压缩的过程中，显示正在处理的文件名；<br>-f : filename：要处理的文件；<br>-C 目录 ： 在特定目录解压缩。</p>
<table>
<thead>
<tr>
<th>使用方式</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>打包压缩</td>
<td>tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</td>
</tr>
<tr>
<td>查 看</td>
<td>tar -jtv -f filename.tar.bz2</td>
</tr>
<tr>
<td>解压缩</td>
<td>tar -jxv -f filename.tar.bz2 -C 要解压缩的目录</td>
</tr>
</tbody></table>
<h1 id="七、Bash"><a href="#七、Bash" class="headerlink" title="七、Bash"></a>七、Bash</h1><p>可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。</p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>命令历史：记录使用过的命令</li>
<li>命令与文件补全：快捷键：tab</li>
<li>命名别名：例如 ll 是 ls -al 的别名</li>
<li>shell scripts</li>
<li>通配符：例如 ls -l /usr/bin/X* 列出 /usr/bin 下面所有以 X 开头的文件</li>
</ul>
<h2 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h2><p>对一个变量赋值直接使用 =。<br>对变量取用需要在变量前加上 $ ，也可以用 ${} 的形式；<br>输出变量使用 echo 命令。<br>$ x=abc<br>$ echo $x<br>$ echo ${x}<br>变量内容如果有空格，必须使用双引号或者单引号。</p>
<ul>
<li>双引号内的特殊字符可以保留原本特性，例如 x=”lang is $LANG”，则 x 的值为 lang is zh_TW.UTF-8；</li>
<li>单引号内的特殊字符就是特殊字符本身，例如 x=’lang is $LANG’，则 x 的值为 lang is $LANG。</li>
</ul>
<p>可以使用 <code>指令</code> 或者 $(指令) 的方式将指令的执行结果赋值给变量。例如 version=$(uname -r)，则 version 的值为 4.15.0-22-generic。<br>可以使用 export 命令将自定义变量转成环境变量，环境变量可以在子程序中使用，所谓子程序就是由当前 Bash 而产生的子 Bash。<br>Bash 的变量可以声明为数组和整数数字。注意数字类型没有浮点数。如果不进行声明，默认是字符串类型。变量的声明使用 declare 命令：<br>$ declare [-aixr] variable<br>-a ： 定义为数组类型<br>-i ： 定义为整数类型<br>-x ： 定义为环境变量<br>-r ： 定义为 readonly 类型<br>使用 [ ] 来对数组进行索引操作：<br>$ array[1]=a<br>$ array[2]=b<br>$ echo ${array[1]}</p>
<h2 id="指令搜索顺序"><a href="#指令搜索顺序" class="headerlink" title="指令搜索顺序"></a>指令搜索顺序</h2><ul>
<li>以绝对或相对路径来执行指令，例如 /bin/ls 或者 ./ls ；</li>
<li>由别名找到该指令来执行；</li>
<li>由 Bash 内置的指令来执行；</li>
<li>按 $PATH 变量指定的搜索路径的顺序找到第一个指令来执行。</li>
</ul>
<h2 id="数据流重定向"><a href="#数据流重定向" class="headerlink" title="数据流重定向"></a>数据流重定向</h2><p>重定向指的是使用文件代替标准输入、标准输出和标准错误输出。</p>
<table>
<thead>
<tr>
<th>1</th>
<th>代码</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td>标准输入 (stdin)</td>
<td>0</td>
<td>&lt; 或 &lt;&lt;</td>
</tr>
<tr>
<td>标准输出 (stdout)</td>
<td>1</td>
<td>&gt; 或 &gt;&gt;</td>
</tr>
<tr>
<td>标准错误输出 (stderr)</td>
<td>2</td>
<td>2&gt; 或 2&gt;&gt;</td>
</tr>
</tbody></table>
<p>其中，有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。<br>可以将不需要的标准输出以及标准错误输出重定向到 /dev/null，相当于扔进垃圾箱。<br>如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2&gt;&amp;1 表示将标准错误输出转换为标准输出。<br>$ find /home -name .bashrc &gt; list 2&gt;&amp;1</p>
<h1 id="八、管道指令"><a href="#八、管道指令" class="headerlink" title="八、管道指令"></a>八、管道指令</h1><p>管道是将一个命令的标准输出作为另一个命令的标准输入，在数据需要经过多个步骤的处理之后才能得到我们想要的内容时就可以使用管道。<br>在命令之间使用 | 分隔各个管道命令。<br>$ ls -al /etc | less</p>
<h2 id="提取指令"><a href="#提取指令" class="headerlink" title="提取指令"></a>提取指令</h2><p>cut 对数据进行切分，取出想要的部分。<br>切分过程一行一行地进行。<br>$ cut<br>-d ：分隔符<br>-f ：经过 -d 分隔后，使用 -f n 取出第 n 个区间<br>-c ：以字符为单位取出区间<br>示例 1：last 显示登入者的信息，取出用户名。<br>$ last<br>root pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in<br>root pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46 (06:33)<br>root pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16)</p>
<p>$ last | cut -d ‘ ‘ -f 1<br>示例 2：将 export 输出的信息，取出第 12 字符以后的所有字符串。<br>$ export<br>declare -x HISTCONTROL=”ignoredups”<br>declare -x HISTSIZE=”1000”<br>declare -x HOME=”/home/dmtsai”<br>declare -x HOSTNAME=”study.centos.vbird”<br>…..(其他省略)…..</p>
<p>$ export | cut -c 12-</p>
<h2 id="排序指令"><a href="#排序指令" class="headerlink" title="排序指令"></a>排序指令</h2><p><strong>sort</strong> 用于排序。<br>$ sort [-fbMnrtuk] [file or stdin]<br>-f ：忽略大小写<br>-b ：忽略最前面的空格<br>-M ：以月份的名字来排序，例如 JAN，DEC<br>-n ：使用数字<br>-r ：反向排序<br>-u ：相当于 unique，重复的内容只出现一次<br>-t ：分隔符，默认为 tab<br>-k ：指定排序的区间<br>示例：/etc/passwd 文件内容以 : 来分隔，要求以第三列进行排序。<br>$ cat /etc/passwd | sort -t ‘:’ -k 3<br>root:x:0:0:root:/root:/bin/bash<br>dmtsai:x:1000:1000:dmtsai:/home/dmtsai:/bin/bash<br>alex:x:1001:1002::/home/alex:/bin/bash<br>arod:x:1002:1003::/home/arod:/bin/bash<br><strong>uniq</strong> 可以将重复的数据只取一个。<br>$ uniq [-ic]<br>-i ：忽略大小写<br>-c ：进行计数<br>示例：取得每个人的登录总次数<br>$ last | cut -d ‘ ‘ -f 1 | sort | uniq -c<br>1<br>6 (unknown<br>47 dmtsai<br>4 reboot<br>7 root<br>1 wtmp</p>
<h2 id="双向输出重定向"><a href="#双向输出重定向" class="headerlink" title="双向输出重定向"></a>双向输出重定向</h2><p>输出重定向会将输出内容重定向到文件中，而 <strong>tee</strong> 不仅能够完成这个功能，还能保留屏幕上的输出。也就是说，使用 tee 指令，一个输出会同时传送到文件和屏幕上。<br>$ tee [-a] file</p>
<h2 id="字符转换指令"><a href="#字符转换指令" class="headerlink" title="字符转换指令"></a>字符转换指令</h2><p><strong>tr</strong> 用来删除一行中的字符，或者对字符进行替换。<br>$ tr [-ds] SET1 …<br>-d ： 删除行中 SET1 这个字符串<br>示例，将 last 输出的信息所有小写转换为大写。<br>$ last | tr ‘[a-z]’ ‘[A-Z]’<br><strong>col</strong> 将 tab 字符转为空格字符。<br>$ col [-xb]<br>-x ： 将 tab 键转换成对等的空格键<br><strong>expand</strong> 将 tab 转换一定数量的空格，默认是 8 个。<br>$ expand [-t] file<br>-t ：tab 转为空格的数量<br><strong>join</strong> 将有相同数据的那一行合并在一起。<br>$ join [-ti12] file1 file2<br>-t ：分隔符，默认为空格<br>-i ：忽略大小写的差异<br>-1 ：第一个文件所用的比较字段<br>-2 ：第二个文件所用的比较字段<br><strong>paste</strong> 直接将两行粘贴在一起。<br>$ paste [-d] file1 file2<br>-d ：分隔符，默认为 tab</p>
<h2 id="分区指令"><a href="#分区指令" class="headerlink" title="分区指令"></a>分区指令</h2><p><strong>split</strong> 将一个文件划分成多个文件。<br>$ split [-bl] file PREFIX<br>-b ：以大小来进行分区，可加单位，例如 b, k, m 等<br>-l ：以行数来进行分区。</p>
<ul>
<li>PREFIX ：分区文件的前导名称</li>
</ul>
<h1 id="九、正则表达式"><a href="#九、正则表达式" class="headerlink" title="九、正则表达式"></a>九、正则表达式</h1><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p>g/re/p（globally search a regular expression and print)，使用正则表示式进行全局查找并打印。<br>$ grep [-acinv] [–color=auto] 搜寻字符串 filename<br>-c ： 统计匹配到行的个数<br>-i ： 忽略大小写<br>-n ： 输出行号<br>-v ： 反向选择，也就是显示出没有 搜寻字符串 内容的那一行<br>–color=auto ：找到的关键字加颜色显示<br>示例：把含有 the 字符串的行提取出来（注意默认会有 –color=auto 选项，因此以下内容在 Linux 中有颜色显示 the 字符串）<br>$ grep -n ‘the’ regular_express.txt<br>8:I can’t finish the test.<br>12:the symbol ‘*‘ is represented as start.<br>15:You are the best is mean you are the no. 1.<br>16:The world Happy is the same with “glad”.<br>18:google is the best tools for search keyword<br>示例：正则表达式 a{m,n} 用来匹配字符 a m~n 次，这里需要将 { 和 } 进行转义，因为它们在 shell 是有特殊意义的。<br>$ grep -n ‘a{2,5}‘ regular_express.txt</p>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><p>用于格式化输出。它不属于管道命令，在给 printf 传数据时需要使用 $( ) 形式。<br>$ printf ‘%10s %5i %5i %5i %8.2f \n’ $(cat printf.txt)<br>    DmTsai    80    60    92    77.33<br>     VBird    75    55    80    70.00<br>       Ken    60    90    70    73.33</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>是由 Alfred Aho，Peter Weinberger 和 Brian Kernighan 创造，awk 这个名字就是这三个创始人名字的首字母。<br>awk 每次处理一行，处理的最小单位是字段，每个字段的命名方式为：$n，n 为字段号，从 1 开始，$0 表示一整行。<br>示例：取出最近五个登录用户的用户名和 IP。首先用 last -n 5 取出用最近五个登录用户的所有信息，可以看到用户名和 IP 分别在第 1 列和第 3 列，我们用 $1 和 $3 就能取出这两个字段，然后用 print 进行打印。<br>$ last -n 5<br>dmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in<br>dmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 - 02:58 (03:22)<br>dmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12)<br>dmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 - 08:17 (00:14)<br>dmtsai tty1 Fri May 29 11:55 - 12:11 (00:15)<br>$ last -n 5 | awk ‘{print $1 “\t” $3}’<br>可以根据字段的某些条件进行匹配，例如匹配字段小于某个值的那一行数据。<br>$ awk ‘条件类型 1 {动作 1} 条件类型 2 {动作 2} …’ filename<br>示例：/etc/passwd 文件第三个字段为 UID，对 UID 小于 10 的数据进行处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat &#x2F;etc&#x2F;passwd | awk &#39;BEGIN &#123;FS&#x3D;&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\t &quot; $3&#125;&#39;</span><br><span class="line">root 0</span><br><span class="line">bin 1</span><br><span class="line">daemon 2</span><br></pre></td></tr></table></figure>

<p>awk 变量：</p>
<table>
<thead>
<tr>
<th>变量名称</th>
<th>代表意义</th>
</tr>
</thead>
<tbody><tr>
<td>NF</td>
<td>每一行拥有的字段总数</td>
</tr>
<tr>
<td>NR</td>
<td>目前所处理的是第几行数据</td>
</tr>
<tr>
<td>FS</td>
<td>目前的分隔字符，默认是空格键</td>
</tr>
</tbody></table>
<p>示例：显示正在处理的行号以及每一行有多少字段<br>$ last -n 5 | awk ‘{print $1 “\t lines: “ NR “\t columns: “ NF}’<br>dmtsai lines: 1 columns: 10<br>dmtsai lines: 2 columns: 10<br>dmtsai lines: 3 columns: 10<br>dmtsai lines: 4 columns: 10<br>dmtsai lines: 5 columns: 9</p>
<h1 id="十、进程管理"><a href="#十、进程管理" class="headerlink" title="十、进程管理"></a>十、进程管理</h1><h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><h3 id="1-ps"><a href="#1-ps" class="headerlink" title="1. ps"></a>1. ps</h3><p>查看某个时间点的进程信息。<br>示例：查看自己的进程</p>
<h1 id="ps-l"><a href="#ps-l" class="headerlink" title="ps -l"></a>ps -l</h1><p>示例：查看系统所有进程</p>
<h1 id="ps-aux"><a href="#ps-aux" class="headerlink" title="ps aux"></a>ps aux</h1><p>示例：查看特定的进程</p>
<h1 id="ps-aux-grep-threadx"><a href="#ps-aux-grep-threadx" class="headerlink" title="ps aux | grep threadx"></a>ps aux | grep threadx</h1><h3 id="2-pstree"><a href="#2-pstree" class="headerlink" title="2. pstree"></a>2. pstree</h3><p>查看进程树。<br>示例：查看所有进程树</p>
<h1 id="pstree-A"><a href="#pstree-A" class="headerlink" title="pstree -A"></a>pstree -A</h1><h3 id="3-top"><a href="#3-top" class="headerlink" title="3. top"></a>3. top</h3><p>实时显示进程信息。<br>示例：两秒钟刷新一次</p>
<h1 id="top-d-2"><a href="#top-d-2" class="headerlink" title="top -d 2"></a>top -d 2</h1><h3 id="4-netstat"><a href="#4-netstat" class="headerlink" title="4. netstat"></a>4. netstat</h3><p>查看占用端口的进程<br>示例：查看特定端口的进程</p>
<h1 id="netstat-anp-grep-port"><a href="#netstat-anp-grep-port" class="headerlink" title="netstat -anp | grep port"></a>netstat -anp | grep port</h1><h2 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h2><table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>R</td>
<td>running or runnable (on run queue)</td>
</tr>
<tr>
<td>正在执行或者可执行，此时进程位于执行队列中。</td>
<td></td>
</tr>
<tr>
<td>D</td>
<td>uninterruptible sleep (usually I/O)</td>
</tr>
<tr>
<td>不可中断阻塞，通常为 IO 阻塞。</td>
<td></td>
</tr>
<tr>
<td>S</td>
<td>interruptible sleep (waiting for an event to complete)</td>
</tr>
<tr>
<td>可中断阻塞，此时进程正在等待某个事件完成。</td>
<td></td>
</tr>
<tr>
<td>Z</td>
<td>zombie (terminated but not reaped by its parent)</td>
</tr>
<tr>
<td>僵死，进程已经终止但是尚未被其父进程获取信息。</td>
<td></td>
</tr>
<tr>
<td>T</td>
<td>stopped (either by a job control signal or because it is being traced)</td>
</tr>
<tr>
<td>结束，进程既可以被作业控制信号结束，也可能是正在被追踪。</td>
<td></td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/18fd4fa4f90c39ea3024bc7e330940ed5761b201/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f32626162343132372d336537642d343863632d393134652d3433366265383539666230352e706e67"><img src="https://camo.githubusercontent.com/18fd4fa4f90c39ea3024bc7e330940ed5761b201/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f32626162343132372d336537642d343863632d393134652d3433366265383539666230352e706e67#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&originHeight=372&originWidth=644&status=done&style=none&width=644"></a></p>
<h2 id="SIGCHLD"><a href="#SIGCHLD" class="headerlink" title="SIGCHLD"></a>SIGCHLD</h2><p>当一个子进程改变了它的状态时（停止运行，继续运行或者退出），有两件事会发生在父进程中：</p>
<ul>
<li>得到 SIGCHLD 信号；</li>
<li>waitpid() 或者 wait() 调用会返回。</li>
</ul>
<p>其中子进程发送的 SIGCHLD 信号包含了子进程的信息，比如进程 ID、进程状态、进程使用 CPU 的时间等。<br>在子进程退出时，它的进程描述符不会立即释放，这是为了让父进程得到子进程信息，父进程通过 wait() 和 waitpid() 来获得一个已经退出的子进程的信息。</p>
<h2 id="wait"><a href="#wait" class="headerlink" title="wait()"></a>wait()</h2><p>pid_t wait(int *status)<br>父进程调用 wait() 会一直阻塞，直到收到一个子进程退出的 SIGCHLD 信号，之后 wait() 函数会销毁子进程并返回。<br>如果成功，返回被收集的子进程的进程 ID；如果调用进程没有子进程，调用就会失败，此时返回 -1，同时 errno 被置为 ECHILD。<br>参数 status 用来保存被收集的子进程退出时的一些状态，如果对这个子进程是如何死掉的毫不在意，只想把这个子进程消灭掉，可以设置这个参数为 NULL。</p>
<h2 id="waitpid"><a href="#waitpid" class="headerlink" title="waitpid()"></a>waitpid()</h2><p>pid_t waitpid(pid_t pid, int *status, int options)<br>作用和 wait() 完全相同，但是多了两个可由用户控制的参数 pid 和 options。<br>pid 参数指示一个子进程的 ID，表示只关心这个子进程退出的 SIGCHLD 信号。如果 pid=-1 时，那么和 wait() 作用相同，都是关心所有子进程退出的 SIGCHLD 信号。<br>options 参数主要有 WNOHANG 和 WUNTRACED 两个选项，WNOHANG 可以使 waitpid() 调用变成非阻塞的，也就是说它会立即返回，父进程可以继续执行其它任务。</p>
<h2 id="孤儿进程"><a href="#孤儿进程" class="headerlink" title="孤儿进程"></a>孤儿进程</h2><p>一个父进程退出，而它的一个或多个子进程还在运行，那么这些子进程将成为孤儿进程。<br>孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。<br>由于孤儿进程会被 init 进程收养，所以孤儿进程不会对系统造成危害。</p>
<h2 id="僵尸进程"><a href="#僵尸进程" class="headerlink" title="僵尸进程"></a>僵尸进程</h2><p>一个子进程的进程描述符在子进程退出时不会释放，只有当父进程通过 wait() 或 waitpid() 获取了子进程信息后才会释放。如果子进程退出，而父进程并没有调用 wait() 或 waitpid()，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵尸进程。<br>僵尸进程通过 ps 命令显示出来的状态为 Z（zombie）。<br>系统所能使用的进程号是有限的，如果产生大量僵尸进程，将因为没有可用的进程号而导致系统不能产生新的进程。<br>要消灭系统中大量的僵尸进程，只需要将其父进程杀死，此时僵尸进程就会变成孤儿进程，从而被 init 进程所收养，这样 init 进程就会释放所有的僵尸进程所占有的资源，从而结束僵尸进程。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>鸟哥. 鸟 哥 的 Linux 私 房 菜 基 础 篇 第 三 版[J]. 2009.</li>
<li><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/l-cn-rpmdpkg/index.html">Linux 平台上的软件包管理</a></li>
<li><a target="_blank" rel="noopener" href="http://liubigbin.github.io/2016/03/11/Linux-%E4%B9%8B%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E3%80%81%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B/">Linux 之守护进程、僵死进程与孤儿进程</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/185899/what-is-the-difference-between-a-symbolic-link-and-a-hard-link">What is the difference between a symbolic link and a hard link?</a></li>
<li><a target="_blank" rel="noopener" href="https://idea.popcount.org/2012-12-11-linux-process-states/">Linux process states</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/GUID_Partition_Table">GUID Partition Table</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/kevinhg/article/details/7001719">详解 wait 和 waitpid 函数</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/tianlesoftware/article/details/6009110">IDE、SATA、SCSI、SAS、FC、SSD 硬盘类型介绍</a></li>
<li><a target="_blank" rel="noopener" href="http://www.mpchunter.com/s3000/akai-ib-301s-scsi-interface-for-s2800s3000/">Akai IB-301S SCSI Interface for S2800,S3000</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Parallel_ATA">Parallel ATA</a></li>
<li><a target="_blank" rel="noopener" href="http://www.thessdreview.com/our-reviews/adata-xpg-sx900-256gb-sata-3-ssd-review-expanded-capacity-and-sandforce-driven-speed/4/">ADATA XPG SX900 256GB SATA 3 SSD Review – Expanded Capacity and SandForce Driven Speed</a></li>
<li><a target="_blank" rel="noopener" href="https://blogs.cisco.com/datacenter/decoding-ucs-invicta-part-1">Decoding UCS Invicta – Part 1</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A1%AC%E7%9B%98">硬盘</a></li>
<li><a target="_blank" rel="noopener" href="http://www.differencebetween.info/difference-between-sas-and-sata">Difference between SAS and SATA</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/BIOS">BIOS</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cs.rutgers.edu/~pxk/416/notes/13-fs-studies.html">File system design case studies</a></li>
<li><a target="_blank" rel="noopener" href="https://classes.soe.ucsc.edu/cmps111/Fall08/proj4.shtml">Programming Project #4</a></li>
<li><a target="_blank" rel="noopener" href="http://web.cs.ucla.edu/classes/fall14/cs111/scribe/11a/index.html">FILE SYSTEM DESIGN</a></li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/15/yuque/Linux%E5%9F%BA%E7%A1%80/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/进程与线程" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/yuque/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/">进程与线程</a>
    </h1>
  

        
        <a href="/2020/05/15/yuque/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/" class="archive-article-date">
  	<time datetime="2020-05-15T15:52:09.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-进程"><a href="#1-进程" class="headerlink" title="1. 进程"></a>1. 进程</h2><p>进程是资源分配的基本单位。<br>进程控制块 (Process Control Block, PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。<br>下图显示了 4 个程序创建了 4 个进程，这 4 个进程可以并发地执行。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/23a2b15842e9766a36e7a18800540c290ad15388/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f61366163326230382d333836312d346538352d626161382d3338323238376266656539662e706e67"><img src="https://camo.githubusercontent.com/23a2b15842e9766a36e7a18800540c290ad15388/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f61366163326230382d333836312d346538352d626161382d3338323238376266656539662e706e67#height=292&id=y9Fki&originHeight=292&originWidth=803&originalType=binary&status=done&style=none&width=803"></a></p>
<h2 id="2-线程"><a href="#2-线程" class="headerlink" title="2. 线程"></a>2. 线程</h2><p>线程是独立调度的基本单位。<br>一个进程中可以有多个线程，它们共享进程资源。<br>QQ 和浏览器是两个进程，浏览器进程里面有很多线程，例如 HTTP 请求线程、事件响应线程、渲染线程等等，线程的并发执行使得在浏览器中点击一个新链接从而发起 HTTP 请求时，浏览器还可以响应用户的其它事件。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/30f22c7b13fbe1a0817988a80d2a8e7c8bc52a1c/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f33636436333065612d303137632d343838642d616431642d3733326234656665646466352e706e67"><img src="https://camo.githubusercontent.com/30f22c7b13fbe1a0817988a80d2a8e7c8bc52a1c/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f33636436333065612d303137632d343838642d616431642d3733326234656665646466352e706e67#height=304&id=DayoI&originHeight=304&originWidth=367&originalType=binary&status=done&style=none&width=367"></a></p>
<h2 id="3-区别"><a href="#3-区别" class="headerlink" title="3. 区别"></a>3. 区别</h2><p>Ⅰ 拥有资源<br>进程是资源分配的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源。<br>Ⅱ 调度<br>线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换。<br>Ⅲ 系统开销<br>由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。<br>Ⅳ 通信方面<br>线程间可以通过直接读写同一进程中的数据进行通信，但是进程通信需要借助 IPC。</p>
<h1 id="进程状态的切换"><a href="#进程状态的切换" class="headerlink" title="进程状态的切换"></a>进程状态的切换</h1><p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/99816e8c9d2d59b711ec4134f6200857074596e4/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f50726f6365737353746174652e706e67"><img src="https://camo.githubusercontent.com/99816e8c9d2d59b711ec4134f6200857074596e4/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f50726f6365737353746174652e706e67#height=323&id=ziTB4&originHeight=438&originWidth=679&originalType=binary&status=done&style=none&width=500"></a></p>
<ul>
<li>就绪状态（ready）：等待被调度</li>
<li>运行状态（running）</li>
<li>阻塞状态（waiting）：等待资源</li>
</ul>
<p>应该注意以下内容：</p>
<ul>
<li>只有就绪态和运行态可以相互转换，其它的都是单向转换。就绪状态的进程通过调度算法从而获得 CPU 时间，转为运行状态；而运行状态的进程，在分配给它的 CPU 时间片用完之后就会转为就绪状态，等待下一次调度。</li>
<li>阻塞状态是缺少需要的资源从而由运行状态转换而来，但是该资源不包括 CPU 时间，缺少 CPU 时间会从运行态转换为就绪态。</li>
</ul>
<h1 id="进程调度算法"><a href="#进程调度算法" class="headerlink" title="进程调度算法"></a>进程调度算法</h1><p>不同环境的调度算法目标不同，因此需要针对不同环境来讨论调度算法。</p>
<h2 id="1-批处理系统"><a href="#1-批处理系统" class="headerlink" title="1. 批处理系统"></a>1. 批处理系统</h2><p>批处理系统没有太多的用户操作，在该系统中，调度算法目标是保证吞吐量和周转时间（从提交到终止的时间）。<br><strong>1.1 先来先服务 first-come first-serverd（FCFS）</strong><br>非抢占式的调度算法，按照请求的顺序进行调度。<br>有利于长作业，但不利于短作业，因为短作业必须一直等待前面的长作业执行完毕才能执行，而长作业又需要执行很长时间，造成了短作业等待时间过长。<br><strong>1.2 短作业优先 shortest job first（SJF）</strong><br>非抢占式的调度算法，按估计运行时间最短的顺序进行调度。<br>长作业有可能会饿死，处于一直等待短作业执行完毕的状态。因为如果一直有短作业到来，那么长作业永远得不到调度。<br><strong>1.3 最短剩余时间优先 shortest remaining time next（SRTN）</strong><br>最短作业优先的抢占式版本，按剩余运行时间的顺序进行调度。 当一个新的作业到达时，其整个运行时间与当前进程的剩余时间作比较。如果新的进程需要的时间更少，则挂起当前进程，运行新的进程。否则新的进程等待。</p>
<h2 id="2-交互式系统"><a href="#2-交互式系统" class="headerlink" title="2. 交互式系统"></a>2. 交互式系统</h2><p>交互式系统有大量的用户交互操作，在该系统中调度算法的目标是快速地进行响应。<br><strong>2.1 时间片轮转</strong><br>将所有就绪进程按 FCFS 的原则排成一个队列，每次调度时，把 CPU 时间分配给队首进程，该进程可以执行一个时间片。当时间片用完时，由计时器发出时钟中断，调度程序便停止该进程的执行，并将它送往就绪队列的末尾，同时继续把 CPU 时间分配给队首的进程。<br>时间片轮转算法的效率和时间片的大小有很大关系：</p>
<ul>
<li>因为进程切换都要保存进程的信息并且载入新进程的信息，如果时间片太小，会导致进程切换得太频繁，在进程切换上就会花过多时间。</li>
<li>而如果时间片过长，那么实时性就不能得到保证。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/8ff909218be7e1269ee5912f0aba9fcb3552df3b/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f38633636323939392d633136632d343831632d396634302d3166646261356263393136372e706e67"><img src="https://camo.githubusercontent.com/8ff909218be7e1269ee5912f0aba9fcb3552df3b/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f38633636323939392d633136632d343831632d396634302d3166646261356263393136372e706e67#height=123&id=xLOnQ&originHeight=123&originWidth=357&originalType=binary&status=done&style=none&width=357"></a></p>
<p><strong>2.2 优先级调度</strong><br>为每个进程分配一个优先级，按优先级进行调度。<br>为了防止低优先级的进程永远等不到调度，可以随着时间的推移增加等待进程的优先级。<br><strong>2.3 多级反馈队列</strong><br>一个进程需要执行 100 个时间片，如果采用时间片轮转调度算法，那么需要交换 100 次。<br>多级队列是为这种需要连续执行多个时间片的进程考虑，它设置了多个队列，每个队列时间片大小都不同，例如 1,2,4,8,..。进程在第一个队列没执行完，就会被移到下一个队列。这种方式下，之前的进程只需要交换 7 次。<br>每个队列优先权也不同，最上面的优先权最高。因此只有上一个队列没有进程在排队，才能调度当前队列上的进程。<br>可以将这种调度算法看成是时间片轮转调度算法和优先级调度算法的结合。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/a69a61aafa8f82822c3679b989d58d1ce332f9ae/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f30343263663932382d336338652d343831352d616539632d6632373830323032633638662e706e67"><img src="https://camo.githubusercontent.com/a69a61aafa8f82822c3679b989d58d1ce332f9ae/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f30343263663932382d336338652d343831352d616539632d6632373830323032633638662e706e67#height=294&id=Ghj5D&originHeight=294&originWidth=438&originalType=binary&status=done&style=none&width=438"></a></p>
<h2 id="3-实时系统"><a href="#3-实时系统" class="headerlink" title="3. 实时系统"></a>3. 实时系统</h2><p>实时系统要求一个请求在一个确定时间内得到响应。<br>分为硬实时和软实时，前者必须满足绝对的截止时间，后者可以容忍一定的超时。</p>
<h1 id="进程同步"><a href="#进程同步" class="headerlink" title="进程同步"></a>进程同步</h1><h2 id="1-临界区"><a href="#1-临界区" class="headerlink" title="1. 临界区"></a>1. 临界区</h2><p>对临界资源进行访问的那段代码称为临界区。<br>为了互斥访问临界资源，每个进程在进入临界区之前，需要先进行检查。<br>// entry section<br>// critical section;<br>// exit section</p>
<h2 id="2-同步与互斥"><a href="#2-同步与互斥" class="headerlink" title="2. 同步与互斥"></a>2. 同步与互斥</h2><ul>
<li>同步：多个进程因为合作产生的直接制约关系，使得进程有一定的先后执行关系。</li>
<li>互斥：多个进程在同一时刻只有一个进程能进入临界区。</li>
</ul>
<h2 id="3-信号量"><a href="#3-信号量" class="headerlink" title="3. 信号量"></a>3. 信号量</h2><p>信号量（Semaphore）是一个整型变量，可以对其执行 down 和 up 操作，也就是常见的 P 和 V 操作。</p>
<ul>
<li><strong>down</strong> : 如果信号量大于 0 ，执行 -1 操作；如果信号量等于 0，进程睡眠，等待信号量大于 0；</li>
<li><strong>up</strong> ：对信号量执行 +1 操作，唤醒睡眠的进程让其完成 down 操作。</li>
</ul>
<p>down 和 up 操作需要被设计成原语，不可分割，通常的做法是在执行这些操作的时候屏蔽中断。<br>如果信号量的取值只能为 0 或者 1，那么就成为了 <strong>互斥量（Mutex）</strong> ，0 表示临界区已经加锁，1 表示临界区解锁。<br>typedef int semaphore;<br>semaphore mutex = 1;<br>void P1() {<br>    down(&amp;mutex);<br>    // 临界区<br>    up(&amp;mutex);<br>}</p>
<p>void P2() {<br>    down(&amp;mutex);<br>    // 临界区<br>    up(&amp;mutex);<br>}<br><strong>使用信号量实现生产者-消费者问题</strong><br>问题描述：使用一个缓冲区来保存物品，只有缓冲区没有满，生产者才可以放入物品；只有缓冲区不为空，消费者才可以拿走物品。<br>因为缓冲区属于临界资源，因此需要使用一个互斥量 mutex 来控制对缓冲区的互斥访问。<br>为了同步生产者和消费者的行为，需要记录缓冲区中物品的数量。数量可以使用信号量来进行统计，这里需要使用两个信号量：empty 记录空缓冲区的数量，full 记录满缓冲区的数量。其中，empty 信号量是在生产者进程中使用，当 empty 不为 0 时，生产者才可以放入物品；full 信号量是在消费者进程中使用，当 full 信号量不为 0 时，消费者才可以取走物品。<br>注意，不能先对缓冲区进行加锁，再测试信号量。也就是说，不能先执行 down(mutex) 再执行 down(empty)。如果这么做了，那么可能会出现这种情况：生产者对缓冲区加锁后，执行 down(empty) 操作，发现 empty = 0，此时生产者睡眠。消费者不能进入临界区，因为生产者对缓冲区加锁了，消费者就无法执行 up(empty) 操作，empty 永远都为 0，导致生产者永远等待下，不会释放锁，消费者因此也会永远等待下去。<br>#define N 100<br>typedef int semaphore;<br>semaphore mutex = 1;<br>semaphore empty = N;<br>semaphore full = 0;</p>
<p>void producer() {<br>    while(TRUE) {<br>        int item = produce_item();<br>        down(∅);<br>        down(&amp;mutex);<br>        insert_item(item);<br>        up(&amp;mutex);<br>        up(&amp;full);<br>    }<br>}</p>
<p>void consumer() {<br>    while(TRUE) {<br>        down(&amp;full);<br>        down(&amp;mutex);<br>        int item = remove_item();<br>        consume_item(item);<br>        up(&amp;mutex);<br>        up(∅);<br>    }<br>}</p>
<h2 id="4-管程"><a href="#4-管程" class="headerlink" title="4. 管程"></a>4. 管程</h2><p>使用信号量机制实现的生产者消费者问题需要客户端代码做很多控制，而管程把控制的代码独立出来，不仅不容易出错，也使得客户端代码调用更容易。<br>c 语言不支持管程，下面的示例代码使用了类 Pascal 语言来描述管程。示例代码的管程提供了 insert() 和 remove() 方法，客户端代码通过调用这两个方法来解决生产者-消费者问题。<br>monitor ProducerConsumer<br>    integer i;<br>    condition c;</p>
<p>procedure insert();<br>    begin<br>        // …<br>    end;</p>
<p>procedure remove();<br>    begin<br>        // …<br>    end;<br>end monitor;<br>管程有一个重要特性：在一个时刻只能有一个进程使用管程。进程在无法继续执行的时候不能一直占用管程，否则其它进程永远不能使用管程。<br>管程引入了 <strong>条件变量</strong> 以及相关的操作：<strong>wait()</strong> 和 <strong>signal()</strong> 来实现同步操作。对条件变量执行 wait() 操作会导致调用进程阻塞，把管程让出来给另一个进程持有。signal() 操作用于唤醒被阻塞的进程。<br><strong>使用管程实现生产者-消费者问题</strong><br>// 管程<br>monitor ProducerConsumer<br>    condition full, empty;<br>    integer count := 0;<br>    condition c;</p>
<p>procedure insert(item: integer);<br>    begin<br>        if count = N then wait(full);<br>        insert_item(item);<br>        count := count + 1;<br>        if count = 1 then signal(empty);<br>    end;</p>
<p>function remove: integer;<br>    begin<br>        if count = 0 then wait(empty);<br>        remove = remove_item;<br>        count := count - 1;<br>        if count = N -1 then signal(full);<br>    end;<br>end monitor;</p>
<p>// 生产者客户端<br>procedure producer<br>begin<br>    while true do<br>    begin<br>        item = produce_item;<br>        ProducerConsumer.insert(item);<br>    end<br>end;</p>
<p>// 消费者客户端<br>procedure consumer<br>begin<br>    while true do<br>    begin<br>        item = ProducerConsumer.remove;<br>        consume_item(item);<br>    end<br>end;</p>
<h1 id="经典同步问题"><a href="#经典同步问题" class="headerlink" title="经典同步问题"></a>经典同步问题</h1><p>生产者和消费者问题前面已经讨论过了。</p>
<h2 id="1-哲学家进餐问题"><a href="#1-哲学家进餐问题" class="headerlink" title="1. 哲学家进餐问题"></a>1. 哲学家进餐问题</h2><p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/3290334ffddcff29e586f91855215caaec19bda2/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f61393037376630362d373538342d346632622d386332302d3361386534363932383832302e6a7067"><img src="https://camo.githubusercontent.com/3290334ffddcff29e586f91855215caaec19bda2/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f61393037376630362d373538342d346632622d386332302d3361386534363932383832302e6a7067#height=320&id=AjLUR&originHeight=320&originWidth=370&originalType=binary&status=done&style=none&width=370"></a></p>
<p>五个哲学家围着一张圆桌，每个哲学家面前放着食物。哲学家的生活有两种交替活动：吃饭以及思考。当一个哲学家吃饭时，需要先拿起自己左右两边的两根筷子，并且一次只能拿起一根筷子。<br>下面是一种错误的解法，如果所有哲学家同时拿起左手边的筷子，那么所有哲学家都在等待其它哲学家吃完并释放自己手中的筷子，导致死锁。<br>#define N 5</p>
<p>void philosopher(int i) {<br>    while(TRUE) {<br>        think();<br>        take(i);       // 拿起左边的筷子<br>        take((i+1)%N); // 拿起右边的筷子<br>        eat();<br>        put(i);<br>        put((i+1)%N);<br>    }<br>}<br>为了防止死锁的发生，可以设置两个条件：</p>
<ul>
<li>必须同时拿起左右两根筷子；</li>
<li>只有在两个邻居都没有进餐的情况下才允许进餐。</li>
</ul>
<p>#define N 5<br>#define LEFT (i + N - 1) % N // 左邻居<br>#define RIGHT (i + 1) % N    // 右邻居<br>#define THINKING 0<br>#define HUNGRY   1<br>#define EATING   2<br>typedef int semaphore;<br>int state[N];                // 跟踪每个哲学家的状态<br>semaphore mutex = 1;         // 临界区的互斥，临界区是 state 数组，对其修改需要互斥<br>semaphore s[N];              // 每个哲学家一个信号量</p>
<p>void philosopher(int i) {<br>    while(TRUE) {<br>        think(i);<br>        take_two(i);<br>        eat(i);<br>        put_two(i);<br>    }<br>}</p>
<p>void take_two(int i) {<br>    down(&amp;mutex);<br>    state[i] = HUNGRY;<br>    check(i);<br>    up(&amp;mutex);<br>    down(&amp;s[i]); // 只有收到通知之后才可以开始吃，否则会一直等下去<br>}</p>
<p>void put_two(i) {<br>    down(&amp;mutex);<br>    state[i] = THINKING;<br>    check(LEFT); // 尝试通知左右邻居，自己吃完了，你们可以开始吃了<br>    check(RIGHT);<br>    up(&amp;mutex);<br>}</p>
<p>void eat(int i) {<br>    down(&amp;mutex);<br>    state[i] = EATING;<br>    up(&amp;mutex);<br>}</p>
<p>// 检查两个邻居是否都没有用餐，如果是的话，就 up(&amp;s[i])，使得 down(&amp;s[i]) 能够得到通知并继续执行<br>void check(i) {         <br>    if(state[i] == HUNGRY &amp;&amp; state[LEFT] != EATING &amp;&amp; state[RIGHT] !=EATING) {<br>        state[i] = EATING;<br>        up(&amp;s[i]);<br>    }<br>}</p>
<h2 id="2-读者-写者问题"><a href="#2-读者-写者问题" class="headerlink" title="2. 读者-写者问题"></a>2. 读者-写者问题</h2><p>允许多个进程同时对数据进行读操作，但是不允许读和写以及写和写操作同时发生。<br>一个整型变量 count 记录在对数据进行读操作的进程数量，一个互斥量 count_mutex 用于对 count 加锁，一个互斥量 data_mutex 用于对读写的数据加锁。<br>typedef int semaphore;<br>semaphore count_mutex = 1;<br>semaphore data_mutex = 1;<br>int count = 0;</p>
<p>void reader() {<br>    while(TRUE) {<br>        down(&amp;count_mutex);<br>        count++;<br>        if(count == 1) down(&amp;data_mutex); // 第一个读者需要对数据进行加锁，防止写进程访问<br>        up(&amp;count_mutex);<br>        read();<br>        down(&amp;count_mutex);<br>        count–;<br>        if(count == 0) up(&amp;data_mutex);<br>        up(&amp;count_mutex);<br>    }<br>}</p>
<p>void writer() {<br>    while(TRUE) {<br>        down(&amp;data_mutex);<br>        write();<br>        up(&amp;data_mutex);<br>    }<br>}<br>以下内容由 <a target="_blank" rel="noopener" href="https://github.com/yugandharbandi">@Bandi Yugandhar</a> 提供。<br>The first case may result Writer to starve. This case favous Writers i.e no writer, once added to the queue, shall be kept waiting longer than absolutely necessary(only when there are readers that entered the queue before the writer).<br>int readcount, writecount;                   //(initial value = 0)<br>semaphore rmutex, wmutex, readLock, resource; //(initial value = 1)</p>
<p>//READER<br>void reader() {<br><ENTRY Section><br>down(&amp;readLock);                 //  reader is trying to enter<br>down(&amp;rmutex);                  //   lock to increase readcount<br>  readcount++;                 <br>  if (readcount == 1)          <br>   down(&amp;resource);              //if you are the first reader then lock  the resource<br>up(&amp;rmutex);                  //release  for other readers<br>up(&amp;readLock);                 //Done with trying to access the resource</p>
<CRITICAL Section>
//reading is performed

<EXIT Section>
down(&rmutex);                  //reserve exit section - avoids race condition with readers
 readcount--;                       //indicate you're leaving
  if (readcount == 0)          //checks if you are last reader leaving
   up(&resource);              //if last, you must release the locked resource
up(&rmutex);                  //release exit section for other readers
}

<p>//WRITER<br>void writer() {<br>  <ENTRY Section><br>  down(&amp;wmutex);                  //reserve entry section for writers - avoids race conditions<br>  writecount++;                //report yourself as a writer entering<br>  if (writecount == 1)         //checks if you’re first writer<br>   down(&amp;readLock);               //if you’re first, then you must lock the readers out. Prevent them from trying to enter CS<br>  up(&amp;wmutex);                  //release entry section</p>
<CRITICAL Section>
down(&resource);                //reserve the resource for yourself - prevents other writers from simultaneously editing the shared resource
  //writing is performed
up(&resource);                //release file

<EXIT Section>
  down(&wmutex);                  //reserve exit section
  writecount--;                //indicate you're leaving
  if (writecount == 0)         //checks if you're the last writer
   up(&readLock);               //if you're last writer, you must unlock the readers. Allows them to try enter CS for reading
  up(&wmutex);                  //release exit section
}
We can observe that every reader is forced to acquire ReadLock. On the otherhand, writers doesn’t need to lock individually. Once the first writer locks the ReadLock, it will be released only when there is no writer left in the queue.
From the both cases we observed that either reader or writer has to starve. Below solutionadds the constraint that no thread shall be allowed to starve; that is, the operation of obtaining a lock on the shared data will always terminate in a bounded amount of time.
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">int readCount;                  &#x2F;&#x2F; init to 0; number of readers currently accessing resource</span><br><span class="line">&#x2F;&#x2F; all semaphores initialised to 1</span><br><span class="line">Semaphore resourceAccess;       &#x2F;&#x2F; controls access (read&#x2F;write) to the resource</span><br><span class="line">Semaphore readCountAccess;      &#x2F;&#x2F; for syncing changes to shared variable readCount</span><br><span class="line">Semaphore serviceQueue;         &#x2F;&#x2F; FAIRNESS: preserves ordering of requests (signaling must be FIFO)</span><br><span class="line">void writer()</span><br><span class="line">&#123; </span><br><span class="line">    down(&amp;serviceQueue);           &#x2F;&#x2F; wait in line to be servicexs</span><br><span class="line">    &#x2F;&#x2F; &lt;ENTER&gt;</span><br><span class="line">    down(&amp;resourceAccess);         &#x2F;&#x2F; request exclusive access to resource</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;ENTER&gt;</span><br><span class="line">    up(&amp;serviceQueue);           &#x2F;&#x2F; let next in line be serviced</span><br><span class="line">    &#x2F;&#x2F; &lt;WRITE&gt;</span><br><span class="line">    writeResource();            &#x2F;&#x2F; writing is performed</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;WRITE&gt;</span><br><span class="line">    &#x2F;&#x2F; &lt;EXIT&gt;</span><br><span class="line">    up(&amp;resourceAccess);         &#x2F;&#x2F; release resource access for next reader&#x2F;writer</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;EXIT&gt;</span><br><span class="line">&#125;</span><br><span class="line">void reader()</span><br><span class="line">&#123; </span><br><span class="line">    down(&amp;serviceQueue);           &#x2F;&#x2F; wait in line to be serviced</span><br><span class="line">    down(&amp;readCountAccess);        &#x2F;&#x2F; request exclusive access to readCount</span><br><span class="line">    &#x2F;&#x2F; &lt;ENTER&gt;</span><br><span class="line">    if (readCount &#x3D;&#x3D; 0)         &#x2F;&#x2F; if there are no readers already reading:</span><br><span class="line">        down(&amp;resourceAccess);     &#x2F;&#x2F; request resource access for readers (writers blocked)</span><br><span class="line">    readCount++;                &#x2F;&#x2F; update count of active readers</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;ENTER&gt;</span><br><span class="line">    up(&amp;serviceQueue);           &#x2F;&#x2F; let next in line be serviced</span><br><span class="line">    up(&amp;readCountAccess);        &#x2F;&#x2F; release access to readCount</span><br><span class="line">    &#x2F;&#x2F; &lt;READ&gt;</span><br><span class="line">    readResource();             &#x2F;&#x2F; reading is performed</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;READ&gt;</span><br><span class="line">    down(&amp;readCountAccess);        &#x2F;&#x2F; request exclusive access to readCount</span><br><span class="line">    &#x2F;&#x2F; &lt;EXIT&gt;</span><br><span class="line">    readCount--;                &#x2F;&#x2F; update count of active readers</span><br><span class="line">    if (readCount &#x3D;&#x3D; 0)         &#x2F;&#x2F; if there are no readers left:</span><br><span class="line">        up(&amp;resourceAccess);     &#x2F;&#x2F; release resource access for all</span><br><span class="line">    &#x2F;&#x2F; &lt;&#x2F;EXIT&gt;</span><br><span class="line">    up(&amp;readCountAccess);        &#x2F;&#x2F; release access to readCount</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h1><p>进程同步与进程通信很容易混淆，它们的区别在于：</p>
<ul>
<li>进程同步：控制多个进程按一定顺序执行；</li>
<li>进程通信：进程间传输信息。</li>
</ul>
<p>进程通信是一种手段，而进程同步是一种目的。也可以说，为了能够达到进程同步的目的，需要让进程进行通信，传输一些进程同步所需要的信息。</p>
<h2 id="1-管道"><a href="#1-管道" class="headerlink" title="1. 管道"></a>1. 管道</h2><p>管道是通过调用 pipe 函数创建的，fd[0] 用于读，fd[1] 用于写。<br>#include &lt;unistd.h&gt;<br>int pipe(int fd[2]);<br>它具有以下限制：</p>
<ul>
<li>只支持半双工通信（单向交替传输）；</li>
<li>只能在父子进程或者兄弟进程中使用。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/ea23bf43dfe705c9b9c1016389993e609b50a1ee/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35336364396164652d623061362d343339392d623464652d3766316662643036636466622e706e67"><img src="https://camo.githubusercontent.com/ea23bf43dfe705c9b9c1016389993e609b50a1ee/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f35336364396164652d623061362d343339392d623464652d3766316662643036636466622e706e67#height=281&id=zeAHc&originHeight=281&originWidth=513&originalType=binary&status=done&style=none&width=513"></a></p>
<h2 id="2-FIFO"><a href="#2-FIFO" class="headerlink" title="2. FIFO"></a>2. FIFO</h2><p>也称为命名管道，去除了管道只能在父子进程中使用的限制。<br>#include &lt;sys/stat.h&gt;<br>int mkfifo(const char *path, mode_t mode);<br>int mkfifoat(int fd, const char *path, mode_t mode);<br>FIFO 常用于客户-服务器应用程序中，FIFO 用作汇聚点，在客户进程和服务器进程之间传递数据。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/5655a545eb67ea75889b546efe007fffb2483885/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f32616335306238312d643932612d343430312d623965632d6632313133656363333037362e706e67"><img src="https://camo.githubusercontent.com/5655a545eb67ea75889b546efe007fffb2483885/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f32616335306238312d643932612d343430312d623965632d6632313133656363333037362e706e67#height=444&id=Yn1Lo&originHeight=444&originWidth=639&originalType=binary&status=done&style=none&width=639"></a></p>
<h2 id="3-消息队列"><a href="#3-消息队列" class="headerlink" title="3. 消息队列"></a>3. 消息队列</h2><p>相比于 FIFO，消息队列具有以下优点：</p>
<ul>
<li>消息队列可以独立于读写进程存在，从而避免了 FIFO 中同步管道的打开和关闭时可能产生的困难；</li>
<li>避免了 FIFO 的同步阻塞问题，不需要进程自己提供同步方法；</li>
<li>读进程可以根据消息类型有选择地接收消息，而不像 FIFO 那样只能默认地接收。</li>
</ul>
<h2 id="4-信号量"><a href="#4-信号量" class="headerlink" title="4. 信号量"></a>4. 信号量</h2><p>它是一个计数器，用于为多个进程提供对共享数据对象的访问。</p>
<h2 id="5-共享存储"><a href="#5-共享存储" class="headerlink" title="5. 共享存储"></a>5. 共享存储</h2><p>允许多个进程共享一个给定的存储区。因为数据不需要在进程之间复制，所以这是最快的一种 IPC。<br>需要使用信号量用来同步对共享存储的访问。<br>多个进程可以将同一个文件映射到它们的地址空间从而实现共享内存。另外 XSI 共享内存不是使用文件，而是使用内存的匿名段。</p>
<h2 id="6-套接字"><a href="#6-套接字" class="headerlink" title="6. 套接字"></a>6. 套接字</h2><p>与其它通信机制不同的是，它可用于不同机器间的进程通信。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/15/yuque/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-yuque/计算机操作系统" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/yuque/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">计算机操作系统</a>
    </h1>
  

        
        <a href="/2020/05/15/yuque/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="archive-article-date">
  	<time datetime="2020-05-15T15:29:38.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="基本特征"><a href="#基本特征" class="headerlink" title="基本特征"></a>基本特征</h1><h2 id="1-并发"><a href="#1-并发" class="headerlink" title="1. 并发"></a>1. 并发</h2><p>并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。<br>并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。<br>操作系统通过引入进程和线程，使得程序能够并发运行。</p>
<h2 id="2-共享"><a href="#2-共享" class="headerlink" title="2. 共享"></a>2. 共享</h2><p>共享是指系统中的资源可以被多个并发进程共同使用。<br>有两种共享方式：互斥共享和同时共享。<br>互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。</p>
<h2 id="3-虚拟"><a href="#3-虚拟" class="headerlink" title="3. 虚拟"></a>3. 虚拟</h2><p>虚拟技术把一个物理实体转换为多个逻辑实体。<br>主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。<br>多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。<br>虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。</p>
<h2 id="4-异步"><a href="#4-异步" class="headerlink" title="4. 异步"></a>4. 异步</h2><p>异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。</p>
<h1 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h1><h2 id="1-进程管理"><a href="#1-进程管理" class="headerlink" title="1. 进程管理"></a>1. 进程管理</h2><p>进程控制、进程同步、进程通信、死锁处理、处理机调度等。</p>
<h2 id="2-内存管理"><a href="#2-内存管理" class="headerlink" title="2. 内存管理"></a>2. 内存管理</h2><p>内存分配、地址映射、内存保护与共享、虚拟内存等。</p>
<h2 id="3-文件管理"><a href="#3-文件管理" class="headerlink" title="3. 文件管理"></a>3. 文件管理</h2><p>文件存储空间的管理、目录管理、文件读写管理和保护等。</p>
<h2 id="4-设备管理"><a href="#4-设备管理" class="headerlink" title="4. 设备管理"></a>4. 设备管理</h2><p>完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率。<br>主要包括缓冲管理、设备分配、设备处理、虛拟设备等。</p>
<h1 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h1><p>如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/d7f2c82674fb1fc7c275a3777e267da74734ce4e/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f74475056302e706e67"><img src="https://camo.githubusercontent.com/d7f2c82674fb1fc7c275a3777e267da74734ce4e/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f74475056302e706e67#align=left&display=inline&height=462&margin=%5Bobject%20Object%5D&originHeight=462&originWidth=753&status=done&style=none&width=600"></a></p>
<p>Linux 的系统调用主要有以下这些：</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Commands</th>
</tr>
</thead>
<tbody><tr>
<td>进程控制</td>
<td>fork(); exit(); wait();</td>
</tr>
<tr>
<td>进程通信</td>
<td>pipe(); shmget(); mmap();</td>
</tr>
<tr>
<td>文件操作</td>
<td>open(); read(); write();</td>
</tr>
<tr>
<td>设备操作</td>
<td>ioctl(); read(); write();</td>
</tr>
<tr>
<td>信息维护</td>
<td>getpid(); alarm(); sleep();</td>
</tr>
<tr>
<td>安全</td>
<td>chmod(); umask(); chown();</td>
</tr>
</tbody></table>
<h1 id="大内核和微内核"><a href="#大内核和微内核" class="headerlink" title="大内核和微内核"></a>大内核和微内核</h1><h2 id="1-大内核"><a href="#1-大内核" class="headerlink" title="1. 大内核"></a>1. 大内核</h2><p>大内核是将操作系统功能作为一个紧密结合的整体放到内核。<br>由于各模块共享信息，因此有很高的性能。</p>
<h2 id="2-微内核"><a href="#2-微内核" class="headerlink" title="2. 微内核"></a>2. 微内核</h2><p>由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。<br>在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。<br>因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。<br><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/c2721db9fbb427d810a78113af34ccfc6adf4bdd/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f325f31345f6d6963726f6b65726e656c4172636869746563747572652e6a7067"><img src="https://camo.githubusercontent.com/c2721db9fbb427d810a78113af34ccfc6adf4bdd/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f325f31345f6d6963726f6b65726e656c4172636869746563747572652e6a7067#align=left&display=inline&height=295&margin=%5Bobject%20Object%5D&originHeight=295&originWidth=609&status=done&style=none&width=609"></a></p>
<h1 id="中断分类"><a href="#中断分类" class="headerlink" title="中断分类"></a>中断分类</h1><h2 id="1-外中断"><a href="#1-外中断" class="headerlink" title="1. 外中断"></a>1. 外中断</h2><p>由 CPU 执行指令以外的事件引起，如 I/O 完成中断，表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求。此外还有时钟中断、控制台中断等。</p>
<h2 id="2-异常"><a href="#2-异常" class="headerlink" title="2. 异常"></a>2. 异常</h2><p>由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。</p>
<h2 id="3-陷入"><a href="#3-陷入" class="headerlink" title="3. 陷入"></a>3. 陷入</h2><p>在用户程序中使用系统调用。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/15/yuque/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/7/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2021 Murphy Yi
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="​",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">http</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">learn</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">java</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">mysql</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">read</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">数据库</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://wallquick.vip" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>墙快</a>
            </li>
          
            <li class="search-li">
              <a href="https://www.murphyyi.com" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>墨菲主页</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>